import{eventSource as e,event_types as t,setExtensionPrompt as n,extension_prompt_types as s,extension_prompt_roles as o,saveSettingsDebounced as i}from'../../../../../script.js';import{extension_settings as r,getContext as a}from'../../../../../scripts/extensions.js';import{t as l}from'../../../../../scripts/i18n.js';import{Popup as c,POPUP_TYPE as u,POPUP_RESULT as d}from'../../../../../scripts/popup.js';function f(){return'undefined'!=typeof crypto&&'function'==typeof crypto.randomUUID?crypto.randomUUID():'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g,e=>{const t=16*Math.random()|0;return('x'===e?t:3&t|8).toString(16)})}function p(e,t,n){function s(n,s){if(n._zod||Object.defineProperty(n,'_zod',{value:{def:s,constr:_,traits:new Set},enumerable:!1}),n._zod.traits.has(e))return;n._zod.traits.add(e),t(n,s);const o=_.prototype,i=Object.keys(o);for(let e=0;e<i.length;e++){const t=i[e];t in n||(n[t]=o[t].bind(n))}}const o=n?.Parent??Object;class i extends o{}function _(e){var t;const o=n?.Parent?new i:this;s(o,e),(t=o._zod).deferred??(t.deferred=[]);for(const n of o._zod.deferred)n();return o}return Object.defineProperty(i,'name',{value:e}),Object.defineProperty(_,'init',{value:s}),Object.defineProperty(_,Symbol.hasInstance,{value:t=>!!(n?.Parent&&t instanceof n.Parent)||t?._zod?.traits?.has(e)}),Object.defineProperty(_,'name',{value:e}),_}class h extends Error{constructor(){super('Encountered Promise during synchronous parse. Use .parseAsync() instead.')}}class m extends Error{constructor(e){super(`Encountered unidirectional transform during encode: ${e}`),this.name='ZodEncodeError'}}const g={};function v(e){return g}function y(_,e){return'bigint'==typeof e?e.toString():e}function b(e){return{get value(){{const t=e();return Object.defineProperty(this,'value',{value:t}),t}}}}function w(e){return null==e}function k(e){const t=e.startsWith('^')?1:0,n=e.endsWith('$')?e.length-1:e.length;return e.slice(t,n)}const S=Symbol('evaluating');function x(e,t,n){let s;Object.defineProperty(e,t,{get(){if(s!==S)return void 0===s&&(s=S,s=n()),s},set(n){Object.defineProperty(e,t,{value:n})},configurable:!0})}function E(e,t,n){Object.defineProperty(e,t,{value:n,writable:!0,enumerable:!0,configurable:!0})}function T(...e){const t={};for(const n of e){const e=Object.getOwnPropertyDescriptors(n);Object.assign(t,e)}return Object.defineProperties({},t)}function C(e){return JSON.stringify(e)}const N='captureStackTrace'in Error?Error.captureStackTrace:(...e)=>{};function O(e){return'object'==typeof e&&null!==e&&!Array.isArray(e)}const A=b(()=>{if('undefined'!=typeof navigator&&navigator?.userAgent?.includes('Cloudflare'))return!1;try{return new Function(''),!0}catch(_){return!1}});function I(e){if(!1===O(e))return!1;const t=e.constructor;if(void 0===t)return!0;if('function'!=typeof t)return!0;const n=t.prototype;return!1!==O(n)&&!1!==Object.prototype.hasOwnProperty.call(n,'isPrototypeOf')}function P(e){return I(e)?{...e}:Array.isArray(e)?[...e]:e}const D=new Set(['string','number','symbol']);function j(e){return e.replace(/[.*+?^${}()|[\]\\]/g,'\\$&')}function L(e,t,n){const s=new e._zod.constr(t??e._zod.def);return t&&!n?.parent||(s._zod.parent=e),s}function M(e){const t=e;if(!t)return{};if('string'==typeof t)return{error:()=>t};if(void 0!==t?.message){if(void 0!==t?.error)throw new Error('Cannot specify both `message` and `error` params');t.error=t.message}return delete t.message,'string'==typeof t.error?{...t,error:()=>t.error}:t}const F={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function R(e,t=0){if(!0===e.aborted)return!0;for(let n=t;n<e.issues.length;n++)if(!0!==e.issues[n]?.continue)return!0;return!1}function B(e,t){return t.map(t=>{var n;return(n=t).path??(n.path=[]),t.path.unshift(e),t})}function U(e){return'string'==typeof e?e:e?.message}function V(e,t,n){const s={...e,path:e.path??[]};if(!e.message){const o=U(e.inst?._zod.def?.error?.(e))??U(t?.error?.(e))??U(n.customError?.(e))??U(n.localeError?.(e))??'Invalid input';s.message=o}return delete s.inst,delete s.continue,t?.reportInput||delete s.input,s}function K(e){return Array.isArray(e)?'array':'string'==typeof e?'string':'unknown'}function Z(...e){const[t,n,s]=e;return'string'==typeof t?{message:t,code:'custom',input:n,inst:s}:{...t}}const q=(e,t)=>{e.name='$ZodError',Object.defineProperty(e,'_zod',{value:e._zod,enumerable:!1}),Object.defineProperty(e,'issues',{value:t,enumerable:!1}),e.message=JSON.stringify(t,y,2),Object.defineProperty(e,'toString',{value:()=>e.message,enumerable:!1})},W=p('$ZodError',q),Y=p('$ZodError',q,{Parent:Error});function H(e){const t=[],n=e.map(e=>'object'==typeof e?e.key:e);for(const s of n)'number'==typeof s?t.push(`[${s}]`):'symbol'==typeof s?t.push(`[${JSON.stringify(String(s))}]`):/[^\w$]/.test(s)?t.push(`[${JSON.stringify(s)}]`):(t.length&&t.push('.'),t.push(s));return t.join('')}const G=e=>(t,n,s,o)=>{const i=s?Object.assign(s,{async:!1}):{async:!1},r=t._zod.run({value:n,issues:[]},i);if(r instanceof Promise)throw new h;if(r.issues.length){const t=new(o?.Err??e)(r.issues.map(e=>V(e,i,v())));throw N(t,o?.callee),t}return r.value},J=e=>async(t,n,s,o)=>{const i=s?Object.assign(s,{async:!0}):{async:!0};let r=t._zod.run({value:n,issues:[]},i);if(r instanceof Promise&&(r=await r),r.issues.length){const t=new(o?.Err??e)(r.issues.map(e=>V(e,i,v())));throw N(t,o?.callee),t}return r.value},X=e=>(t,n,s)=>{const o=s?{...s,async:!1}:{async:!1},i=t._zod.run({value:n,issues:[]},o);if(i instanceof Promise)throw new h;return i.issues.length?{success:!1,error:new(e??W)(i.issues.map(e=>V(e,o,v())))}:{success:!0,data:i.value}},Q=X(Y),ee=e=>async(t,n,s)=>{const o=s?Object.assign(s,{async:!0}):{async:!0};let i=t._zod.run({value:n,issues:[]},o);return i instanceof Promise&&(i=await i),i.issues.length?{success:!1,error:new e(i.issues.map(e=>V(e,o,v())))}:{success:!0,data:i.value}},te=ee(Y),ne=e=>(t,n,s)=>{const o=s?Object.assign(s,{direction:'backward'}):{direction:'backward'};return G(e)(t,n,o)},se=e=>(t,n,s)=>G(e)(t,n,s),oe=e=>async(t,n,s)=>{const o=s?Object.assign(s,{direction:'backward'}):{direction:'backward'};return J(e)(t,n,o)},ie=e=>async(t,n,s)=>J(e)(t,n,s),re=e=>(t,n,s)=>{const o=s?Object.assign(s,{direction:'backward'}):{direction:'backward'};return X(e)(t,n,o)},ae=e=>(t,n,s)=>X(e)(t,n,s),le=e=>async(t,n,s)=>{const o=s?Object.assign(s,{direction:'backward'}):{direction:'backward'};return ee(e)(t,n,o)},ce=e=>async(t,n,s)=>ee(e)(t,n,s),ue=/^[cC][^\s-]{8,}$/,de=/^[0-9a-z]+$/,fe=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,pe=/^[0-9a-vA-V]{20}$/,he=/^[A-Za-z0-9]{27}$/,me=/^[a-zA-Z0-9_-]{21}$/,ge=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,ve=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,ye=e=>e?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,be=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/;const _e=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,we=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,ke=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,Se=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,xe=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,Ee=/^[A-Za-z0-9_-]*$/,Te=/^\+(?:[0-9]){6,14}[0-9]$/,Ce='(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))',Ne=new RegExp(`^${Ce}$`);function Oe(e){const t='(?:[01]\\d|2[0-3]):[0-5]\\d';return'number'==typeof e.precision?-1===e.precision?`${t}`:0===e.precision?`${t}:[0-5]\\d`:`${t}:[0-5]\\d\\.\\d{${e.precision}}`:`${t}(?::[0-5]\\d(?:\\.\\d+)?)?`}const Ae=/^-?\d+$/,Ie=/^-?\d+(?:\.\d+)?/,$e=/^(?:true|false)$/i,Pe=/^[^A-Z]*$/,De=/^[^a-z]*$/,je=p('$ZodCheck',(e,t)=>{var n;e._zod??(e._zod={}),e._zod.def=t,(n=e._zod).onattach??(n.onattach=[])}),ze={number:'number',bigint:'bigint',object:'date'},Le=p('$ZodCheckLessThan',(e,t)=>{je.init(e,t);const n=ze[typeof t.value];e._zod.onattach.push(e=>{const n=e._zod.bag,s=(t.inclusive?n.maximum:n.exclusiveMaximum)??Number.POSITIVE_INFINITY;t.value<s&&(t.inclusive?n.maximum=t.value:n.exclusiveMaximum=t.value)}),e._zod.check=s=>{(t.inclusive?s.value<=t.value:s.value<t.value)||s.issues.push({origin:n,code:'too_big',maximum:t.value,input:s.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),Me=p('$ZodCheckGreaterThan',(e,t)=>{je.init(e,t);const n=ze[typeof t.value];e._zod.onattach.push(e=>{const n=e._zod.bag,s=(t.inclusive?n.minimum:n.exclusiveMinimum)??Number.NEGATIVE_INFINITY;t.value>s&&(t.inclusive?n.minimum=t.value:n.exclusiveMinimum=t.value)}),e._zod.check=s=>{(t.inclusive?s.value>=t.value:s.value>t.value)||s.issues.push({origin:n,code:'too_small',minimum:t.value,input:s.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),Fe=p('$ZodCheckMultipleOf',(e,t)=>{je.init(e,t),e._zod.onattach.push(e=>{var n;(n=e._zod.bag).multipleOf??(n.multipleOf=t.value)}),e._zod.check=n=>{if(typeof n.value!=typeof t.value)throw new Error('Cannot mix number and bigint in multiple_of check.');('bigint'==typeof n.value?n.value%t.value===BigInt(0):0===function(e,t){const n=(e.toString().split('.')[1]||'').length,s=t.toString();let o=(s.split('.')[1]||'').length;if(0===o&&/\d?e-\d?/.test(s)){const e=s.match(/\d?e-(\d?)/);e?.[1]&&(o=Number.parseInt(e[1]))}const i=n>o?n:o;return Number.parseInt(e.toFixed(i).replace('.',''))%Number.parseInt(t.toFixed(i).replace('.',''))/10**i}(n.value,t.value))||n.issues.push({origin:typeof n.value,code:'not_multiple_of',divisor:t.value,input:n.value,inst:e,continue:!t.abort})}}),Re=p('$ZodCheckNumberFormat',(e,t)=>{je.init(e,t),t.format=t.format||'float64';const n=t.format?.includes('int'),s=n?'int':'number',[o,i]=F[t.format];e._zod.onattach.push(e=>{const s=e._zod.bag;s.format=t.format,s.minimum=o,s.maximum=i,n&&(s.pattern=Ae)}),e._zod.check=r=>{const a=r.value;if(n){if(!Number.isInteger(a))return void r.issues.push({expected:s,format:t.format,code:'invalid_type',continue:!1,input:a,inst:e});if(!Number.isSafeInteger(a))return void(a>0?r.issues.push({input:a,code:'too_big',maximum:Number.MAX_SAFE_INTEGER,note:'Integers must be within the safe integer range.',inst:e,origin:s,continue:!t.abort}):r.issues.push({input:a,code:'too_small',minimum:Number.MIN_SAFE_INTEGER,note:'Integers must be within the safe integer range.',inst:e,origin:s,continue:!t.abort}))}a<o&&r.issues.push({origin:'number',input:a,code:'too_small',minimum:o,inclusive:!0,inst:e,continue:!t.abort}),a>i&&r.issues.push({origin:'number',input:a,code:'too_big',maximum:i,inst:e})}}),Be=p('$ZodCheckMaxLength',(e,t)=>{var n;je.init(e,t),(n=e._zod.def).when??(n.when=e=>{const t=e.value;return!w(t)&&void 0!==t.length}),e._zod.onattach.push(e=>{const n=e._zod.bag.maximum??Number.POSITIVE_INFINITY;t.maximum<n&&(e._zod.bag.maximum=t.maximum)}),e._zod.check=n=>{const s=n.value;if(s.length<=t.maximum)return;const o=K(s);n.issues.push({origin:o,code:'too_big',maximum:t.maximum,inclusive:!0,input:s,inst:e,continue:!t.abort})}}),Ue=p('$ZodCheckMinLength',(e,t)=>{var n;je.init(e,t),(n=e._zod.def).when??(n.when=e=>{const t=e.value;return!w(t)&&void 0!==t.length}),e._zod.onattach.push(e=>{const n=e._zod.bag.minimum??Number.NEGATIVE_INFINITY;t.minimum>n&&(e._zod.bag.minimum=t.minimum)}),e._zod.check=n=>{const s=n.value;if(s.length>=t.minimum)return;const o=K(s);n.issues.push({origin:o,code:'too_small',minimum:t.minimum,inclusive:!0,input:s,inst:e,continue:!t.abort})}}),Ve=p('$ZodCheckLengthEquals',(e,t)=>{var n;je.init(e,t),(n=e._zod.def).when??(n.when=e=>{const t=e.value;return!w(t)&&void 0!==t.length}),e._zod.onattach.push(e=>{const n=e._zod.bag;n.minimum=t.length,n.maximum=t.length,n.length=t.length}),e._zod.check=n=>{const s=n.value,o=s.length;if(o===t.length)return;const i=K(s),r=o>t.length;n.issues.push({origin:i,...r?{code:'too_big',maximum:t.length}:{code:'too_small',minimum:t.length},inclusive:!0,exact:!0,input:n.value,inst:e,continue:!t.abort})}}),Ke=p('$ZodCheckStringFormat',(e,t)=>{var n,s;je.init(e,t),e._zod.onattach.push(e=>{const n=e._zod.bag;n.format=t.format,t.pattern&&(n.patterns??(n.patterns=new Set),n.patterns.add(t.pattern))}),t.pattern?(n=e._zod).check??(n.check=n=>{t.pattern.lastIndex=0,t.pattern.test(n.value)||n.issues.push({origin:'string',code:'invalid_format',format:t.format,input:n.value,...t.pattern?{pattern:t.pattern.toString()}:{},inst:e,continue:!t.abort})}):(s=e._zod).check??(s.check=()=>{})}),Ze=p('$ZodCheckRegex',(e,t)=>{Ke.init(e,t),e._zod.check=n=>{t.pattern.lastIndex=0,t.pattern.test(n.value)||n.issues.push({origin:'string',code:'invalid_format',format:'regex',input:n.value,pattern:t.pattern.toString(),inst:e,continue:!t.abort})}}),qe=p('$ZodCheckLowerCase',(e,t)=>{t.pattern??(t.pattern=Pe),Ke.init(e,t)}),We=p('$ZodCheckUpperCase',(e,t)=>{t.pattern??(t.pattern=De),Ke.init(e,t)}),Ye=p('$ZodCheckIncludes',(e,t)=>{je.init(e,t);const n=j(t.includes),s=new RegExp('number'==typeof t.position?`^.{${t.position}}${n}`:n);t.pattern=s,e._zod.onattach.push(e=>{const t=e._zod.bag;t.patterns??(t.patterns=new Set),t.patterns.add(s)}),e._zod.check=n=>{n.value.includes(t.includes,t.position)||n.issues.push({origin:'string',code:'invalid_format',format:'includes',includes:t.includes,input:n.value,inst:e,continue:!t.abort})}}),He=p('$ZodCheckStartsWith',(e,t)=>{je.init(e,t);const n=new RegExp(`^${j(t.prefix)}.*`);t.pattern??(t.pattern=n),e._zod.onattach.push(e=>{const t=e._zod.bag;t.patterns??(t.patterns=new Set),t.patterns.add(n)}),e._zod.check=n=>{n.value.startsWith(t.prefix)||n.issues.push({origin:'string',code:'invalid_format',format:'starts_with',prefix:t.prefix,input:n.value,inst:e,continue:!t.abort})}}),Ge=p('$ZodCheckEndsWith',(e,t)=>{je.init(e,t);const n=new RegExp(`.*${j(t.suffix)}$`);t.pattern??(t.pattern=n),e._zod.onattach.push(e=>{const t=e._zod.bag;t.patterns??(t.patterns=new Set),t.patterns.add(n)}),e._zod.check=n=>{n.value.endsWith(t.suffix)||n.issues.push({origin:'string',code:'invalid_format',format:'ends_with',suffix:t.suffix,input:n.value,inst:e,continue:!t.abort})}}),Je=p('$ZodCheckOverwrite',(e,t)=>{je.init(e,t),e._zod.check=e=>{e.value=t.tx(e.value)}});class Xe{constructor(e=[]){this.content=[],this.indent=0,this&&(this.args=e)}indented(e){this.indent+=1,e(this),this.indent-=1}write(e){if('function'==typeof e)return e(this,{execution:'sync'}),void e(this,{execution:'async'});const t=e.split('\n').filter(e=>e),n=Math.min(...t.map(e=>e.length-e.trimStart().length)),s=t.map(e=>e.slice(n)).map(e=>' '.repeat(2*this.indent)+e);for(const o of s)this.content.push(o)}compile(){const e=Function,t=this?.args;return new e(...t,[...(this?.content??['']).map(e=>`  ${e}`)].join('\n'))}}const Qe={major:4,minor:1,patch:13},et=p('$ZodType',(e,t)=>{var n;e??(e={}),e._zod.def=t,e._zod.bag=e._zod.bag||{},e._zod.version=Qe;const s=[...e._zod.def.checks??[]];e._zod.traits.has('$ZodCheck')&&s.unshift(e);for(const o of s)for(const t of o._zod.onattach)t(e);if(0===s.length)(n=e._zod).deferred??(n.deferred=[]),e._zod.deferred?.push(()=>{e._zod.run=e._zod.parse});else{const t=(e,t,n)=>{let s,o=R(e);for(const i of t){if(i._zod.def.when){if(!i._zod.def.when(e))continue}else if(o)continue;const t=e.issues.length,_=i._zod.check(e);if(_ instanceof Promise&&!1===n?.async)throw new h;if(s||_ instanceof Promise)s=(s??Promise.resolve()).then(async()=>{await _;e.issues.length!==t&&(o||(o=R(e,t)))});else{if(e.issues.length===t)continue;o||(o=R(e,t))}}return s?s.then(()=>e):e},n=(n,o,i)=>{if(R(n))return n.aborted=!0,n;const r=t(o,s,i);if(r instanceof Promise){if(!1===i.async)throw new h;return r.then(t=>e._zod.parse(t,i))}return e._zod.parse(r,i)};e._zod.run=(o,i)=>{if(i.skipChecks)return e._zod.parse(o,i);if('backward'===i.direction){const t=e._zod.parse({value:o.value,issues:[]},{...i,skipChecks:!0});return t instanceof Promise?t.then(e=>n(e,o,i)):n(t,o,i)}const r=e._zod.parse(o,i);if(r instanceof Promise){if(!1===i.async)throw new h;return r.then(e=>t(e,s,i))}return t(r,s,i)}}e['~standard']={validate:t=>{try{const n=Q(e,t);return n.success?{value:n.data}:{issues:n.error?.issues}}catch(_){return te(e,t).then(e=>e.success?{value:e.data}:{issues:e.error?.issues})}},vendor:'zod',version:1}}),tt=p('$ZodString',(e,t)=>{var n;et.init(e,t),e._zod.pattern=[...e?._zod.bag?.patterns??[]].pop()??(n=e._zod.bag,new RegExp(`^${n?`[\\s\\S]{${n?.minimum??0},${n?.maximum??''}}`:'[\\s\\S]*'}$`)),e._zod.parse=(n,_)=>{if(t.coerce)try{n.value=String(n.value)}catch(_){}return'string'==typeof n.value||n.issues.push({expected:'string',code:'invalid_type',input:n.value,inst:e}),n}}),nt=p('$ZodStringFormat',(e,t)=>{Ke.init(e,t),tt.init(e,t)}),st=p('$ZodGUID',(e,t)=>{t.pattern??(t.pattern=ve),nt.init(e,t)}),ot=p('$ZodUUID',(e,t)=>{if(t.version){const e={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[t.version];if(void 0===e)throw new Error(`Invalid UUID version: "${t.version}"`);t.pattern??(t.pattern=ye(e))}else t.pattern??(t.pattern=ye());nt.init(e,t)}),it=p('$ZodEmail',(e,t)=>{t.pattern??(t.pattern=be),nt.init(e,t)}),rt=p('$ZodURL',(e,t)=>{nt.init(e,t),e._zod.check=n=>{try{const s=n.value.trim(),o=new URL(s);return t.hostname&&(t.hostname.lastIndex=0,t.hostname.test(o.hostname)||n.issues.push({code:'invalid_format',format:'url',note:'Invalid hostname',pattern:t.hostname.source,input:n.value,inst:e,continue:!t.abort})),t.protocol&&(t.protocol.lastIndex=0,t.protocol.test(o.protocol.endsWith(':')?o.protocol.slice(0,-1):o.protocol)||n.issues.push({code:'invalid_format',format:'url',note:'Invalid protocol',pattern:t.protocol.source,input:n.value,inst:e,continue:!t.abort})),void(t.normalize?n.value=o.href:n.value=s)}catch(_){n.issues.push({code:'invalid_format',format:'url',input:n.value,inst:e,continue:!t.abort})}}}),at=p('$ZodEmoji',(e,t)=>{t.pattern??(t.pattern=new RegExp('^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$','u')),nt.init(e,t)}),lt=p('$ZodNanoID',(e,t)=>{t.pattern??(t.pattern=me),nt.init(e,t)}),ct=p('$ZodCUID',(e,t)=>{t.pattern??(t.pattern=ue),nt.init(e,t)}),ut=p('$ZodCUID2',(e,t)=>{t.pattern??(t.pattern=de),nt.init(e,t)}),dt=p('$ZodULID',(e,t)=>{t.pattern??(t.pattern=fe),nt.init(e,t)}),ft=p('$ZodXID',(e,t)=>{t.pattern??(t.pattern=pe),nt.init(e,t)}),pt=p('$ZodKSUID',(e,t)=>{t.pattern??(t.pattern=he),nt.init(e,t)}),ht=p('$ZodISODateTime',(e,t)=>{t.pattern??(t.pattern=function(e){const t=Oe({precision:e.precision}),n=['Z'];e.local&&n.push(''),e.offset&&n.push('([+-](?:[01]\\d|2[0-3]):[0-5]\\d)');const s=`${t}(?:${n.join('|')})`;return new RegExp(`^${Ce}T(?:${s})$`)}(t)),nt.init(e,t)}),mt=p('$ZodISODate',(e,t)=>{t.pattern??(t.pattern=Ne),nt.init(e,t)}),gt=p('$ZodISOTime',(e,t)=>{t.pattern??(t.pattern=new RegExp(`^${Oe(t)}$`)),nt.init(e,t)}),vt=p('$ZodISODuration',(e,t)=>{t.pattern??(t.pattern=ge),nt.init(e,t)}),yt=p('$ZodIPv4',(e,t)=>{t.pattern??(t.pattern=_e),nt.init(e,t),e._zod.bag.format='ipv4'}),bt=p('$ZodIPv6',(e,t)=>{t.pattern??(t.pattern=we),nt.init(e,t),e._zod.bag.format='ipv6',e._zod.check=n=>{try{new URL(`http://[${n.value}]`)}catch{n.issues.push({code:'invalid_format',format:'ipv6',input:n.value,inst:e,continue:!t.abort})}}}),_t=p('$ZodCIDRv4',(e,t)=>{t.pattern??(t.pattern=ke),nt.init(e,t)}),wt=p('$ZodCIDRv6',(e,t)=>{t.pattern??(t.pattern=Se),nt.init(e,t),e._zod.check=n=>{const s=n.value.split('/');try{if(2!==s.length)throw new Error;const[e,t]=s;if(!t)throw new Error;const n=Number(t);if(`${n}`!==t)throw new Error;if(n<0||n>128)throw new Error;new URL(`http://[${e}]`)}catch{n.issues.push({code:'invalid_format',format:'cidrv6',input:n.value,inst:e,continue:!t.abort})}}});function kt(e){if(''===e)return!0;if(e.length%4!=0)return!1;try{return atob(e),!0}catch{return!1}}const St=p('$ZodBase64',(e,t)=>{t.pattern??(t.pattern=xe),nt.init(e,t),e._zod.bag.contentEncoding='base64',e._zod.check=n=>{kt(n.value)||n.issues.push({code:'invalid_format',format:'base64',input:n.value,inst:e,continue:!t.abort})}});const xt=p('$ZodBase64URL',(e,t)=>{t.pattern??(t.pattern=Ee),nt.init(e,t),e._zod.bag.contentEncoding='base64url',e._zod.check=n=>{(function(e){if(!Ee.test(e))return!1;const t=e.replace(/[-_]/g,e=>'-'===e?'+':'/');return kt(t.padEnd(4*Math.ceil(t.length/4),'='))})(n.value)||n.issues.push({code:'invalid_format',format:'base64url',input:n.value,inst:e,continue:!t.abort})}}),Et=p('$ZodE164',(e,t)=>{t.pattern??(t.pattern=Te),nt.init(e,t)});const Tt=p('$ZodJWT',(e,t)=>{nt.init(e,t),e._zod.check=n=>{(function(e,t=null){try{const n=e.split('.');if(3!==n.length)return!1;const[s]=n;if(!s)return!1;const o=JSON.parse(atob(s));return!('typ'in o&&'JWT'!==o?.typ||!o.alg||t&&(!('alg'in o)||o.alg!==t))}catch{return!1}})(n.value,t.alg)||n.issues.push({code:'invalid_format',format:'jwt',input:n.value,inst:e,continue:!t.abort})}}),Ct=p('$ZodNumber',(e,t)=>{et.init(e,t),e._zod.pattern=e._zod.bag.pattern??Ie,e._zod.parse=(n,s)=>{if(t.coerce)try{n.value=Number(n.value)}catch(_){}const o=n.value;if('number'==typeof o&&!Number.isNaN(o)&&Number.isFinite(o))return n;const i='number'==typeof o?Number.isNaN(o)?'NaN':Number.isFinite(o)?void 0:'Infinity':void 0;return n.issues.push({expected:'number',code:'invalid_type',input:o,inst:e,...i?{received:i}:{}}),n}}),Nt=p('$ZodNumberFormat',(e,t)=>{Re.init(e,t),Ct.init(e,t)}),Ot=p('$ZodBoolean',(e,t)=>{et.init(e,t),e._zod.pattern=$e,e._zod.parse=(n,s)=>{if(t.coerce)try{n.value=Boolean(n.value)}catch(_){}const o=n.value;return'boolean'==typeof o||n.issues.push({expected:'boolean',code:'invalid_type',input:o,inst:e}),n}}),At=p('$ZodUnknown',(e,t)=>{et.init(e,t),e._zod.parse=e=>e}),It=p('$ZodNever',(e,t)=>{et.init(e,t),e._zod.parse=(t,n)=>(t.issues.push({expected:'never',code:'invalid_type',input:t.value,inst:e}),t)});function $t(e,t,n){e.issues.length&&t.issues.push(...B(n,e.issues)),t.value[n]=e.value}const Pt=p('$ZodArray',(e,t)=>{et.init(e,t),e._zod.parse=(n,s)=>{const o=n.value;if(!Array.isArray(o))return n.issues.push({expected:'array',code:'invalid_type',input:o,inst:e}),n;n.value=Array(o.length);const i=[];for(let e=0;e<o.length;e++){const r=o[e],a=t.element._zod.run({value:r,issues:[]},s);a instanceof Promise?i.push(a.then(t=>$t(t,n,e))):$t(a,n,e)}return i.length?Promise.all(i).then(()=>n):n}});function Dt(e,t,n,s){e.issues.length&&t.issues.push(...B(n,e.issues)),void 0===e.value?n in s&&(t.value[n]=void 0):t.value[n]=e.value}function jt(e){const t=Object.keys(e.shape);for(const o of t)if(!e.shape?.[o]?._zod?.traits?.has('$ZodType'))throw new Error(`Invalid element at key "${o}": expected a Zod schema`);const n=(s=e.shape,Object.keys(s).filter(e=>'optional'===s[e]._zod.optin&&'optional'===s[e]._zod.optout));var s;return{...e,keys:t,keySet:new Set(t),numKeys:t.length,optionalKeys:new Set(n)}}function zt(e,t,n,s,o,i){const r=[],a=o.keySet,l=o.catchall._zod,c=l.def.type;for(const u in t){if(a.has(u))continue;if('never'===c){r.push(u);continue}const o=l.run({value:t[u],issues:[]},s);o instanceof Promise?e.push(o.then(e=>Dt(e,n,u,t))):Dt(o,n,u,t)}return r.length&&n.issues.push({code:'unrecognized_keys',keys:r,input:t,inst:i}),e.length?Promise.all(e).then(()=>n):n}const Lt=p('$ZodObject',(e,t)=>{et.init(e,t);const n=Object.getOwnPropertyDescriptor(t,'shape');if(!n?.get){const e=t.shape;Object.defineProperty(t,'shape',{get:()=>{const n={...e};return Object.defineProperty(t,'shape',{value:n}),n}})}const s=b(()=>jt(t));x(e._zod,'propValues',()=>{const e=t.shape,n={};for(const t in e){const s=e[t]._zod;if(s.values){n[t]??(n[t]=new Set);for(const e of s.values)n[t].add(e)}}return n});const o=O,i=t.catchall;let r;e._zod.parse=(t,n)=>{r??(r=s.value);const a=t.value;if(!o(a))return t.issues.push({expected:'object',code:'invalid_type',input:a,inst:e}),t;t.value={};const l=[],c=r.shape;for(const e of r.keys){const s=c[e]._zod.run({value:a[e],issues:[]},n);s instanceof Promise?l.push(s.then(n=>Dt(n,t,e,a))):Dt(s,t,e,a)}return i?zt(l,a,t,n,s.value,e):l.length?Promise.all(l).then(()=>t):t}}),Mt=p('$ZodObjectJIT',(e,t)=>{Lt.init(e,t);const n=e._zod.parse,s=b(()=>jt(t));let o;const i=O,r=!g.jitless,a=r&&A.value,l=t.catchall;let c;e._zod.parse=(u,d)=>{c??(c=s.value);const f=u.value;return i(f)?r&&a&&!1===d?.async&&!0!==d.jitless?(o||(o=(e=>{const t=new Xe(['shape','payload','ctx']),n=s.value,o=e=>{const t=C(e);return`shape[${t}]._zod.run({ value: input[${t}], issues: [] }, ctx)`};t.write('const input = payload.value;');const i=Object.create(null);let r=0;for(const s of n.keys)i[s]='key_'+r++;t.write('const newResult = {};');for(const s of n.keys){const e=i[s],n=C(s);t.write(`const ${e} = ${o(s)};`),t.write(`\n        if (${e}.issues.length) {\n          payload.issues = payload.issues.concat(${e}.issues.map(iss => ({\n            ...iss,\n            path: iss.path ? [${n}, ...iss.path] : [${n}]\n          })));\n        }\n        \n        \n        if (${e}.value === undefined) {\n          if (${n} in input) {\n            newResult[${n}] = undefined;\n          }\n        } else {\n          newResult[${n}] = ${e}.value;\n        }\n        \n      `)}t.write('payload.value = newResult;'),t.write('return payload;');const a=t.compile();return(t,n)=>a(e,t,n)})(t.shape)),u=o(u,d),l?zt([],f,u,d,c,e):u):n(u,d):(u.issues.push({expected:'object',code:'invalid_type',input:f,inst:e}),u)}});function Ft(e,t,n,s){for(const i of e)if(0===i.issues.length)return t.value=i.value,t;const o=e.filter(e=>!R(e));return 1===o.length?(t.value=o[0].value,o[0]):(t.issues.push({code:'invalid_union',input:t.value,inst:n,errors:e.map(e=>e.issues.map(e=>V(e,s,v())))}),t)}const Rt=p('$ZodUnion',(e,t)=>{et.init(e,t),x(e._zod,'optin',()=>t.options.some(e=>'optional'===e._zod.optin)?'optional':void 0),x(e._zod,'optout',()=>t.options.some(e=>'optional'===e._zod.optout)?'optional':void 0),x(e._zod,'values',()=>{if(t.options.every(e=>e._zod.values))return new Set(t.options.flatMap(e=>Array.from(e._zod.values)))}),x(e._zod,'pattern',()=>{if(t.options.every(e=>e._zod.pattern)){const e=t.options.map(e=>e._zod.pattern);return new RegExp(`^(${e.map(e=>k(e.source)).join('|')})$`)}});const n=1===t.options.length,s=t.options[0]._zod.run;e._zod.parse=(o,i)=>{if(n)return s(o,i);let r=!1;const a=[];for(const e of t.options){const t=e._zod.run({value:o.value,issues:[]},i);if(t instanceof Promise)a.push(t),r=!0;else{if(0===t.issues.length)return t;a.push(t)}}return r?Promise.all(a).then(t=>Ft(t,o,e,i)):Ft(a,o,e,i)}}),Bt=p('$ZodIntersection',(e,t)=>{et.init(e,t),e._zod.parse=(e,n)=>{const s=e.value,o=t.left._zod.run({value:s,issues:[]},n),i=t.right._zod.run({value:s,issues:[]},n);return o instanceof Promise||i instanceof Promise?Promise.all([o,i]).then(([t,n])=>Vt(e,t,n)):Vt(e,o,i)}});function Ut(e,t){if(e===t)return{valid:!0,data:e};if(e instanceof Date&&t instanceof Date&&+e===+t)return{valid:!0,data:e};if(I(e)&&I(t)){const n=Object.keys(t),s=Object.keys(e).filter(e=>-1!==n.indexOf(e)),o={...e,...t};for(const i of s){const n=Ut(e[i],t[i]);if(!n.valid)return{valid:!1,mergeErrorPath:[i,...n.mergeErrorPath]};o[i]=n.data}return{valid:!0,data:o}}if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return{valid:!1,mergeErrorPath:[]};const n=[];for(let s=0;s<e.length;s++){const o=Ut(e[s],t[s]);if(!o.valid)return{valid:!1,mergeErrorPath:[s,...o.mergeErrorPath]};n.push(o.data)}return{valid:!0,data:n}}return{valid:!1,mergeErrorPath:[]}}function Vt(e,t,n){if(t.issues.length&&e.issues.push(...t.issues),n.issues.length&&e.issues.push(...n.issues),R(e))return e;const s=Ut(t.value,n.value);if(!s.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(s.mergeErrorPath)}`);return e.value=s.data,e}const Kt=p('$ZodEnum',(e,t)=>{et.init(e,t);const n=function(e){const t=Object.values(e).filter(e=>'number'==typeof e);return Object.entries(e).filter(([e,_])=>-1===t.indexOf(+e)).map(([_,e])=>e)}(t.entries),s=new Set(n);e._zod.values=s,e._zod.pattern=new RegExp(`^(${n.filter(e=>D.has(typeof e)).map(e=>'string'==typeof e?j(e):e.toString()).join('|')})$`),e._zod.parse=(t,o)=>{const i=t.value;return s.has(i)||t.issues.push({code:'invalid_value',values:n,input:i,inst:e}),t}}),Zt=p('$ZodTransform',(e,t)=>{et.init(e,t),e._zod.parse=(n,s)=>{if('backward'===s.direction)throw new m(e.constructor.name);const o=t.transform(n.value,n);if(s.async){return(o instanceof Promise?o:Promise.resolve(o)).then(e=>(n.value=e,n))}if(o instanceof Promise)throw new h;return n.value=o,n}});function qt(e,t){return e.issues.length&&void 0===t?{issues:[],value:void 0}:e}const Wt=p('$ZodOptional',(e,t)=>{et.init(e,t),e._zod.optin='optional',e._zod.optout='optional',x(e._zod,'values',()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,void 0]):void 0),x(e._zod,'pattern',()=>{const e=t.innerType._zod.pattern;return e?new RegExp(`^(${k(e.source)})?$`):void 0}),e._zod.parse=(e,n)=>{if('optional'===t.innerType._zod.optin){const s=t.innerType._zod.run(e,n);return s instanceof Promise?s.then(t=>qt(t,e.value)):qt(s,e.value)}return void 0===e.value?e:t.innerType._zod.run(e,n)}}),Yt=p('$ZodNullable',(e,t)=>{et.init(e,t),x(e._zod,'optin',()=>t.innerType._zod.optin),x(e._zod,'optout',()=>t.innerType._zod.optout),x(e._zod,'pattern',()=>{const e=t.innerType._zod.pattern;return e?new RegExp(`^(${k(e.source)}|null)$`):void 0}),x(e._zod,'values',()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,null]):void 0),e._zod.parse=(e,n)=>null===e.value?e:t.innerType._zod.run(e,n)}),Ht=p('$ZodDefault',(e,t)=>{et.init(e,t),e._zod.optin='optional',x(e._zod,'values',()=>t.innerType._zod.values),e._zod.parse=(e,n)=>{if('backward'===n.direction)return t.innerType._zod.run(e,n);if(void 0===e.value)return e.value=t.defaultValue,e;const s=t.innerType._zod.run(e,n);return s instanceof Promise?s.then(e=>Gt(e,t)):Gt(s,t)}});function Gt(e,t){return void 0===e.value&&(e.value=t.defaultValue),e}const Jt=p('$ZodPrefault',(e,t)=>{et.init(e,t),e._zod.optin='optional',x(e._zod,'values',()=>t.innerType._zod.values),e._zod.parse=(e,n)=>('backward'===n.direction||void 0===e.value&&(e.value=t.defaultValue),t.innerType._zod.run(e,n))}),Xt=p('$ZodNonOptional',(e,t)=>{et.init(e,t),x(e._zod,'values',()=>{const e=t.innerType._zod.values;return e?new Set([...e].filter(e=>void 0!==e)):void 0}),e._zod.parse=(n,s)=>{const o=t.innerType._zod.run(n,s);return o instanceof Promise?o.then(t=>Qt(t,e)):Qt(o,e)}});function Qt(e,t){return e.issues.length||void 0!==e.value||e.issues.push({code:'invalid_type',expected:'nonoptional',input:e.value,inst:t}),e}const en=p('$ZodCatch',(e,t)=>{et.init(e,t),x(e._zod,'optin',()=>t.innerType._zod.optin),x(e._zod,'optout',()=>t.innerType._zod.optout),x(e._zod,'values',()=>t.innerType._zod.values),e._zod.parse=(e,n)=>{if('backward'===n.direction)return t.innerType._zod.run(e,n);const s=t.innerType._zod.run(e,n);return s instanceof Promise?s.then(s=>(e.value=s.value,s.issues.length&&(e.value=t.catchValue({...e,error:{issues:s.issues.map(e=>V(e,n,v()))},input:e.value}),e.issues=[]),e)):(e.value=s.value,s.issues.length&&(e.value=t.catchValue({...e,error:{issues:s.issues.map(e=>V(e,n,v()))},input:e.value}),e.issues=[]),e)}}),tn=p('$ZodPipe',(e,t)=>{et.init(e,t),x(e._zod,'values',()=>t.in._zod.values),x(e._zod,'optin',()=>t.in._zod.optin),x(e._zod,'optout',()=>t.out._zod.optout),x(e._zod,'propValues',()=>t.in._zod.propValues),e._zod.parse=(e,n)=>{if('backward'===n.direction){const s=t.out._zod.run(e,n);return s instanceof Promise?s.then(e=>nn(e,t.in,n)):nn(s,t.in,n)}const s=t.in._zod.run(e,n);return s instanceof Promise?s.then(e=>nn(e,t.out,n)):nn(s,t.out,n)}});function nn(e,t,n){return e.issues.length?(e.aborted=!0,e):t._zod.run({value:e.value,issues:e.issues},n)}const sn=p('$ZodReadonly',(e,t)=>{et.init(e,t),x(e._zod,'propValues',()=>t.innerType._zod.propValues),x(e._zod,'values',()=>t.innerType._zod.values),x(e._zod,'optin',()=>t.innerType?._zod?.optin),x(e._zod,'optout',()=>t.innerType?._zod?.optout),e._zod.parse=(e,n)=>{if('backward'===n.direction)return t.innerType._zod.run(e,n);const s=t.innerType._zod.run(e,n);return s instanceof Promise?s.then(on):on(s)}});function on(e){return e.value=Object.freeze(e.value),e}const rn=p('$ZodCustom',(e,t)=>{je.init(e,t),et.init(e,t),e._zod.parse=(e,_)=>e,e._zod.check=n=>{const s=n.value,o=t.fn(s);if(o instanceof Promise)return o.then(t=>an(t,n,s,e));an(o,n,s,e)}});function an(e,t,n,s){if(!e){const e={code:'custom',input:n,inst:s,path:[...s._zod.def.path??[]],continue:!s._zod.def.abort};s._zod.def.params&&(e.params=s._zod.def.params),t.issues.push(Z(e))}}var ln;class cn{constructor(){this._map=new WeakMap,this._idmap=new Map}add(e,...t){const n=t[0];if(this._map.set(e,n),n&&'object'==typeof n&&'id'in n){if(this._idmap.has(n.id))throw new Error(`ID ${n.id} already exists in the registry`);this._idmap.set(n.id,e)}return this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(e){const t=this._map.get(e);return t&&'object'==typeof t&&'id'in t&&this._idmap.delete(t.id),this._map.delete(e),this}get(e){const t=e._zod.parent;if(t){const n={...this.get(t)??{}};delete n.id;const s={...n,...this._map.get(e)};return Object.keys(s).length?s:void 0}return this._map.get(e)}has(e){return this._map.has(e)}}(ln=globalThis).__zod_globalRegistry??(ln.__zod_globalRegistry=new cn);const un=globalThis.__zod_globalRegistry;function dn(e,t){return new e({type:'string',format:'guid',check:'string_format',abort:!1,...M(t)})}function fn(e,t){return new Le({check:'less_than',...M(t),value:e,inclusive:!1})}function pn(e,t){return new Le({check:'less_than',...M(t),value:e,inclusive:!0})}function hn(e,t){return new Me({check:'greater_than',...M(t),value:e,inclusive:!1})}function mn(e,t){return new Me({check:'greater_than',...M(t),value:e,inclusive:!0})}function gn(e,t){return new Fe({check:'multiple_of',...M(t),value:e})}function vn(e,t){return new Be({check:'max_length',...M(t),maximum:e})}function yn(e,t){return new Ue({check:'min_length',...M(t),minimum:e})}function bn(e,t){return new Ve({check:'length_equals',...M(t),length:e})}function _n(e){return new Je({check:'overwrite',tx:e})}function wn(e){const t=function(e,t){const n=new je({check:'custom',...M(t)});return n._zod.check=e,n}(n=>(n.addIssue=e=>{if('string'==typeof e)n.issues.push(Z(e,n.value,t._zod.def));else{const s=e;s.fatal&&(s.continue=!1),s.code??(s.code='custom'),s.input??(s.input=n.value),s.inst??(s.inst=t),s.continue??(s.continue=!t._zod.def.abort),n.issues.push(Z(s))}},e(n.value,n)));return t}const kn=p('ZodISODateTime',(e,t)=>{ht.init(e,t),Wn.init(e,t)});function Sn(e){return function(e,t){return new e({type:'string',format:'datetime',check:'string_format',offset:!1,local:!1,precision:null,...M(t)})}(kn,e)}const xn=p('ZodISODate',(e,t)=>{mt.init(e,t),Wn.init(e,t)});function En(e){return function(e,t){return new e({type:'string',format:'date',check:'string_format',...M(t)})}(xn,e)}const Tn=p('ZodISOTime',(e,t)=>{gt.init(e,t),Wn.init(e,t)});function Cn(e){return function(e,t){return new e({type:'string',format:'time',check:'string_format',precision:null,...M(t)})}(Tn,e)}const Nn=p('ZodISODuration',(e,t)=>{vt.init(e,t),Wn.init(e,t)});function On(e){return function(e,t){return new e({type:'string',format:'duration',check:'string_format',...M(t)})}(Nn,e)}const An=p('ZodError',(e,t)=>{W.init(e,t),e.name='ZodError',Object.defineProperties(e,{format:{value:t=>function(e,t=e=>e.message){const n={_errors:[]},s=e=>{for(const o of e.issues)if('invalid_union'===o.code&&o.errors.length)o.errors.map(e=>s({issues:e}));else if('invalid_key'===o.code)s({issues:o.issues});else if('invalid_element'===o.code)s({issues:o.issues});else if(0===o.path.length)n._errors.push(t(o));else{let e=n,s=0;for(;s<o.path.length;){const n=o.path[s];s===o.path.length-1?(e[n]=e[n]||{_errors:[]},e[n]._errors.push(t(o))):e[n]=e[n]||{_errors:[]},e=e[n],s++}}};return s(e),n}(e,t)},flatten:{value:t=>function(e,t=e=>e.message){const n={},s=[];for(const o of e.issues)o.path.length>0?(n[o.path[0]]=n[o.path[0]]||[],n[o.path[0]].push(t(o))):s.push(t(o));return{formErrors:s,fieldErrors:n}}(e,t)},addIssue:{value:t=>{e.issues.push(t),e.message=JSON.stringify(e.issues,y,2)}},addIssues:{value:t=>{e.issues.push(...t),e.message=JSON.stringify(e.issues,y,2)}},isEmpty:{get:()=>0===e.issues.length}})},{Parent:Error}),In=G(An),$n=J(An),Pn=X(An),Dn=ee(An),jn=ne(An),zn=se(An),Ln=oe(An),Mn=ie(An),Fn=re(An),Rn=ae(An),Bn=le(An),Un=ce(An),Vn=p('ZodType',(e,t)=>(et.init(e,t),e.def=t,e.type=t.type,Object.defineProperty(e,'_def',{value:t}),e.check=(...n)=>e.clone(T(t,{checks:[...t.checks??[],...n.map(e=>'function'==typeof e?{_zod:{check:e,def:{check:'custom'},onattach:[]}}:e)]})),e.clone=(t,n)=>L(e,t,n),e.brand=()=>e,e.register=(t,n)=>(t.add(e,n),e),e.parse=(t,n)=>In(e,t,n,{callee:e.parse}),e.safeParse=(t,n)=>Pn(e,t,n),e.parseAsync=async(t,n)=>$n(e,t,n,{callee:e.parseAsync}),e.safeParseAsync=async(t,n)=>Dn(e,t,n),e.spa=e.safeParseAsync,e.encode=(t,n)=>jn(e,t,n),e.decode=(t,n)=>zn(e,t,n),e.encodeAsync=async(t,n)=>Ln(e,t,n),e.decodeAsync=async(t,n)=>Mn(e,t,n),e.safeEncode=(t,n)=>Fn(e,t,n),e.safeDecode=(t,n)=>Rn(e,t,n),e.safeEncodeAsync=async(t,n)=>Bn(e,t,n),e.safeDecodeAsync=async(t,n)=>Un(e,t,n),e.refine=(t,n)=>e.check(function(e,t={}){return function(e,t,n){return new e({type:'custom',check:'custom',fn:t,...M(n)})}(Us,e,t)}(t,n)),e.superRefine=t=>e.check(wn(t)),e.overwrite=t=>e.check(_n(t)),e.optional=()=>$s(e),e.nullable=()=>Ds(e),e.nullish=()=>$s(Ds(e)),e.nonoptional=t=>function(e,t){return new Ls({type:'nonoptional',innerType:e,...M(t)})}(e,t),e.array=()=>Ss(e),e.or=t=>{return new Ts({type:'union',options:[e,t],...M(n)});var n},e.and=t=>new Cs({type:'intersection',left:e,right:t}),e.transform=t=>Rs(e,new As({type:'transform',transform:t})),e.default=t=>{return n=t,new js({type:'default',innerType:e,get defaultValue(){return'function'==typeof n?n():P(n)}});var n},e.prefault=t=>{return n=t,new zs({type:'prefault',innerType:e,get defaultValue(){return'function'==typeof n?n():P(n)}});var n},e.catch=t=>{return new Ms({type:'catch',innerType:e,catchValue:'function'==typeof(n=t)?n:()=>n});var n},e.pipe=t=>Rs(e,t),e.readonly=()=>new Bs({type:'readonly',innerType:e}),e.describe=t=>{const n=e.clone();return un.add(n,{description:t}),n},Object.defineProperty(e,'description',{get:()=>un.get(e)?.description,configurable:!0}),e.meta=(...t)=>{if(0===t.length)return un.get(e);const n=e.clone();return un.add(n,t[0]),n},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e)),Kn=p('_ZodString',(e,t)=>{tt.init(e,t),Vn.init(e,t);const n=e._zod.bag;e.format=n.format??null,e.minLength=n.minimum??null,e.maxLength=n.maximum??null,e.regex=(...t)=>e.check(function(e,t){return new Ze({check:'string_format',format:'regex',...M(t),pattern:e})}(...t)),e.includes=(...t)=>e.check(function(e,t){return new Ye({check:'string_format',format:'includes',...M(t),includes:e})}(...t)),e.startsWith=(...t)=>e.check(function(e,t){return new He({check:'string_format',format:'starts_with',...M(t),prefix:e})}(...t)),e.endsWith=(...t)=>e.check(function(e,t){return new Ge({check:'string_format',format:'ends_with',...M(t),suffix:e})}(...t)),e.min=(...t)=>e.check(yn(...t)),e.max=(...t)=>e.check(vn(...t)),e.length=(...t)=>e.check(bn(...t)),e.nonempty=(...t)=>e.check(yn(1,...t)),e.lowercase=t=>e.check(function(e){return new qe({check:'string_format',format:'lowercase',...M(e)})}(t)),e.uppercase=t=>e.check(function(e){return new We({check:'string_format',format:'uppercase',...M(e)})}(t)),e.trim=()=>e.check(_n(e=>e.trim())),e.normalize=(...t)=>e.check(function(e){return _n(t=>t.normalize(e))}(...t)),e.toLowerCase=()=>e.check(_n(e=>e.toLowerCase())),e.toUpperCase=()=>e.check(_n(e=>e.toUpperCase())),e.slugify=()=>e.check(_n(e=>function(e){return e.toLowerCase().trim().replace(/[^\w\s-]/g,'').replace(/[\s_-]+/g,'-').replace(/^-+|-+$/g,'')}(e)))}),Zn=p('ZodString',(e,t)=>{tt.init(e,t),Kn.init(e,t),e.email=t=>e.check(function(e,t){return new e({type:'string',format:'email',check:'string_format',abort:!1,...M(t)})}(Yn,t)),e.url=t=>e.check(function(e,t){return new e({type:'string',format:'url',check:'string_format',abort:!1,...M(t)})}(Jn,t)),e.jwt=t=>e.check(function(e,t){return new e({type:'string',format:'jwt',check:'string_format',abort:!1,...M(t)})}(fs,t)),e.emoji=t=>e.check(function(e,t){return new e({type:'string',format:'emoji',check:'string_format',abort:!1,...M(t)})}(Xn,t)),e.guid=t=>e.check(dn(Hn,t)),e.uuid=t=>e.check(function(e,t){return new e({type:'string',format:'uuid',check:'string_format',abort:!1,...M(t)})}(Gn,t)),e.uuidv4=t=>e.check(function(e,t){return new e({type:'string',format:'uuid',check:'string_format',abort:!1,version:'v4',...M(t)})}(Gn,t)),e.uuidv6=t=>e.check(function(e,t){return new e({type:'string',format:'uuid',check:'string_format',abort:!1,version:'v6',...M(t)})}(Gn,t)),e.uuidv7=t=>e.check(function(e,t){return new e({type:'string',format:'uuid',check:'string_format',abort:!1,version:'v7',...M(t)})}(Gn,t)),e.nanoid=t=>e.check(function(e,t){return new e({type:'string',format:'nanoid',check:'string_format',abort:!1,...M(t)})}(Qn,t)),e.guid=t=>e.check(dn(Hn,t)),e.cuid=t=>e.check(function(e,t){return new e({type:'string',format:'cuid',check:'string_format',abort:!1,...M(t)})}(es,t)),e.cuid2=t=>e.check(function(e,t){return new e({type:'string',format:'cuid2',check:'string_format',abort:!1,...M(t)})}(ts,t)),e.ulid=t=>e.check(function(e,t){return new e({type:'string',format:'ulid',check:'string_format',abort:!1,...M(t)})}(ns,t)),e.base64=t=>e.check(function(e,t){return new e({type:'string',format:'base64',check:'string_format',abort:!1,...M(t)})}(cs,t)),e.base64url=t=>e.check(function(e,t){return new e({type:'string',format:'base64url',check:'string_format',abort:!1,...M(t)})}(us,t)),e.xid=t=>e.check(function(e,t){return new e({type:'string',format:'xid',check:'string_format',abort:!1,...M(t)})}(ss,t)),e.ksuid=t=>e.check(function(e,t){return new e({type:'string',format:'ksuid',check:'string_format',abort:!1,...M(t)})}(os,t)),e.ipv4=t=>e.check(function(e,t){return new e({type:'string',format:'ipv4',check:'string_format',abort:!1,...M(t)})}(is,t)),e.ipv6=t=>e.check(function(e,t){return new e({type:'string',format:'ipv6',check:'string_format',abort:!1,...M(t)})}(rs,t)),e.cidrv4=t=>e.check(function(e,t){return new e({type:'string',format:'cidrv4',check:'string_format',abort:!1,...M(t)})}(as,t)),e.cidrv6=t=>e.check(function(e,t){return new e({type:'string',format:'cidrv6',check:'string_format',abort:!1,...M(t)})}(ls,t)),e.e164=t=>e.check(function(e,t){return new e({type:'string',format:'e164',check:'string_format',abort:!1,...M(t)})}(ds,t)),e.datetime=t=>e.check(Sn(t)),e.date=t=>e.check(En(t)),e.time=t=>e.check(Cn(t)),e.duration=t=>e.check(On(t))});function qn(e){return function(e,t){return new e({type:'string',...M(t)})}(Zn,e)}const Wn=p('ZodStringFormat',(e,t)=>{nt.init(e,t),Kn.init(e,t)}),Yn=p('ZodEmail',(e,t)=>{it.init(e,t),Wn.init(e,t)}),Hn=p('ZodGUID',(e,t)=>{st.init(e,t),Wn.init(e,t)}),Gn=p('ZodUUID',(e,t)=>{ot.init(e,t),Wn.init(e,t)}),Jn=p('ZodURL',(e,t)=>{rt.init(e,t),Wn.init(e,t)}),Xn=p('ZodEmoji',(e,t)=>{at.init(e,t),Wn.init(e,t)}),Qn=p('ZodNanoID',(e,t)=>{lt.init(e,t),Wn.init(e,t)}),es=p('ZodCUID',(e,t)=>{ct.init(e,t),Wn.init(e,t)}),ts=p('ZodCUID2',(e,t)=>{ut.init(e,t),Wn.init(e,t)}),ns=p('ZodULID',(e,t)=>{dt.init(e,t),Wn.init(e,t)}),ss=p('ZodXID',(e,t)=>{ft.init(e,t),Wn.init(e,t)}),os=p('ZodKSUID',(e,t)=>{pt.init(e,t),Wn.init(e,t)}),is=p('ZodIPv4',(e,t)=>{yt.init(e,t),Wn.init(e,t)}),rs=p('ZodIPv6',(e,t)=>{bt.init(e,t),Wn.init(e,t)}),as=p('ZodCIDRv4',(e,t)=>{_t.init(e,t),Wn.init(e,t)}),ls=p('ZodCIDRv6',(e,t)=>{wt.init(e,t),Wn.init(e,t)}),cs=p('ZodBase64',(e,t)=>{St.init(e,t),Wn.init(e,t)}),us=p('ZodBase64URL',(e,t)=>{xt.init(e,t),Wn.init(e,t)}),ds=p('ZodE164',(e,t)=>{Et.init(e,t),Wn.init(e,t)}),fs=p('ZodJWT',(e,t)=>{Tt.init(e,t),Wn.init(e,t)}),ps=p('ZodNumber',(e,t)=>{Ct.init(e,t),Vn.init(e,t),e.gt=(t,n)=>e.check(hn(t,n)),e.gte=(t,n)=>e.check(mn(t,n)),e.min=(t,n)=>e.check(mn(t,n)),e.lt=(t,n)=>e.check(fn(t,n)),e.lte=(t,n)=>e.check(pn(t,n)),e.max=(t,n)=>e.check(pn(t,n)),e.int=t=>e.check(ms(t)),e.safe=t=>e.check(ms(t)),e.positive=t=>e.check(hn(0,t)),e.nonnegative=t=>e.check(mn(0,t)),e.negative=t=>e.check(fn(0,t)),e.nonpositive=t=>e.check(pn(0,t)),e.multipleOf=(t,n)=>e.check(gn(t,n)),e.step=(t,n)=>e.check(gn(t,n)),e.finite=()=>e;const n=e._zod.bag;e.minValue=Math.max(n.minimum??Number.NEGATIVE_INFINITY,n.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,e.maxValue=Math.min(n.maximum??Number.POSITIVE_INFINITY,n.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,e.isInt=(n.format??'').includes('int')||Number.isSafeInteger(n.multipleOf??.5),e.isFinite=!0,e.format=n.format??null});const hs=p('ZodNumberFormat',(e,t)=>{Nt.init(e,t),ps.init(e,t)});function ms(e){return function(e,t){return new e({type:'number',check:'number_format',abort:!1,format:'safeint',...M(t)})}(hs,e)}const gs=p('ZodBoolean',(e,t)=>{Ot.init(e,t),Vn.init(e,t)});function vs(e){return function(e,t){return new e({type:'boolean',...M(t)})}(gs,e)}const ys=p('ZodUnknown',(e,t)=>{At.init(e,t),Vn.init(e,t)});function bs(){return new ys({type:'unknown'})}const _s=p('ZodNever',(e,t)=>{It.init(e,t),Vn.init(e,t)});function ws(e){return function(e,t){return new e({type:'never',...M(t)})}(_s,e)}const ks=p('ZodArray',(e,t)=>{Pt.init(e,t),Vn.init(e,t),e.element=t.element,e.min=(t,n)=>e.check(yn(t,n)),e.nonempty=t=>e.check(yn(1,t)),e.max=(t,n)=>e.check(vn(t,n)),e.length=(t,n)=>e.check(bn(t,n)),e.unwrap=()=>e.element});function Ss(e,t){return function(e,t,n){return new e({type:'array',element:t,...M(n)})}(ks,e,t)}const xs=p('ZodObject',(e,t)=>{Mt.init(e,t),Vn.init(e,t),x(e,'shape',()=>t.shape),e.keyof=()=>Os(Object.keys(e._zod.def.shape)),e.catchall=t=>e.clone({...e._zod.def,catchall:t}),e.passthrough=()=>e.clone({...e._zod.def,catchall:bs()}),e.loose=()=>e.clone({...e._zod.def,catchall:bs()}),e.strict=()=>e.clone({...e._zod.def,catchall:ws()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=t=>function(e,t){if(!I(t))throw new Error('Invalid input to extend: expected a plain object');const n=e._zod.def.checks;if(n&&n.length>0)throw new Error('Object schemas containing refinements cannot be extended. Use `.safeExtend()` instead.');const s=T(e._zod.def,{get shape(){const n={...e._zod.def.shape,...t};return E(this,'shape',n),n},checks:[]});return L(e,s)}(e,t),e.safeExtend=t=>function(e,t){if(!I(t))throw new Error('Invalid input to safeExtend: expected a plain object');const n={...e._zod.def,get shape(){const n={...e._zod.def.shape,...t};return E(this,'shape',n),n},checks:e._zod.def.checks};return L(e,n)}(e,t),e.merge=t=>function(e,t){const n=T(e._zod.def,{get shape(){const n={...e._zod.def.shape,...t._zod.def.shape};return E(this,'shape',n),n},get catchall(){return t._zod.def.catchall},checks:[]});return L(e,n)}(e,t),e.pick=t=>function(e,t){const n=e._zod.def;return L(e,T(e._zod.def,{get shape(){const e={};for(const s in t){if(!(s in n.shape))throw new Error(`Unrecognized key: "${s}"`);t[s]&&(e[s]=n.shape[s])}return E(this,'shape',e),e},checks:[]}))}(e,t),e.omit=t=>function(e,t){const n=e._zod.def,s=T(e._zod.def,{get shape(){const s={...e._zod.def.shape};for(const e in t){if(!(e in n.shape))throw new Error(`Unrecognized key: "${e}"`);t[e]&&delete s[e]}return E(this,'shape',s),s},checks:[]});return L(e,s)}(e,t),e.partial=(...t)=>function(e,t,n){const s=T(t._zod.def,{get shape(){const s=t._zod.def.shape,o={...s};if(n)for(const t in n){if(!(t in s))throw new Error(`Unrecognized key: "${t}"`);n[t]&&(o[t]=e?new e({type:'optional',innerType:s[t]}):s[t])}else for(const t in s)o[t]=e?new e({type:'optional',innerType:s[t]}):s[t];return E(this,'shape',o),o},checks:[]});return L(t,s)}(Is,e,t[0]),e.required=(...t)=>function(e,t,n){const s=T(t._zod.def,{get shape(){const s=t._zod.def.shape,o={...s};if(n)for(const t in n){if(!(t in o))throw new Error(`Unrecognized key: "${t}"`);n[t]&&(o[t]=new e({type:'nonoptional',innerType:s[t]}))}else for(const t in s)o[t]=new e({type:'nonoptional',innerType:s[t]});return E(this,'shape',o),o},checks:[]});return L(t,s)}(Ls,e,t[0])});function Es(e,t){const n={type:'object',shape:e??{},...M(t)};return new xs(n)}const Ts=p('ZodUnion',(e,t)=>{Rt.init(e,t),Vn.init(e,t),e.options=t.options});const Cs=p('ZodIntersection',(e,t)=>{Bt.init(e,t),Vn.init(e,t)});const Ns=p('ZodEnum',(e,t)=>{Kt.init(e,t),Vn.init(e,t),e.enum=t.entries,e.options=Object.values(t.entries);const n=new Set(Object.keys(t.entries));e.extract=(e,s)=>{const o={};for(const i of e){if(!n.has(i))throw new Error(`Key ${i} not found in enum`);o[i]=t.entries[i]}return new Ns({...t,checks:[],...M(s),entries:o})},e.exclude=(e,s)=>{const o={...t.entries};for(const t of e){if(!n.has(t))throw new Error(`Key ${t} not found in enum`);delete o[t]}return new Ns({...t,checks:[],...M(s),entries:o})}});function Os(e,t){const n=Array.isArray(e)?Object.fromEntries(e.map(e=>[e,e])):e;return new Ns({type:'enum',entries:n,...M(t)})}const As=p('ZodTransform',(e,t)=>{Zt.init(e,t),Vn.init(e,t),e._zod.parse=(n,s)=>{if('backward'===s.direction)throw new m(e.constructor.name);n.addIssue=s=>{if('string'==typeof s)n.issues.push(Z(s,n.value,t));else{const t=s;t.fatal&&(t.continue=!1),t.code??(t.code='custom'),t.input??(t.input=n.value),t.inst??(t.inst=e),n.issues.push(Z(t))}};const o=t.transform(n.value,n);return o instanceof Promise?o.then(e=>(n.value=e,n)):(n.value=o,n)}});const Is=p('ZodOptional',(e,t)=>{Wt.init(e,t),Vn.init(e,t),e.unwrap=()=>e._zod.def.innerType});function $s(e){return new Is({type:'optional',innerType:e})}const Ps=p('ZodNullable',(e,t)=>{Yt.init(e,t),Vn.init(e,t),e.unwrap=()=>e._zod.def.innerType});function Ds(e){return new Ps({type:'nullable',innerType:e})}const js=p('ZodDefault',(e,t)=>{Ht.init(e,t),Vn.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});const zs=p('ZodPrefault',(e,t)=>{Jt.init(e,t),Vn.init(e,t),e.unwrap=()=>e._zod.def.innerType});const Ls=p('ZodNonOptional',(e,t)=>{Xt.init(e,t),Vn.init(e,t),e.unwrap=()=>e._zod.def.innerType});const Ms=p('ZodCatch',(e,t)=>{en.init(e,t),Vn.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});const Fs=p('ZodPipe',(e,t)=>{tn.init(e,t),Vn.init(e,t),e.in=t.in,e.out=t.out});function Rs(e,t){return new Fs({type:'pipe',in:e,out:t})}const Bs=p('ZodReadonly',(e,t)=>{sn.init(e,t),Vn.init(e,t),e.unwrap=()=>e._zod.def.innerType});const Us=p('ZodCustom',(e,t)=>{rn.init(e,t),Vn.init(e,t)});const Vs=Es({id:qn(),enabled:vs(),name:qn(),description:qn(),order:function(e,t){return new e({type:'number',checks:[],...M(t)})}(ps,Ks),type:Os(['number','text']).default('number')});var Ks;const Zs=Es({time:qn().optional(),place:qn().optional(),weather:qn().optional(),newsType:qn().optional(),newsTitle:qn().optional(),newsContent:qn().optional(),notes:qn().optional()}),qs=Es({time:vs().default(!0),place:vs().default(!0),weather:vs().default(!0),news:vs().default(!0),notes:vs().default(!0)}),Ws=Es({button_selected:vs().default(!1),panel_enabled:vs().default(!1),panel_position:Os(['left','right']).default('right'),panel_collapsed:vs().default(!1),fields:Ss(Vs).default([{id:f(),enabled:!0,name:'',description:'<char><user>, 0-100%, 0.5',order:0,type:'number'},{id:f(),enabled:!0,name:'',description:'<char>\'\', 100',order:1,type:'text'}]),language:Os(['zh-TW','zh-CN','en']).default('zh-TW'),progress_color_low:qn().default('#d8b4a0'),progress_color_high:qn().default('#a0b4d8'),debug_mode:vs().default(!1),custom_prompt:Zs.optional(),fixed_fields_enabled:qs.default({time:!0,place:!0,weather:!0,news:!0,notes:!0}),custom_css:qn().default('')}).prefault({}),Ys='status_tracking';function Hs(e,t){const n=function(e,t){const n=e.safeParse(t);if(!n.success)throw Error(function(e){const t=[],n=[...e.issues].sort((e,t)=>(e.path??[]).length-(t.path??[]).length);for(const s of n)t.push(` ${s.message}`),s.path?.length&&t.push(`   at ${H(s.path)}`);return t.join('\n')}(n.error));return n.data}(e,t);return _.assign(t,n)}const Gs={time:',  yyyyMMddHHmm',place:',  123',weather:',  ',newsType:', , ',newsTitle:', , , ',newsContent:',, 100',notes:'<char>, , 30, '},Js={time:',  yyyyMMddHHmm',place:',  123',weather:',  ',newsType:', , ',newsTitle:', , , ',newsContent:',, 100',notes:'<char>, , 30, '},Xs={time:'Current time, format: yyyy-MM-dd, Weekday, HH:mm',place:'Current story location, format: Location Layer 1 . Location Layer 2 . Location Layer 3',weather:'Current weather or environment temperature, format: Elegant description of light . Temperature . Weather',newsType:'Current event type label in society, e.g. [Forum Hot Post] [Science News] [Social Topic] etc., must be wrapped in []',newsTitle:'Must be related to the plot or characters. Bring humorous and funny vibes, must be different type from previous round, each round must have different type, use your imagination',newsContent:'The content of this event, if it\'s news then broadcast in news tone, if it\'s forum then use netizen internet speech tone, and so on. Within 100 words',notes:'<char>\'s current notes or to-do list on phone, presented in bullet points, each item within 30 words, as if writing for himself/herself'};function Qs(e,t='zh-TW',n={time:!0,place:!0,weather:!0,news:!0,notes:!0},s){const o=function(e,t,n){const s='en'===e?Xs:'zh-CN'===e?Js:Gs,o=n||s,i='en'===e?'Status Bar:\nAfter all text, you must generate the following code block status bar:\n**Must be different from the previous round and output in English**':'zh-CN'===e?':\n  ():\n**, **':':\n  ():\n**, **',r=[];return t.time&&r.push(`time: \${${o.time||s.time}}`),t.place&&r.push(`place: \${${o.place||s.place}}`),t.weather&&r.push(`weather: \${${o.weather||s.weather}}`),t.news&&r.push(`news:\n  type: \${${o.newsType||s.newsType}}\n  title: \${${o.newsTitle||s.newsTitle}}\n  content: \${${o.newsContent||s.newsContent}}`),t.notes&&r.push(`notes: \${${o.notes||s.notes}}`),`${i}\n\`\`\`myst\n${r.join('\n')}`}(t,n,s),i=e.filter(e=>e.enabled).map(e=>e.description&&e.description.trim()?`${e.name}: \${${e.description}}`:`${e.name}: \${${e.name}}`).join('\n');return i?`${o}\n${i}\n\`\`\``:`${o}\n\`\`\``}let eo,to=[],no='zh-TW',so={time:!0,place:!0,weather:!0,news:!0,notes:!0},oo=!1;function io(e,t='zh-TW',n={time:!0,place:!0,weather:!0,news:!0,notes:!0},s){to=e,no=t,so=n,eo=s,oo=!0,hu.log('[promptGenerator]  Prompt ')}function ro(){if(!oo)return void n('status-tracking-prompt','',s.IN_CHAT,0,!1);const e=Qs(to,no,so,eo);hu.log('[promptGenerator]  Prompt '),n('status-tracking-prompt',e,s.IN_CHAT,0,!1,o.SYSTEM)}
/**
* @vue/shared v3.5.25
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/
function ao(e){const t=Object.create(null);for(const n of e.split(','))t[n]=1;return e=>e in t}const lo={},co=[],uo=()=>{},fo=()=>!1,po=e=>111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),ho=e=>e.startsWith('onUpdate:'),mo=Object.assign,go=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},vo=Object.prototype.hasOwnProperty,yo=(e,t)=>vo.call(e,t),bo=Array.isArray,_o=e=>'[object Map]'===Oo(e),wo=e=>'[object Set]'===Oo(e),ko=e=>'[object Date]'===Oo(e),So=e=>'function'==typeof e,xo=e=>'string'==typeof e,Eo=e=>'symbol'==typeof e,To=e=>null!==e&&'object'==typeof e,Co=e=>(To(e)||So(e))&&So(e.then)&&So(e.catch),No=Object.prototype.toString,Oo=e=>No.call(e),Ao=e=>'[object Object]'===Oo(e),Io=e=>xo(e)&&'NaN'!==e&&'-'!==e[0]&&''+parseInt(e,10)===e,$o=ao(',key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted'),Po=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},Do=/-\w/g,jo=Po(e=>e.replace(Do,e=>e.slice(1).toUpperCase())),zo=/\B([A-Z])/g,Lo=Po(e=>e.replace(zo,'-$1').toLowerCase()),Mo=Po(e=>e.charAt(0).toUpperCase()+e.slice(1)),Fo=Po(e=>e?`on${Mo(e)}`:''),Ro=(e,t)=>!Object.is(e,t),Bo=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},Uo=(e,t,n,s=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:s,value:n})},Vo=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let Ko;const Zo=()=>Ko||(Ko='undefined'!=typeof globalThis?globalThis:'undefined'!=typeof self?self:'undefined'!=typeof window?window:'undefined'!=typeof global?global:{});function qo(e){if(bo(e)){const t={};for(let n=0;n<e.length;n++){const s=e[n],o=xo(s)?Go(s):qo(s);if(o)for(const e in o)t[e]=o[e]}return t}if(xo(e)||To(e))return e}const Wo=/;(?![^(]*\))/g,Yo=/:([^]+)/,Ho=/\/\*[^]*?\*\//g;function Go(e){const t={};return e.replace(Ho,'').split(Wo).forEach(e=>{if(e){const n=e.split(Yo);n.length>1&&(t[n[0].trim()]=n[1].trim())}}),t}function Jo(e){let t='';if(xo(e))t=e;else if(bo(e))for(let n=0;n<e.length;n++){const s=Jo(e[n]);s&&(t+=s+' ')}else if(To(e))for(const n in e)e[n]&&(t+=n+' ');return t.trim()}const Xo=ao('itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly');function Qo(e){return!!e||''===e}function ei(e,t){if(e===t)return!0;let n=ko(e),s=ko(t);if(n||s)return!(!n||!s)&&e.getTime()===t.getTime();if(n=Eo(e),s=Eo(t),n||s)return e===t;if(n=bo(e),s=bo(t),n||s)return!(!n||!s)&&function(e,t){if(e.length!==t.length)return!1;let n=!0;for(let s=0;n&&s<e.length;s++)n=ei(e[s],t[s]);return n}(e,t);if(n=To(e),s=To(t),n||s){if(!n||!s)return!1;if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e){const s=e.hasOwnProperty(n),o=t.hasOwnProperty(n);if(s&&!o||!s&&o||!ei(e[n],t[n]))return!1}}return String(e)===String(t)}function ti(e,t){return e.findIndex(e=>ei(e,t))}const ni=e=>!(!e||!0!==e.__v_isRef),si=e=>xo(e)?e:null==e?'':bo(e)||To(e)&&(e.toString===No||!So(e.toString))?ni(e)?si(e.value):JSON.stringify(e,oi,2):String(e),oi=(e,t)=>ni(t)?oi(e,t.value):_o(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((e,[t,n],s)=>(e[ii(t,s)+' =>']=n,e),{})}:wo(t)?{[`Set(${t.size})`]:[...t.values()].map(e=>ii(e))}:Eo(t)?ii(t):!To(t)||bo(t)||Ao(t)?t:String(t),ii=(e,t='')=>{var n;return Eo(e)?`Symbol(${null!=(n=e.description)?n:t})`:e};
/**
* @vue/reactivity v3.5.25
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/
let ri,ai;class li{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=ri,!e&&ri&&(this.index=(ri.scopes||(ri.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){let e,t;if(this._isPaused=!0,this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].pause();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){let e,t;if(this._isPaused=!1,this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].resume();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].resume()}}run(e){if(this._active){const t=ri;try{return ri=this,e()}finally{ri=t}}}on(){1===++this._on&&(this.prevScope=ri,ri=this)}off(){this._on>0&&0===--this._on&&(ri=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){let t,n;for(this._active=!1,t=0,n=this.effects.length;t<n;t++)this.effects[t].stop();for(this.effects.length=0,t=0,n=this.cleanups.length;t<n;t++)this.cleanups[t]();if(this.cleanups.length=0,this.scopes){for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const e=this.parent.scopes.pop();e&&e!==this&&(this.parent.scopes[this.index]=e,e.index=this.index)}this.parent=void 0}}}function ci(e){return new li(e)}function ui(){return ri}const di=new WeakSet;class fi{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,ri&&ri.active&&ri.effects.push(this)}pause(){this.flags|=64}resume(){64&this.flags&&(this.flags&=-65,di.has(this)&&(di.delete(this),this.trigger()))}notify(){2&this.flags&&!(32&this.flags)||8&this.flags||gi(this)}run(){if(!(1&this.flags))return this.fn();this.flags|=2,Oi(this),bi(this);const e=ai,t=Ei;ai=this,Ei=!0;try{return this.fn()}finally{_i(this),ai=e,Ei=t,this.flags&=-3}}stop(){if(1&this.flags){for(let e=this.deps;e;e=e.nextDep)Si(e);this.deps=this.depsTail=void 0,Oi(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){64&this.flags?di.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){wi(this)&&this.run()}get dirty(){return wi(this)}}let pi,hi,mi=0;function gi(e,t=!1){if(e.flags|=8,t)return e.next=hi,void(hi=e);e.next=pi,pi=e}function vi(){mi++}function yi(){if(--mi>0)return;if(hi){let e=hi;for(hi=void 0;e;){const t=e.next;e.next=void 0,e.flags&=-9,e=t}}let e;for(;pi;){let n=pi;for(pi=void 0;n;){const s=n.next;if(n.next=void 0,n.flags&=-9,1&n.flags)try{n.trigger()}catch(t){e||(e=t)}n=s}}if(e)throw e}function bi(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function _i(e){let t,n=e.depsTail,s=n;for(;s;){const e=s.prevDep;-1===s.version?(s===n&&(n=e),Si(s),xi(s)):t=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=e}e.deps=t,e.depsTail=n}function wi(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(ki(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function ki(e){if(4&e.flags&&!(16&e.flags))return;if(e.flags&=-17,e.globalVersion===Ai)return;if(e.globalVersion=Ai,!e.isSSR&&128&e.flags&&(!e.deps&&!e._dirty||!wi(e)))return;e.flags|=2;const t=e.dep,n=ai,s=Ei;ai=e,Ei=!0;try{bi(e);const n=e.fn(e._value);(0===t.version||Ro(n,e._value))&&(e.flags|=128,e._value=n,t.version++)}catch(o){throw t.version++,o}finally{ai=n,Ei=s,_i(e),e.flags&=-3}}function Si(e,t=!1){const{dep:n,prevSub:s,nextSub:o}=e;if(s&&(s.nextSub=o,e.prevSub=void 0),o&&(o.prevSub=s,e.nextSub=void 0),n.subs===e&&(n.subs=s,!s&&n.computed)){n.computed.flags&=-5;for(let e=n.computed.deps;e;e=e.nextDep)Si(e,!0)}t||--n.sc||!n.map||n.map.delete(n.key)}function xi(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let Ei=!0;const Ti=[];function Ci(){Ti.push(Ei),Ei=!1}function Ni(){const e=Ti.pop();Ei=void 0===e||e}function Oi(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const e=ai;ai=void 0;try{t()}finally{ai=e}}}let Ai=0;class Ii{constructor(e,t){this.sub=e,this.dep=t,this.version=t.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class $i{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!ai||!Ei||ai===this.computed)return;let t=this.activeLink;if(void 0===t||t.sub!==ai)t=this.activeLink=new Ii(ai,this),ai.deps?(t.prevDep=ai.depsTail,ai.depsTail.nextDep=t,ai.depsTail=t):ai.deps=ai.depsTail=t,Pi(t);else if(-1===t.version&&(t.version=this.version,t.nextDep)){const e=t.nextDep;e.prevDep=t.prevDep,t.prevDep&&(t.prevDep.nextDep=e),t.prevDep=ai.depsTail,t.nextDep=void 0,ai.depsTail.nextDep=t,ai.depsTail=t,ai.deps===t&&(ai.deps=e)}return t}trigger(e){this.version++,Ai++,this.notify(e)}notify(e){vi();try{0;for(let e=this.subs;e;e=e.prevSub)e.sub.notify()&&e.sub.dep.notify()}finally{yi()}}}function Pi(e){if(e.dep.sc++,4&e.sub.flags){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let e=t.deps;e;e=e.nextDep)Pi(e)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const Di=new WeakMap,ji=Symbol(''),zi=Symbol(''),Li=Symbol('');function Mi(e,t,n){if(Ei&&ai){let t=Di.get(e);t||Di.set(e,t=new Map);let s=t.get(n);s||(t.set(n,s=new $i),s.map=t,s.key=n),s.track()}}function Fi(e,t,n,s,o,i){const r=Di.get(e);if(!r)return void Ai++;const a=e=>{e&&e.trigger()};if(vi(),'clear'===t)r.forEach(a);else{const o=bo(e),i=o&&Io(n);if(o&&'length'===n){const e=Number(s);r.forEach((t,n)=>{('length'===n||n===Li||!Eo(n)&&n>=e)&&a(t)})}else switch((void 0!==n||r.has(void 0))&&a(r.get(n)),i&&a(r.get(Li)),t){case'add':o?i&&a(r.get('length')):(a(r.get(ji)),_o(e)&&a(r.get(zi)));break;case'delete':o||(a(r.get(ji)),_o(e)&&a(r.get(zi)));break;case'set':_o(e)&&a(r.get(ji))}}yi()}function Ri(e){const t=Er(e);return t===e?t:(Mi(t,0,Li),Sr(e)?t:t.map(Cr))}function Bi(e){return Mi(e=Er(e),0,Li),e}function Ui(e,t){return kr(e)?wr(e)?Nr(Cr(t)):Nr(t):Cr(t)}const Vi={__proto__:null,[Symbol.iterator](){return Ki(this,Symbol.iterator,e=>Ui(this,e))},concat(...e){return Ri(this).concat(...e.map(e=>bo(e)?Ri(e):e))},entries(){return Ki(this,'entries',e=>(e[1]=Ui(this,e[1]),e))},every(e,t){return qi(this,'every',e,t,void 0,arguments)},filter(e,t){return qi(this,'filter',e,t,e=>e.map(e=>Ui(this,e)),arguments)},find(e,t){return qi(this,'find',e,t,e=>Ui(this,e),arguments)},findIndex(e,t){return qi(this,'findIndex',e,t,void 0,arguments)},findLast(e,t){return qi(this,'findLast',e,t,e=>Ui(this,e),arguments)},findLastIndex(e,t){return qi(this,'findLastIndex',e,t,void 0,arguments)},forEach(e,t){return qi(this,'forEach',e,t,void 0,arguments)},includes(...e){return Yi(this,'includes',e)},indexOf(...e){return Yi(this,'indexOf',e)},join(e){return Ri(this).join(e)},lastIndexOf(...e){return Yi(this,'lastIndexOf',e)},map(e,t){return qi(this,'map',e,t,void 0,arguments)},pop(){return Hi(this,'pop')},push(...e){return Hi(this,'push',e)},reduce(e,...t){return Wi(this,'reduce',e,t)},reduceRight(e,...t){return Wi(this,'reduceRight',e,t)},shift(){return Hi(this,'shift')},some(e,t){return qi(this,'some',e,t,void 0,arguments)},splice(...e){return Hi(this,'splice',e)},toReversed(){return Ri(this).toReversed()},toSorted(e){return Ri(this).toSorted(e)},toSpliced(...e){return Ri(this).toSpliced(...e)},unshift(...e){return Hi(this,'unshift',e)},values(){return Ki(this,'values',e=>Ui(this,e))}};function Ki(e,t,n){const s=Bi(e),o=s[t]();return s===e||Sr(e)||(o._next=o.next,o.next=()=>{const e=o._next();return e.done||(e.value=n(e.value)),e}),o}const Zi=Array.prototype;function qi(e,t,n,s,o,i){const r=Bi(e),a=r!==e&&!Sr(e),l=r[t];if(l!==Zi[t]){const t=l.apply(e,i);return a?Cr(t):t}let c=n;r!==e&&(a?c=function(t,s){return n.call(this,Ui(e,t),s,e)}:n.length>2&&(c=function(t,s){return n.call(this,t,s,e)}));const u=l.call(r,c,s);return a&&o?o(u):u}function Wi(e,t,n,s){const o=Bi(e);let i=n;return o!==e&&(Sr(e)?n.length>3&&(i=function(t,s,o){return n.call(this,t,s,o,e)}):i=function(t,s,o){return n.call(this,t,Ui(e,s),o,e)}),o[t](i,...s)}function Yi(e,t,n){const s=Er(e);Mi(s,0,Li);const o=s[t](...n);return-1!==o&&!1!==o||!xr(n[0])?o:(n[0]=Er(n[0]),s[t](...n))}function Hi(e,t,n=[]){Ci(),vi();const s=Er(e)[t].apply(e,n);return yi(),Ni(),s}const Gi=ao('__proto__,__v_isRef,__isVue'),Ji=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>'arguments'!==e&&'caller'!==e).map(e=>Symbol[e]).filter(Eo));function Xi(e){Eo(e)||(e=String(e));const t=Er(this);return Mi(t,0,e),t.hasOwnProperty(e)}class Qi{constructor(e=!1,t=!1){this._isReadonly=e,this._isShallow=t}get(e,t,n){if('__v_skip'===t)return e.__v_skip;const s=this._isReadonly,o=this._isShallow;if('__v_isReactive'===t)return!s;if('__v_isReadonly'===t)return s;if('__v_isShallow'===t)return o;if('__v_raw'===t)return n===(s?o?gr:mr:o?hr:pr).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(n)?e:void 0;const i=bo(e);if(!s){let e;if(i&&(e=Vi[t]))return e;if('hasOwnProperty'===t)return Xi}const r=Reflect.get(e,t,Or(e)?e:n);if(Eo(t)?Ji.has(t):Gi(t))return r;if(s||Mi(e,0,t),o)return r;if(Or(r)){const e=i&&Io(t)?r:r.value;return s&&To(e)?br(e):e}return To(r)?s?br(r):yr(r):r}}class er extends Qi{constructor(e=!1){super(!1,e)}set(e,t,n,s){let o=e[t];const i=bo(e)&&Io(t);if(!this._isShallow){const e=kr(o);if(Sr(n)||kr(n)||(o=Er(o),n=Er(n)),!i&&Or(o)&&!Or(n))return e||(o.value=n),!0}const r=i?Number(t)<e.length:yo(e,t),a=Reflect.set(e,t,n,Or(e)?e:s);return e===Er(s)&&(r?Ro(n,o)&&Fi(e,'set',t,n):Fi(e,'add',t,n)),a}deleteProperty(e,t){const n=yo(e,t);e[t];const s=Reflect.deleteProperty(e,t);return s&&n&&Fi(e,'delete',t,void 0),s}has(e,t){const n=Reflect.has(e,t);return Eo(t)&&Ji.has(t)||Mi(e,0,t),n}ownKeys(e){return Mi(e,0,bo(e)?'length':ji),Reflect.ownKeys(e)}}class tr extends Qi{constructor(e=!1){super(!0,e)}set(e,t){return!0}deleteProperty(e,t){return!0}}const nr=new er,sr=new tr,or=new er(!0),ir=e=>e,rr=e=>Reflect.getPrototypeOf(e);function ar(e){return function(...t){return'delete'!==e&&('clear'===e?void 0:this)}}function lr(e,t){const n={get(n){const s=this.__v_raw,o=Er(s),i=Er(n);e||(Ro(n,i)&&Mi(o,0,n),Mi(o,0,i));const{has:r}=rr(o),a=t?ir:e?Nr:Cr;return r.call(o,n)?a(s.get(n)):r.call(o,i)?a(s.get(i)):void(s!==o&&s.get(n))},get size(){const t=this.__v_raw;return!e&&Mi(Er(t),0,ji),t.size},has(t){const n=this.__v_raw,s=Er(n),o=Er(t);return e||(Ro(t,o)&&Mi(s,0,t),Mi(s,0,o)),t===o?n.has(t):n.has(t)||n.has(o)},forEach(n,s){const o=this,i=o.__v_raw,r=Er(i),a=t?ir:e?Nr:Cr;return!e&&Mi(r,0,ji),i.forEach((e,t)=>n.call(s,a(e),a(t),o))}};mo(n,e?{add:ar('add'),set:ar('set'),delete:ar('delete'),clear:ar('clear')}:{add(e){t||Sr(e)||kr(e)||(e=Er(e));const n=Er(this);return rr(n).has.call(n,e)||(n.add(e),Fi(n,'add',e,e)),this},set(e,n){t||Sr(n)||kr(n)||(n=Er(n));const s=Er(this),{has:o,get:i}=rr(s);let r=o.call(s,e);r||(e=Er(e),r=o.call(s,e));const a=i.call(s,e);return s.set(e,n),r?Ro(n,a)&&Fi(s,'set',e,n):Fi(s,'add',e,n),this},delete(e){const t=Er(this),{has:n,get:s}=rr(t);let o=n.call(t,e);o||(e=Er(e),o=n.call(t,e)),s&&s.call(t,e);const i=t.delete(e);return o&&Fi(t,'delete',e,void 0),i},clear(){const e=Er(this),t=0!==e.size,n=e.clear();return t&&Fi(e,'clear',void 0,void 0),n}});return['keys','values','entries',Symbol.iterator].forEach(s=>{n[s]=function(e,t,n){return function(...s){const o=this.__v_raw,i=Er(o),r=_o(i),a='entries'===e||e===Symbol.iterator&&r,l='keys'===e&&r,c=o[e](...s),u=n?ir:t?Nr:Cr;return!t&&Mi(i,0,l?zi:ji),{next(){const{value:e,done:t}=c.next();return t?{value:e,done:t}:{value:a?[u(e[0]),u(e[1])]:u(e),done:t}},[Symbol.iterator](){return this}}}}(s,e,t)}),n}function cr(e,t){const n=lr(e,t);return(t,s,o)=>'__v_isReactive'===s?!e:'__v_isReadonly'===s?e:'__v_raw'===s?t:Reflect.get(yo(n,s)&&s in t?n:t,s,o)}const ur={get:cr(!1,!1)},dr={get:cr(!1,!0)},fr={get:cr(!0,!1)},pr=new WeakMap,hr=new WeakMap,mr=new WeakMap,gr=new WeakMap;function vr(e){return e.__v_skip||!Object.isExtensible(e)?0:function(e){switch(e){case'Object':case'Array':return 1;case'Map':case'Set':case'WeakMap':case'WeakSet':return 2;default:return 0}}((e=>Oo(e).slice(8,-1))(e))}function yr(e){return kr(e)?e:_r(e,!1,nr,ur,pr)}function br(e){return _r(e,!0,sr,fr,mr)}function _r(e,t,n,s,o){if(!To(e))return e;if(e.__v_raw&&(!t||!e.__v_isReactive))return e;const i=vr(e);if(0===i)return e;const r=o.get(e);if(r)return r;const a=new Proxy(e,2===i?s:n);return o.set(e,a),a}function wr(e){return kr(e)?wr(e.__v_raw):!(!e||!e.__v_isReactive)}function kr(e){return!(!e||!e.__v_isReadonly)}function Sr(e){return!(!e||!e.__v_isShallow)}function xr(e){return!!e&&!!e.__v_raw}function Er(e){const t=e&&e.__v_raw;return t?Er(t):e}function Tr(e){return!yo(e,'__v_skip')&&Object.isExtensible(e)&&Uo(e,'__v_skip',!0),e}const Cr=e=>To(e)?yr(e):e,Nr=e=>To(e)?br(e):e;function Or(e){return!!e&&!0===e.__v_isRef}function Ar(e){return function(e,t){if(Or(e))return e;return new Ir(e,t)}(e,!1)}class Ir{constructor(e,t){this.dep=new $i,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=t?e:Er(e),this._value=t?e:Cr(e),this.__v_isShallow=t}get value(){return this.dep.track(),this._value}set value(e){const t=this._rawValue,n=this.__v_isShallow||Sr(e)||kr(e);e=n?e:Er(e),Ro(e,t)&&(this._rawValue=e,this._value=n?e:Cr(e),this.dep.trigger())}}function $r(e){return Or(e)?e.value:e}const Pr={get:(e,t,n)=>'__v_raw'===t?e:$r(Reflect.get(e,t,n)),set:(e,t,n,s)=>{const o=e[t];return Or(o)&&!Or(n)?(o.value=n,!0):Reflect.set(e,t,n,s)}};function Dr(e){return wr(e)?e:new Proxy(e,Pr)}class jr{constructor(e,t,n){this._object=e,this._key=t,this._defaultValue=n,this.__v_isRef=!0,this._value=void 0,this._raw=Er(e);let s=!0,o=e;if(!bo(e)||!Io(String(t)))do{s=!xr(o)||Sr(o)}while(s&&(o=o.__v_raw));this._shallow=s}get value(){let e=this._object[this._key];return this._shallow&&(e=$r(e)),this._value=void 0===e?this._defaultValue:e}set value(e){if(this._shallow&&Or(this._raw[this._key])){const t=this._object[this._key];if(Or(t))return void(t.value=e)}this._object[this._key]=e}get dep(){return function(e,t){const n=Di.get(e);return n&&n.get(t)}(this._raw,this._key)}}class zr{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function Lr(e,t,n){return Or(e)?e:So(e)?new zr(e):To(e)&&arguments.length>1?Mr(e,t,n):Ar(e)}function Mr(e,t,n){return new jr(e,t,n)}class Fr{constructor(e,t,n){this.fn=e,this.setter=t,this._value=void 0,this.dep=new $i(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Ai-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!t,this.isSSR=n}notify(){if(this.flags|=16,!(8&this.flags)&&ai!==this)return gi(this,!0),!0}get value(){const e=this.dep.track();return ki(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}const Rr={},Br=new WeakMap;let Ur;function Vr(e,t,n=lo){const{immediate:s,deep:o,once:i,scheduler:r,augmentJob:a,call:l}=n,c=e=>o?e:Sr(e)||!1===o||0===o?Kr(e,1):Kr(e);let u,d,f,p,h=!1,m=!1;if(Or(e)?(d=()=>e.value,h=Sr(e)):wr(e)?(d=()=>c(e),h=!0):bo(e)?(m=!0,h=e.some(e=>wr(e)||Sr(e)),d=()=>e.map(e=>Or(e)?e.value:wr(e)?c(e):So(e)?l?l(e,2):e():void 0)):d=So(e)?t?l?()=>l(e,2):e:()=>{if(f){Ci();try{f()}finally{Ni()}}const t=Ur;Ur=u;try{return l?l(e,3,[p]):e(p)}finally{Ur=t}}:uo,t&&o){const e=d,t=!0===o?1/0:o;d=()=>Kr(e(),t)}const g=ui(),v=()=>{u.stop(),g&&g.active&&go(g.effects,u)};if(i&&t){const e=t;t=(...t)=>{e(...t),v()}}let y=m?new Array(e.length).fill(Rr):Rr;const b=e=>{if(1&u.flags&&(u.dirty||e))if(t){const e=u.run();if(o||h||(m?e.some((e,t)=>Ro(e,y[t])):Ro(e,y))){f&&f();const n=Ur;Ur=u;try{const n=[e,y===Rr?void 0:m&&y[0]===Rr?[]:y,p];y=e,l?l(t,3,n):t(...n)}finally{Ur=n}}}else u.run()};return a&&a(b),u=new fi(d),u.scheduler=r?()=>r(b,!1):b,p=e=>function(e,t=!1,n=Ur){if(n){let t=Br.get(n);t||Br.set(n,t=[]),t.push(e)}}(e,!1,u),f=u.onStop=()=>{const e=Br.get(u);if(e){if(l)l(e,4);else for(const t of e)t();Br.delete(u)}},t?s?b(!0):y=u.run():r?r(b.bind(null,!0),!0):u.run(),v.pause=u.pause.bind(u),v.resume=u.resume.bind(u),v.stop=v,v}function Kr(e,t=1/0,n){if(t<=0||!To(e)||e.__v_skip)return e;if(((n=n||new Map).get(e)||0)>=t)return e;if(n.set(e,t),t--,Or(e))Kr(e.value,t,n);else if(bo(e))for(let s=0;s<e.length;s++)Kr(e[s],t,n);else if(wo(e)||_o(e))e.forEach(e=>{Kr(e,t,n)});else if(Ao(e)){for(const s in e)Kr(e[s],t,n);for(const s of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,s)&&Kr(e[s],t,n)}return e}
/**
* @vue/runtime-core v3.5.25
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Zr(e,t,n,s){try{return s?e(...s):e()}catch(o){Wr(o,t,n)}}function qr(e,t,n,s){if(So(e)){const o=Zr(e,t,n,s);return o&&Co(o)&&o.catch(e=>{Wr(e,t,n)}),o}if(bo(e)){const o=[];for(let i=0;i<e.length;i++)o.push(qr(e[i],t,n,s));return o}}function Wr(e,t,n,s=!0){t&&t.vnode;const{errorHandler:o,throwUnhandledErrorInProduction:i}=t&&t.appContext.config||lo;if(t){let s=t.parent;const i=t.proxy,r=`https://vuejs.org/error-reference/#runtime-${n}`;for(;s;){const t=s.ec;if(t)for(let n=0;n<t.length;n++)if(!1===t[n](e,i,r))return;s=s.parent}if(o)return Ci(),Zr(o,null,10,[e,i,r]),void Ni()}!function(e,t,n,s=!0,o=!1){if(o)throw e;console.error(e)}(e,0,0,s,i)}const Yr=[];let Hr=-1;const Gr=[];let Jr=null,Xr=0;const Qr=Promise.resolve();let ea=null;function ta(e){const t=ea||Qr;return e?t.then(this?e.bind(this):e):t}function na(e){if(!(1&e.flags)){const t=ra(e),n=Yr[Yr.length-1];!n||!(2&e.flags)&&t>=ra(n)?Yr.push(e):Yr.splice(function(e){let t=Hr+1,n=Yr.length;for(;t<n;){const s=t+n>>>1,o=Yr[s],i=ra(o);i<e||i===e&&2&o.flags?t=s+1:n=s}return t}(t),0,e),e.flags|=1,sa()}}function sa(){ea||(ea=Qr.then(aa))}function oa(e,t,n=Hr+1){for(;n<Yr.length;n++){const t=Yr[n];if(t&&2&t.flags){if(e&&t.id!==e.uid)continue;Yr.splice(n,1),n--,4&t.flags&&(t.flags&=-2),t(),4&t.flags||(t.flags&=-2)}}}function ia(e){if(Gr.length){const e=[...new Set(Gr)].sort((e,t)=>ra(e)-ra(t));if(Gr.length=0,Jr)return void Jr.push(...e);for(Jr=e,Xr=0;Xr<Jr.length;Xr++){const e=Jr[Xr];4&e.flags&&(e.flags&=-2),8&e.flags||e(),e.flags&=-2}Jr=null,Xr=0}}const ra=e=>null==e.id?2&e.flags?-1:1/0:e.id;function aa(e){try{for(Hr=0;Hr<Yr.length;Hr++){const e=Yr[Hr];!e||8&e.flags||(4&e.flags&&(e.flags&=-2),Zr(e,e.i,e.i?15:14),4&e.flags||(e.flags&=-2))}}finally{for(;Hr<Yr.length;Hr++){const e=Yr[Hr];e&&(e.flags&=-2)}Hr=-1,Yr.length=0,ia(),ea=null,(Yr.length||Gr.length)&&aa()}}let la=null,ca=null;function ua(e){const t=la;return la=e,ca=e&&e.type.__scopeId||null,t}function da(e,t){if(null===la)return e;const n=Gl(la),s=e.dirs||(e.dirs=[]);for(let o=0;o<t.length;o++){let[e,i,r,a=lo]=t[o];e&&(So(e)&&(e={mounted:e,updated:e}),e.deep&&Kr(i),s.push({dir:e,instance:n,value:i,oldValue:void 0,arg:r,modifiers:a}))}return e}function fa(e,t,n,s){const o=e.dirs,i=t&&t.dirs;for(let r=0;r<o.length;r++){const a=o[r];i&&(a.oldValue=i[r].value);let l=a.dir[s];l&&(Ci(),qr(l,n,8,[e.el,a,e,t]),Ni())}}const pa=Symbol('_vte'),ha=Symbol('_leaveCb');function ma(e,t){6&e.shapeFlag&&e.component?(e.transition=t,ma(e.component.subTree,t)):128&e.shapeFlag?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function ga(e,t){return So(e)?(()=>mo({name:e.name},t,{setup:e}))():e}const va=new WeakMap;function ya(e,t,n,s,o=!1){if(bo(e))return void e.forEach((e,i)=>ya(e,t&&(bo(t)?t[i]:t),n,s,o));if(_a(s)&&!o)return void(512&s.shapeFlag&&s.type.__asyncResolved&&s.component.subTree.component&&ya(e,t,n,s.component.subTree));const i=4&s.shapeFlag?Gl(s.component):s.el,r=o?null:i,{i:a,r:l}=e,c=t&&t.r,u=a.refs===lo?a.refs={}:a.refs,d=a.setupState,f=Er(d),p=d===lo?fo:e=>yo(f,e);if(null!=c&&c!==l)if(ba(t),xo(c))u[c]=null,p(c)&&(d[c]=null);else if(Or(c)){c.value=null;const e=t;e.k&&(u[e.k]=null)}if(So(l))Zr(l,a,12,[r,u]);else{const t=xo(l),s=Or(l);if(t||s){const a=()=>{if(e.f){const n=t?p(l)?d[l]:u[l]:l.value;if(o)bo(n)&&go(n,i);else if(bo(n))n.includes(i)||n.push(i);else if(t)u[l]=[i],p(l)&&(d[l]=u[l]);else{const t=[i];l.value=t,e.k&&(u[e.k]=t)}}else t?(u[l]=r,p(l)&&(d[l]=r)):s&&(l.value=r,e.k&&(u[e.k]=r))};if(r){const t=()=>{a(),va.delete(e)};t.id=-1,va.set(e,t),sl(t,n)}else ba(e),a()}}}function ba(e){const t=va.get(e);t&&(t.flags|=8,va.delete(e))}Zo().requestIdleCallback,Zo().cancelIdleCallback;const _a=e=>!!e.type.__asyncLoader;const wa=(ka='m',(e,t=Fl)=>{ql&&'sp'!==ka||function(e,t,n=Fl,s=!1){if(n){const o=n[e]||(n[e]=[]),i=t.__weh||(t.__weh=(...s)=>{Ci();const o=Vl(n),i=qr(t,n,e,s);return o(),Ni(),i});s?o.unshift(i):o.push(i)}}(ka,(...t)=>e(...t),t)});var ka;const Sa=Symbol.for('v-ndc');function xa(e,t,n,s){let o;const i=n,r=bo(e);if(r||xo(e)){let n=!1,s=!1;r&&wr(e)&&(n=!Sr(e),s=kr(e),e=Bi(e)),o=new Array(e.length);for(let r=0,a=e.length;r<a;r++)o[r]=t(n?s?Nr(Cr(e[r])):Cr(e[r]):e[r],r,void 0,i)}else if('number'==typeof e){o=new Array(e);for(let n=0;n<e;n++)o[n]=t(n+1,n,void 0,i)}else if(To(e))if(e[Symbol.iterator])o=Array.from(e,(e,n)=>t(e,n,void 0,i));else{const n=Object.keys(e);o=new Array(n.length);for(let s=0,r=n.length;s<r;s++){const r=n[s];o[s]=t(e[r],r,s,i)}}else o=[];return o}const Ea=e=>e?Zl(e)?Gl(e):Ea(e.parent):null,Ta=mo(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Ea(e.parent),$root:e=>Ea(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>e.type,$forceUpdate:e=>e.f||(e.f=()=>{na(e.update)}),$nextTick:e=>e.n||(e.n=ta.bind(e.proxy)),$watch:e=>uo}),Ca=(e,t)=>e!==lo&&!e.__isScriptSetup&&yo(e,t),Na={get({_:e},t){if('__v_skip'===t)return!0;const{ctx:n,setupState:s,data:o,props:i,accessCache:r,type:a,appContext:l}=e;if('$'!==t[0]){const e=r[t];if(void 0!==e)switch(e){case 1:return s[t];case 2:return o[t];case 4:return n[t];case 3:return i[t]}else{if(Ca(s,t))return r[t]=1,s[t];if(yo(i,t))return r[t]=3,i[t];if(n!==lo&&yo(n,t))return r[t]=4,n[t];r[t]=0}}const c=Ta[t];let u,d;return c?('$attrs'===t&&Mi(e.attrs,0,''),c(e)):(u=a.__cssModules)&&(u=u[t])?u:n!==lo&&yo(n,t)?(r[t]=4,n[t]):(d=l.config.globalProperties,yo(d,t)?d[t]:void 0)},set({_:e},t,n){const{data:s,setupState:o,ctx:i}=e;return Ca(o,t)?(o[t]=n,!0):!yo(e.props,t)&&(('$'!==t[0]||!(t.slice(1)in e))&&(i[t]=n,!0))},has({_:{data:e,setupState:t,accessCache:n,ctx:s,appContext:o,props:i,type:r}},a){let l;return!!(n[a]||Ca(t,a)||yo(i,a)||yo(s,a)||yo(Ta,a)||yo(o.config.globalProperties,a)||(l=r.__cssModules)&&l[a])},defineProperty(e,t,n){return null!=n.get?e._.accessCache[t]=0:yo(n,'value')&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function Oa(){return{app:null,config:{isNativeTag:fo,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Aa=0;function Ia(e,t){return function(t,n=null){So(t)||(t=mo({},t)),null==n||To(n)||(n=null);const s=Oa(),o=new WeakSet,i=[];let r=!1;const a=s.app={_uid:Aa++,_component:t,_props:n,_container:null,_context:s,_instance:null,version:Ql,get config(){return s.config},set config(e){},use:(e,...t)=>(o.has(e)||(e&&So(e.install)?(o.add(e),e.install(a,...t)):So(e)&&(o.add(e),e(a,...t))),a),mixin:e=>a,component:(e,t)=>t?(s.components[e]=t,a):s.components[e],directive:(e,t)=>t?(s.directives[e]=t,a):s.directives[e],mount(o,i,l){if(!r){const i=a._ceVNode||Nl(t,n);return i.appContext=s,!0===l?l='svg':!1===l&&(l=void 0),e(i,o,l),r=!0,a._container=o,o.__vue_app__=a,Gl(i.component)}},onUnmount(e){i.push(e)},unmount(){r&&(qr(i,a._instance,16),e(null,a._container),delete a._container.__vue_app__)},provide:(e,t)=>(s.provides[e]=t,a),runWithContext(e){const t=$a;$a=a;try{return e()}finally{$a=t}}};return a}}let $a=null;function Pa(e,t,n=!1){const s=Rl();if(s||$a){let o=$a?$a._context.provides:s?null==s.parent||s.ce?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(o&&e in o)return o[e];if(arguments.length>1)return n&&So(t)?t.call(s&&s.proxy):t}}const Da=Symbol.for('v-scx');function ja(e,t,n){return function(e,t,n=lo){const{immediate:s,deep:o,flush:i,once:r}=n,a=mo({},n),l=t&&s||!t&&'post'!==i;let c;if(ql)if('sync'===i){const e=Pa(Da);c=e.__watcherHandles||(e.__watcherHandles=[])}else if(!l){const e=()=>{};return e.stop=uo,e.resume=uo,e.pause=uo,e}const u=Fl;a.call=(e,t,n)=>qr(e,u,t,n);let d=!1;'post'===i?a.scheduler=e=>{sl(e,u&&u.suspense)}:'sync'!==i&&(d=!0,a.scheduler=(e,t)=>{t?e():na(e)});a.augmentJob=e=>{t&&(e.flags|=4),d&&(e.flags|=2,u&&(e.id=u.uid,e.i=u))};const f=Vr(e,t,a);ql&&(c?c.push(f):l&&f());return f}(e,t,n)}function za(e,t,...n){if(e.isUnmounted)return;const s=e.vnode.props||lo;let o=n;const i=t.startsWith('update:'),r=i&&((e,t)=>'modelValue'===t||'model-value'===t?e.modelModifiers:e[`${t}Modifiers`]||e[`${jo(t)}Modifiers`]||e[`${Lo(t)}Modifiers`])(s,t.slice(7));let a;r&&(r.trim&&(o=n.map(e=>xo(e)?e.trim():e)),r.number&&(o=n.map(Vo)));let l=s[a=Fo(t)]||s[a=Fo(jo(t))];!l&&i&&(l=s[a=Fo(Lo(t))]),l&&qr(l,e,6,o);const c=s[a+'Once'];if(c){if(e.emitted){if(e.emitted[a])return}else e.emitted={};e.emitted[a]=!0,qr(c,e,6,o)}}function La(e,t,n=!1){const s=t.emitsCache,o=s.get(e);if(void 0!==o)return o;const i=e.emits;let r={};return i?(bo(i)?i.forEach(e=>r[e]=null):mo(r,i),To(e)&&s.set(e,r),r):(To(e)&&s.set(e,null),null)}function Ma(e,t){return!(!e||!po(t))&&(t=t.slice(2).replace(/Once$/,''),yo(e,t[0].toLowerCase()+t.slice(1))||yo(e,Lo(t))||yo(e,t))}function Fa(e){const{type:t,vnode:n,proxy:s,withProxy:o,propsOptions:[i],slots:r,attrs:a,emit:l,render:c,renderCache:u,props:d,data:f,setupState:p,ctx:h,inheritAttrs:m}=e,g=ua(e);let v,y;try{if(4&n.shapeFlag){const e=o||s,t=e;v=Pl(c.call(t,e,u,d,p,f,h)),y=a}else{const e=t;0,v=Pl(e.length>1?e(d,{attrs:a,slots:r,emit:l}):e(d,null)),y=t.props?a:Ra(a)}}catch(w){ml.length=0,Wr(w,e,1),v=Nl(pl)}let b=v;if(y&&!1!==m){const e=Object.keys(y),{shapeFlag:t}=b;e.length&&7&t&&(i&&e.some(ho)&&(y=Ba(y,i)),b=Ol(b,y,!1,!0))}return n.dirs&&(b=Ol(b,null,!1,!0),b.dirs=b.dirs?b.dirs.concat(n.dirs):n.dirs),n.transition&&ma(b,n.transition),v=b,ua(g),v}const Ra=e=>{let t;for(const n in e)('class'===n||'style'===n||po(n))&&((t||(t={}))[n]=e[n]);return t},Ba=(e,t)=>{const n={};for(const s in e)ho(s)&&s.slice(9)in t||(n[s]=e[s]);return n};function Ua(e,t,n){const s=Object.keys(t);if(s.length!==Object.keys(e).length)return!0;for(let o=0;o<s.length;o++){const i=s[o];if(t[i]!==e[i]&&!Ma(n,i))return!0}return!1}const Va={},Ka=()=>Object.create(Va),Za=e=>Object.getPrototypeOf(e)===Va;function qa(e,t,n,s=!1){const o={},i=Ka();e.propsDefaults=Object.create(null),Wa(e,t,o,i);for(const r in e.propsOptions[0])r in o||(o[r]=void 0);n?e.props=s?o:_r(o,!1,or,dr,hr):e.type.props?e.props=o:e.props=i,e.attrs=i}function Wa(e,t,n,s){const[o,i]=e.propsOptions;let r,a=!1;if(t)for(let l in t){if($o(l))continue;const c=t[l];let u;o&&yo(o,u=jo(l))?i&&i.includes(u)?(r||(r={}))[u]=c:n[u]=c:Ma(e.emitsOptions,l)||l in s&&c===s[l]||(s[l]=c,a=!0)}if(i){const t=Er(n),s=r||lo;for(let r=0;r<i.length;r++){const a=i[r];n[a]=Ya(o,t,a,s[a],e,!yo(s,a))}}return a}function Ya(e,t,n,s,o,i){const r=e[n];if(null!=r){const e=yo(r,'default');if(e&&void 0===s){const e=r.default;if(r.type!==Function&&!r.skipFactory&&So(e)){const{propsDefaults:i}=o;if(n in i)s=i[n];else{const r=Vl(o);s=i[n]=e.call(null,t),r()}}else s=e;o.ce&&o.ce._setProp(n,s)}r[0]&&(i&&!e?s=!1:!r[1]||''!==s&&s!==Lo(n)||(s=!0))}return s}function Ha(e,t,n=!1){const s=t.propsCache,o=s.get(e);if(o)return o;const i=e.props,r={},a=[];if(!i)return To(e)&&s.set(e,co),co;if(bo(i))for(let c=0;c<i.length;c++){const e=jo(i[c]);Ga(e)&&(r[e]=lo)}else if(i)for(const c in i){const e=jo(c);if(Ga(e)){const t=i[c],n=r[e]=bo(t)||So(t)?{type:t}:mo({},t),s=n.type;let o=!1,l=!0;if(bo(s))for(let e=0;e<s.length;++e){const t=s[e],n=So(t)&&t.name;if('Boolean'===n){o=!0;break}'String'===n&&(l=!1)}else o=So(s)&&'Boolean'===s.name;n[0]=o,n[1]=l,(o||yo(n,'default'))&&a.push(e)}}const l=[r,a];return To(e)&&s.set(e,l),l}function Ga(e){return'$'!==e[0]&&!$o(e)}const Ja=e=>'_'===e||'_ctx'===e||'$stable'===e,Xa=e=>bo(e)?e.map(Pl):[Pl(e)],Qa=(e,t,n)=>{if(t._n)return t;const s=function(e,t=la){if(!t)return e;if(e._n)return e;const n=(...s)=>{n._d&&bl(-1);const o=ua(t);let i;try{i=e(...s)}finally{ua(o),n._d&&bl(1)}return i};return n._n=!0,n._c=!0,n._d=!0,n}((...e)=>Xa(t(...e)),n);return s._c=!1,s},el=(e,t,n)=>{const s=e._ctx;for(const o in e){if(Ja(o))continue;const n=e[o];if(So(n))t[o]=Qa(0,n,s);else if(null!=n){const e=Xa(n);t[o]=()=>e}}},tl=(e,t)=>{const n=Xa(t);e.slots.default=()=>n},nl=(e,t,n)=>{for(const s in t)!n&&Ja(s)||(e[s]=t[s])},sl=function(e,t){t&&t.pendingBranch?bo(e)?t.effects.push(...e):t.effects.push(e):(bo(n=e)?Gr.push(...n):Jr&&-1===n.id?Jr.splice(Xr+1,0,n):1&n.flags||(Gr.push(n),n.flags|=1),sa());var n};function ol(e){return function(e){Zo().__VUE__=!0;const{insert:t,remove:n,patchProp:s,createElement:o,createText:i,createComment:r,setText:a,setElementText:l,parentNode:c,nextSibling:u,setScopeId:d=uo,insertStaticContent:f}=e,p=(e,t,n,s=null,o=null,i=null,r=void 0,a=null,l=!!t.dynamicChildren)=>{if(e===t)return;e&&!xl(e,t)&&(s=K(e),F(e,o,i,!0),e=null),-2===t.patchFlag&&(l=!1,t.dynamicChildren=null);const{type:c,ref:u,shapeFlag:d}=t;switch(c){case fl:h(e,t,n,s);break;case pl:m(e,t,n,s);break;case hl:null==e&&g(t,n,s,r);break;case dl:C(e,t,n,s,o,i,r,a,l);break;default:1&d?b(e,t,n,s,o,i,r,a,l):6&d?N(e,t,n,s,o,i,r,a,l):(64&d||128&d)&&c.process(e,t,n,s,o,i,r,a,l,W)}null!=u&&o?ya(u,e&&e.ref,i,t||e,!t):null==u&&e&&null!=e.ref&&ya(e.ref,null,i,e,!0)},h=(e,n,s,o)=>{if(null==e)t(n.el=i(n.children),s,o);else{const t=n.el=e.el;n.children!==e.children&&a(t,n.children)}},m=(e,n,s,o)=>{null==e?t(n.el=r(n.children||''),s,o):n.el=e.el},g=(e,t,n,s)=>{[e.el,e.anchor]=f(e.children,t,n,s,e.el,e.anchor)},v=({el:e,anchor:n},s,o)=>{let i;for(;e&&e!==n;)i=u(e),t(e,s,o),e=i;t(n,s,o)},y=({el:e,anchor:t})=>{let s;for(;e&&e!==t;)s=u(e),n(e),e=s;n(t)},b=(e,t,n,s,o,i,r,a,l)=>{if('svg'===t.type?r='svg':'math'===t.type&&(r='mathml'),null==e)w(t,n,s,o,i,r,a,l);else{const n=e.el&&e.el._isVueCE?e.el:null;try{n&&n._beginPatch(),x(e,t,o,i,r,a,l)}finally{n&&n._endPatch()}}},w=(e,n,i,r,a,c,u,d)=>{let f,p;const{props:h,shapeFlag:m,transition:g,dirs:v}=e;if(f=e.el=o(e.type,c,h&&h.is,h),8&m?l(f,e.children):16&m&&S(e.children,f,null,r,a,il(e,c),u,d),v&&fa(e,null,r,'created'),k(f,e,e.scopeId,u,r),h){for(const e in h)'value'===e||$o(e)||s(f,e,null,h[e],c,r);'value'in h&&s(f,'value',null,h.value,c),(p=h.onVnodeBeforeMount)&&zl(p,r,e)}v&&fa(e,null,r,'beforeMount');const y=function(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}(a,g);y&&g.beforeEnter(f),t(f,n,i),((p=h&&h.onVnodeMounted)||y||v)&&sl(()=>{p&&zl(p,r,e),y&&g.enter(f),v&&fa(e,null,r,'mounted')},a)},k=(e,t,n,s,o)=>{if(n&&d(e,n),s)for(let i=0;i<s.length;i++)d(e,s[i]);if(o){let n=o.subTree;if(t===n||ul(n.type)&&(n.ssContent===t||n.ssFallback===t)){const t=o.vnode;k(e,t,t.scopeId,t.slotScopeIds,o.parent)}}},S=(e,t,n,s,o,i,r,a,l=0)=>{for(let c=l;c<e.length;c++){const l=e[c]=a?Dl(e[c]):Pl(e[c]);p(null,l,t,n,s,o,i,r,a)}},x=(e,t,n,o,i,r,a)=>{const c=t.el=e.el;let{patchFlag:u,dynamicChildren:d,dirs:f}=t;u|=16&e.patchFlag;const p=e.props||lo,h=t.props||lo;let m;if(n&&rl(n,!1),(m=h.onVnodeBeforeUpdate)&&zl(m,n,t,e),f&&fa(t,e,n,'beforeUpdate'),n&&rl(n,!0),(p.innerHTML&&null==h.innerHTML||p.textContent&&null==h.textContent)&&l(c,''),d?E(e.dynamicChildren,d,c,n,o,il(t,i),r):a||D(e,t,c,null,n,o,il(t,i),r,!1),u>0){if(16&u)T(c,p,h,n,i);else if(2&u&&p.class!==h.class&&s(c,'class',null,h.class,i),4&u&&s(c,'style',p.style,h.style,i),8&u){const e=t.dynamicProps;for(let t=0;t<e.length;t++){const o=e[t],r=p[o],a=h[o];a===r&&'value'!==o||s(c,o,r,a,i,n)}}1&u&&e.children!==t.children&&l(c,t.children)}else a||null!=d||T(c,p,h,n,i);((m=h.onVnodeUpdated)||f)&&sl(()=>{m&&zl(m,n,t,e),f&&fa(t,e,n,'updated')},o)},E=(e,t,n,s,o,i,r)=>{for(let a=0;a<t.length;a++){const l=e[a],u=t[a],d=l.el&&(l.type===dl||!xl(l,u)||198&l.shapeFlag)?c(l.el):n;p(l,u,d,null,s,o,i,r,!0)}},T=(e,t,n,o,i)=>{if(t!==n){if(t!==lo)for(const r in t)$o(r)||r in n||s(e,r,t[r],null,i,o);for(const r in n){if($o(r))continue;const a=n[r],l=t[r];a!==l&&'value'!==r&&s(e,r,l,a,i,o)}'value'in n&&s(e,'value',t.value,n.value,i)}},C=(e,n,s,o,r,a,l,c,u)=>{const d=n.el=e?e.el:i(''),f=n.anchor=e?e.anchor:i('');let{patchFlag:p,dynamicChildren:h,slotScopeIds:m}=n;m&&(c=c?c.concat(m):m),null==e?(t(d,s,o),t(f,s,o),S(n.children||[],s,f,r,a,l,c,u)):p>0&&64&p&&h&&e.dynamicChildren?(E(e.dynamicChildren,h,s,r,a,l,c),(null!=n.key||r&&n===r.subTree)&&al(e,n,!0)):D(e,n,s,f,r,a,l,c,u)},N=(e,t,n,s,o,i,r,a,l)=>{t.slotScopeIds=a,null==e?512&t.shapeFlag?o.ctx.activate(t,n,s,r,l):O(t,n,s,o,i,r,l):A(e,t,l)},O=(e,t,n,s,o,i,r)=>{const a=e.component=function(e,t,n){const s=e.type,o=(t?t.appContext:e.appContext)||Ll,i={uid:Ml++,vnode:e,type:s,parent:t,appContext:o,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new li(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(o.provides),ids:t?t.ids:['',0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Ha(s,o),emitsOptions:La(s,o),emit:null,emitted:null,propsDefaults:lo,inheritAttrs:s.inheritAttrs,ctx:lo,data:lo,props:lo,attrs:lo,slots:lo,refs:lo,setupState:lo,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};i.ctx={_:i},i.root=t?t.root:i,i.emit=za.bind(null,i),e.ce&&e.ce(i);return i}(e,s,o);if(e.type.__isKeepAlive&&(a.ctx.renderer=W),function(e,t=!1,n=!1){t&&Ul(t);const{props:s,children:o}=e.vnode,i=Zl(e);qa(e,s,i,t),((e,t,n)=>{const s=e.slots=Ka();if(32&e.vnode.shapeFlag){const e=t._;e?(nl(s,t,n),n&&Uo(s,'_',e,!0)):el(t,s)}else t&&tl(e,t)})(e,o,n||t);const r=i?function(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,Na);const{setup:s}=n;if(s){Ci();const n=e.setupContext=s.length>1?function(e){const t=t=>{e.exposed=t||{}};return{attrs:new Proxy(e.attrs,Hl),slots:e.slots,emit:e.emit,expose:t}}(e):null,o=Vl(e),i=Zr(s,e,0,[e.props,n]),r=Co(i);if(Ni(),o(),!r&&!e.sp||_a(e)||function(e){e.ids=[e.ids[0]+e.ids[2]+++'-',0,0]}(e),r){if(i.then(Kl,Kl),t)return i.then(t=>{Wl(e,t)}).catch(t=>{Wr(t,e,0)});e.asyncDep=i}else Wl(e,i)}else Yl(e)}(e,t):void 0;t&&Ul(!1)}(a,!1,r),a.asyncDep){if(o&&o.registerDep(a,I,r),!e.el){const s=a.subTree=Nl(pl);m(null,s,t,n),e.placeholder=s.el}}else I(a,e,t,n,o,i,r)},A=(e,t,n)=>{const s=t.component=e.component;if(function(e,t,n){const{props:s,children:o,component:i}=e,{props:r,children:a,patchFlag:l}=t,c=i.emitsOptions;if(t.dirs||t.transition)return!0;if(!(n&&l>=0))return!(!o&&!a||a&&a.$stable)||s!==r&&(s?!r||Ua(s,r,c):!!r);if(1024&l)return!0;if(16&l)return s?Ua(s,r,c):!!r;if(8&l){const e=t.dynamicProps;for(let t=0;t<e.length;t++){const n=e[t];if(r[n]!==s[n]&&!Ma(c,n))return!0}}return!1}(e,t,n)){if(s.asyncDep&&!s.asyncResolved)return void P(s,t,n);s.next=t,s.update()}else t.el=e.el,s.vnode=t},I=(e,t,n,s,o,i,r)=>{const a=()=>{if(e.isMounted){let{next:t,bu:n,u:s,parent:l,vnode:u}=e;{const n=ll(e);if(n)return t&&(t.el=u.el,P(e,t,r)),void n.asyncDep.then(()=>{e.isUnmounted||a()})}let d,f=t;rl(e,!1),t?(t.el=u.el,P(e,t,r)):t=u,n&&Bo(n),(d=t.props&&t.props.onVnodeBeforeUpdate)&&zl(d,l,t,u),rl(e,!0);const h=Fa(e),m=e.subTree;e.subTree=h,p(m,h,c(m.el),K(m),e,o,i),t.el=h.el,null===f&&function({vnode:e,parent:t},n){for(;t;){const s=t.subTree;if(s.suspense&&s.suspense.activeBranch===e&&(s.el=e.el),s!==e)break;(e=t.vnode).el=n,t=t.parent}}(e,h.el),s&&sl(s,o),(d=t.props&&t.props.onVnodeUpdated)&&sl(()=>zl(d,l,t,u),o)}else{let r;const{el:a,props:l}=t,{bm:c,m:u,parent:d,root:f,type:h}=e,m=_a(t);rl(e,!1),c&&Bo(c),!m&&(r=l&&l.onVnodeBeforeMount)&&zl(r,d,t),rl(e,!0);{f.ce&&!1!==f.ce._def.shadowRoot&&f.ce._injectChildStyle(h);const r=e.subTree=Fa(e);p(null,r,n,s,e,o,i),t.el=r.el}if(u&&sl(u,o),!m&&(r=l&&l.onVnodeMounted)){const e=t;sl(()=>zl(r,d,e),o)}(256&t.shapeFlag||d&&_a(d.vnode)&&256&d.vnode.shapeFlag)&&e.a&&sl(e.a,o),e.isMounted=!0,t=n=s=null}};e.scope.on();const l=e.effect=new fi(a);e.scope.off();const u=e.update=l.run.bind(l),d=e.job=l.runIfDirty.bind(l);d.i=e,d.id=e.uid,l.scheduler=()=>na(d),rl(e,!0),u()},P=(e,t,n)=>{t.component=e;const s=e.vnode.props;e.vnode=t,e.next=null,function(e,t,n,s){const{props:o,attrs:i,vnode:{patchFlag:r}}=e,a=Er(o),[l]=e.propsOptions;let c=!1;if(!(s||r>0)||16&r){let s;Wa(e,t,o,i)&&(c=!0);for(const i in a)t&&(yo(t,i)||(s=Lo(i))!==i&&yo(t,s))||(l?!n||void 0===n[i]&&void 0===n[s]||(o[i]=Ya(l,a,i,void 0,e,!0)):delete o[i]);if(i!==a)for(const e in i)t&&yo(t,e)||(delete i[e],c=!0)}else if(8&r){const n=e.vnode.dynamicProps;for(let s=0;s<n.length;s++){let r=n[s];if(Ma(e.emitsOptions,r))continue;const u=t[r];if(l)if(yo(i,r))u!==i[r]&&(i[r]=u,c=!0);else{const t=jo(r);o[t]=Ya(l,a,t,u,e,!1)}else u!==i[r]&&(i[r]=u,c=!0)}}c&&Fi(e.attrs,'set','')}(e,t.props,s,n),((e,t,n)=>{const{vnode:s,slots:o}=e;let i=!0,r=lo;if(32&s.shapeFlag){const e=t._;e?n&&1===e?i=!1:nl(o,t,n):(i=!t.$stable,el(t,o)),r=t}else t&&(tl(e,t),r={default:1});if(i)for(const a in o)Ja(a)||null!=r[a]||delete o[a]})(e,t.children,n),Ci(),oa(e),Ni()},D=(e,t,n,s,o,i,r,a,c=!1)=>{const u=e&&e.children,d=e?e.shapeFlag:0,f=t.children,{patchFlag:p,shapeFlag:h}=t;if(p>0){if(128&p)return void L(u,f,n,s,o,i,r,a,c);if(256&p)return void j(u,f,n,s,o,i,r,a,c)}8&h?(16&d&&V(u,o,i),f!==u&&l(n,f)):16&d?16&h?L(u,f,n,s,o,i,r,a,c):V(u,o,i,!0):(8&d&&l(n,''),16&h&&S(f,n,s,o,i,r,a,c))},j=(e,t,n,s,o,i,r,a,l)=>{t=t||co;const c=(e=e||co).length,u=t.length,d=Math.min(c,u);let f;for(f=0;f<d;f++){const s=t[f]=l?Dl(t[f]):Pl(t[f]);p(e[f],s,n,null,o,i,r,a,l)}c>u?V(e,o,i,!0,!1,d):S(t,n,s,o,i,r,a,l,d)},L=(e,t,n,s,o,i,r,a,l)=>{let c=0;const u=t.length;let d=e.length-1,f=u-1;for(;c<=d&&c<=f;){const s=e[c],u=t[c]=l?Dl(t[c]):Pl(t[c]);if(!xl(s,u))break;p(s,u,n,null,o,i,r,a,l),c++}for(;c<=d&&c<=f;){const s=e[d],c=t[f]=l?Dl(t[f]):Pl(t[f]);if(!xl(s,c))break;p(s,c,n,null,o,i,r,a,l),d--,f--}if(c>d){if(c<=f){const e=f+1,d=e<u?t[e].el:s;for(;c<=f;)p(null,t[c]=l?Dl(t[c]):Pl(t[c]),n,d,o,i,r,a,l),c++}}else if(c>f)for(;c<=d;)F(e[c],o,i,!0),c++;else{const h=c,m=c,g=new Map;for(c=m;c<=f;c++){const e=t[c]=l?Dl(t[c]):Pl(t[c]);null!=e.key&&g.set(e.key,c)}let v,y=0;const b=f-m+1;let w=!1,k=0;const S=new Array(b);for(c=0;c<b;c++)S[c]=0;for(c=h;c<=d;c++){const s=e[c];if(y>=b){F(s,o,i,!0);continue}let u;if(null!=s.key)u=g.get(s.key);else for(v=m;v<=f;v++)if(0===S[v-m]&&xl(s,t[v])){u=v;break}void 0===u?F(s,o,i,!0):(S[u-m]=c+1,u>=k?k=u:w=!0,p(s,t[u],n,null,o,i,r,a,l),y++)}const x=w?function(e){const t=e.slice(),n=[0];let s,o,i,r,a;const l=e.length;for(s=0;s<l;s++){const l=e[s];if(0!==l){if(o=n[n.length-1],e[o]<l){t[s]=o,n.push(s);continue}for(i=0,r=n.length-1;i<r;)a=i+r>>1,e[n[a]]<l?i=a+1:r=a;l<e[n[i]]&&(i>0&&(t[s]=n[i-1]),n[i]=s)}}i=n.length,r=n[i-1];for(;i-- >0;)n[i]=r,r=t[r];return n}(S):co;for(v=x.length-1,c=b-1;c>=0;c--){const e=m+c,d=t[e],f=t[e+1],h=e+1<u?f.el||f.placeholder:s;0===S[c]?p(null,d,n,h,o,i,r,a,l):w&&(v<0||c!==x[v]?M(d,n,h,2):v--)}}},M=(e,s,o,i,r=null)=>{const{el:a,type:l,transition:c,children:u,shapeFlag:d}=e;if(6&d)return void M(e.component.subTree,s,o,i);if(128&d)return void e.suspense.move(s,o,i);if(64&d)return void l.move(e,s,o,W);if(l===dl){t(a,s,o);for(let e=0;e<u.length;e++)M(u[e],s,o,i);return void t(e.anchor,s,o)}if(l===hl)return void v(e,s,o);if(2!==i&&1&d&&c)if(0===i)c.beforeEnter(a),t(a,s,o),sl(()=>c.enter(a),r);else{const{leave:i,delayLeave:r,afterLeave:l}=c,u=()=>{e.ctx.isUnmounted?n(a):t(a,s,o)},d=()=>{a._isLeaving&&a[ha](!0),i(a,()=>{u(),l&&l()})};r?r(a,u,d):d()}else t(a,s,o)},F=(e,t,n,s=!1,o=!1)=>{const{type:i,props:r,ref:a,children:l,dynamicChildren:c,shapeFlag:u,patchFlag:d,dirs:f,cacheIndex:p}=e;if(-2===d&&(o=!1),null!=a&&(Ci(),ya(a,null,n,e,!0),Ni()),null!=p&&(t.renderCache[p]=void 0),256&u)return void t.ctx.deactivate(e);const h=1&u&&f,m=!_a(e);let g;if(m&&(g=r&&r.onVnodeBeforeUnmount)&&zl(g,t,e),6&u)U(e.component,n,s);else{if(128&u)return void e.suspense.unmount(n,s);h&&fa(e,null,t,'beforeUnmount'),64&u?e.type.remove(e,t,n,W,s):c&&!c.hasOnce&&(i!==dl||d>0&&64&d)?V(c,t,n,!1,!0):(i===dl&&384&d||!o&&16&u)&&V(l,t,n),s&&R(e)}(m&&(g=r&&r.onVnodeUnmounted)||h)&&sl(()=>{g&&zl(g,t,e),h&&fa(e,null,t,'unmounted')},n)},R=e=>{const{type:t,el:s,anchor:o,transition:i}=e;if(t===dl)return void B(s,o);if(t===hl)return void y(e);const r=()=>{n(s),i&&!i.persisted&&i.afterLeave&&i.afterLeave()};if(1&e.shapeFlag&&i&&!i.persisted){const{leave:t,delayLeave:n}=i,o=()=>t(s,r);n?n(e.el,r,o):o()}else r()},B=(e,t)=>{let s;for(;e!==t;)s=u(e),n(e),e=s;n(t)},U=(e,t,n)=>{const{bum:s,scope:o,job:i,subTree:r,um:a,m:l,a:c}=e;cl(l),cl(c),s&&Bo(s),o.stop(),i&&(i.flags|=8,F(r,e,t,n)),a&&sl(a,t),sl(()=>{e.isUnmounted=!0},t)},V=(e,t,n,s=!1,o=!1,i=0)=>{for(let r=i;r<e.length;r++)F(e[r],t,n,s,o)},K=e=>{if(6&e.shapeFlag)return K(e.component.subTree);if(128&e.shapeFlag)return e.suspense.next();const t=u(e.anchor||e.el),n=t&&t[pa];return n?u(n):t};let Z=!1;const q=(e,t,n)=>{null==e?t._vnode&&F(t._vnode,null,null,!0):p(t._vnode||null,e,t,null,null,null,n),t._vnode=e,Z||(Z=!0,oa(),ia(),Z=!1)},W={p:p,um:F,m:M,r:R,mt:O,mc:S,pc:D,pbc:E,n:K,o:e};let Y;return{render:q,hydrate:Y,createApp:Ia(q)}}(e)}function il({type:e,props:t},n){return'svg'===n&&'foreignObject'===e||'mathml'===n&&'annotation-xml'===e&&t&&t.encoding&&t.encoding.includes('html')?void 0:n}function rl({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function al(e,t,n=!1){const s=e.children,o=t.children;if(bo(s)&&bo(o))for(let i=0;i<s.length;i++){const e=s[i];let t=o[i];1&t.shapeFlag&&!t.dynamicChildren&&((t.patchFlag<=0||32===t.patchFlag)&&(t=o[i]=Dl(o[i]),t.el=e.el),n||-2===t.patchFlag||al(e,t)),t.type===fl&&-1!==t.patchFlag&&(t.el=e.el),t.type!==pl||t.el||(t.el=e.el)}}function ll(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:ll(t)}function cl(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const ul=e=>e.__isSuspense;const dl=Symbol.for('v-fgt'),fl=Symbol.for('v-txt'),pl=Symbol.for('v-cmt'),hl=Symbol.for('v-stc'),ml=[];let gl=null;function vl(e=!1){ml.push(gl=e?null:[])}let yl=1;function bl(e,t=!1){yl+=e,e<0&&gl&&t&&(gl.hasOnce=!0)}function _l(e){return e.dynamicChildren=yl>0?gl||co:null,ml.pop(),gl=ml[ml.length-1]||null,yl>0&&gl&&gl.push(e),e}function wl(e,t,n,s,o,i){return _l(Cl(e,t,n,s,o,i,!0))}function kl(e,t,n,s,o){return _l(Nl(e,t,n,s,o,!0))}function Sl(e){return!!e&&!0===e.__v_isVNode}function xl(e,t){return e.type===t.type&&e.key===t.key}const El=({key:e})=>null!=e?e:null,Tl=({ref:e,ref_key:t,ref_for:n})=>('number'==typeof e&&(e=''+e),null!=e?xo(e)||Or(e)||So(e)?{i:la,r:e,k:t,f:!!n}:e:null);function Cl(e,t=null,n=null,s=0,o=null,i=(e===dl?0:1),r=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&El(t),ref:t&&Tl(t),scopeId:ca,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:s,dynamicProps:o,dynamicChildren:null,appContext:null,ctx:la};return a?(jl(l,n),128&i&&e.normalize(l)):n&&(l.shapeFlag|=xo(n)?8:16),yl>0&&!r&&gl&&(l.patchFlag>0||6&i)&&32!==l.patchFlag&&gl.push(l),l}const Nl=function(e,t=null,n=null,s=0,o=null,i=!1){e&&e!==Sa||(e=pl);if(Sl(e)){const s=Ol(e,t,!0);return n&&jl(s,n),yl>0&&!i&&gl&&(6&s.shapeFlag?gl[gl.indexOf(e)]=s:gl.push(s)),s.patchFlag=-2,s}r=e,So(r)&&'__vccOpts'in r&&(e=e.__vccOpts);var r;if(t){t=function(e){return e?xr(e)||Za(e)?mo({},e):e:null}(t);let{class:e,style:n}=t;e&&!xo(e)&&(t.class=Jo(e)),To(n)&&(xr(n)&&!bo(n)&&(n=mo({},n)),t.style=qo(n))}const a=xo(e)?1:ul(e)?128:(e=>e.__isTeleport)(e)?64:To(e)?4:So(e)?2:0;return Cl(e,t,n,s,o,a,i,!0)};function Ol(e,t,n=!1,s=!1){const{props:o,ref:i,patchFlag:r,children:a,transition:l}=e,c=t?function(...e){const t={};for(let n=0;n<e.length;n++){const s=e[n];for(const e in s)if('class'===e)t.class!==s.class&&(t.class=Jo([t.class,s.class]));else if('style'===e)t.style=qo([t.style,s.style]);else if(po(e)){const n=t[e],o=s[e];!o||n===o||bo(n)&&n.includes(o)||(t[e]=n?[].concat(n,o):o)}else''!==e&&(t[e]=s[e])}return t}(o||{},t):o,u={__v_isVNode:!0,__v_skip:!0,type:e.type,props:c,key:c&&El(c),ref:t&&t.ref?n&&i?bo(i)?i.concat(Tl(t)):[i,Tl(t)]:Tl(t):i,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==dl?-1===r?16:16|r:r,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:l,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Ol(e.ssContent),ssFallback:e.ssFallback&&Ol(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return l&&s&&ma(u,l.clone(u)),u}function Al(e=' ',t=0){return Nl(fl,null,e,t)}function Il(e,t){const n=Nl(hl,null,e);return n.staticCount=t,n}function $l(e='',t=!1){return t?(vl(),kl(pl,null,e)):Nl(pl,null,e)}function Pl(e){return null==e||'boolean'==typeof e?Nl(pl):bo(e)?Nl(dl,null,e.slice()):Sl(e)?Dl(e):Nl(fl,null,String(e))}function Dl(e){return null===e.el&&-1!==e.patchFlag||e.memo?e:Ol(e)}function jl(e,t){let n=0;const{shapeFlag:s}=e;if(null==t)t=null;else if(bo(t))n=16;else if('object'==typeof t){if(65&s){const n=t.default;return void(n&&(n._c&&(n._d=!1),jl(e,n()),n._c&&(n._d=!0)))}{n=32;const s=t._;s||Za(t)?3===s&&la&&(1===la.slots._?t._=1:(t._=2,e.patchFlag|=1024)):t._ctx=la}}else So(t)?(t={default:t,_ctx:la},n=32):(t=String(t),64&s?(n=16,t=[Al(t)]):n=8);e.children=t,e.shapeFlag|=n}function zl(e,t,n,s=null){qr(e,t,7,[n,s])}const Ll=Oa();let Ml=0;let Fl=null;const Rl=()=>Fl||la;let Bl,Ul;{const e=Zo(),t=(t,n)=>{let s;return(s=e[t])||(s=e[t]=[]),s.push(n),e=>{s.length>1?s.forEach(t=>t(e)):s[0](e)}};Bl=t('__VUE_INSTANCE_SETTERS__',e=>Fl=e),Ul=t('__VUE_SSR_SETTERS__',e=>ql=e)}const Vl=e=>{const t=Fl;return Bl(e),e.scope.on(),()=>{e.scope.off(),Bl(t)}},Kl=()=>{Fl&&Fl.scope.off(),Bl(null)};function Zl(e){return 4&e.vnode.shapeFlag}let ql=!1;function Wl(e,t,n){So(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:To(t)&&(e.setupState=Dr(t)),Yl(e)}function Yl(e,t,n){const s=e.type;e.render||(e.render=s.render||uo)}const Hl={get:(e,t)=>(Mi(e,0,''),e[t])};function Gl(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(Dr(Tr(e.exposed)),{get:(t,n)=>n in t?t[n]:n in Ta?Ta[n](e):void 0,has:(e,t)=>t in e||t in Ta})):e.proxy}const Jl=(e,t)=>{const n=function(e,t,n=!1){let s,o;return So(e)?s=e:(s=e.get,o=e.set),new Fr(s,o,n)}(e,0,ql);return n};function Xl(e,t,n){try{bl(-1);const s=arguments.length;return 2===s?To(t)&&!bo(t)?Sl(t)?Nl(e,null,[t]):Nl(e,t):Nl(e,null,t):(s>3?n=Array.prototype.slice.call(arguments,2):3===s&&Sl(n)&&(n=[n]),Nl(e,t,n))}finally{bl(1)}}const Ql='3.5.25';
/**
* @vue/runtime-dom v3.5.25
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let ec;const tc='undefined'!=typeof window&&window.trustedTypes;if(tc)try{ec=tc.createPolicy('vue',{createHTML:e=>e})}catch(iy){}const nc=ec?e=>ec.createHTML(e):e=>e,sc='undefined'!=typeof document?document:null,oc=sc&&sc.createElement('template'),ic={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,s)=>{const o='svg'===t?sc.createElementNS('http://www.w3.org/2000/svg',e):'mathml'===t?sc.createElementNS('http://www.w3.org/1998/Math/MathML',e):n?sc.createElement(e,{is:n}):sc.createElement(e);return'select'===e&&s&&null!=s.multiple&&o.setAttribute('multiple',s.multiple),o},createText:e=>sc.createTextNode(e),createComment:e=>sc.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>sc.querySelector(e),setScopeId(e,t){e.setAttribute(t,'')},insertStaticContent(e,t,n,s,o,i){const r=n?n.previousSibling:t.lastChild;if(o&&(o===i||o.nextSibling))for(;t.insertBefore(o.cloneNode(!0),n),o!==i&&(o=o.nextSibling););else{oc.innerHTML=nc('svg'===s?`<svg>${e}</svg>`:'mathml'===s?`<math>${e}</math>`:e);const o=oc.content;if('svg'===s||'mathml'===s){const e=o.firstChild;for(;e.firstChild;)o.appendChild(e.firstChild);o.removeChild(e)}t.insertBefore(o,n)}return[r?r.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},rc=Symbol('_vtc');const ac=Symbol('_vod'),lc=Symbol('_vsh'),cc={name:'show',beforeMount(e,{value:t},{transition:n}){e[ac]='none'===e.style.display?'':e.style.display,n&&t?n.beforeEnter(e):uc(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:s}){!t!=!n&&(s?t?(s.beforeEnter(e),uc(e,!0),s.enter(e)):s.leave(e,()=>{uc(e,!1)}):uc(e,t))},beforeUnmount(e,{value:t}){uc(e,t)}};function uc(e,t){e.style.display=t?e[ac]:'none',e[lc]=!t}const dc=Symbol(''),fc=/(?:^|;)\s*display\s*:/;const pc=/\s*!important$/;function hc(e,t,n){if(bo(n))n.forEach(n=>hc(e,t,n));else if(null==n&&(n=''),t.startsWith('--'))e.setProperty(t,n);else{const s=function(e,t){const n=gc[t];if(n)return n;let s=jo(t);if('filter'!==s&&s in e)return gc[t]=s;s=Mo(s);for(let o=0;o<mc.length;o++){const n=mc[o]+s;if(n in e)return gc[t]=n}return t}(e,t);pc.test(n)?e.setProperty(Lo(s),n.replace(pc,''),'important'):e[s]=n}}const mc=['Webkit','Moz','ms'],gc={};const vc='http://www.w3.org/1999/xlink';function yc(e,t,n,s,o,i=Xo(t)){s&&t.startsWith('xlink:')?null==n?e.removeAttributeNS(vc,t.slice(6,t.length)):e.setAttributeNS(vc,t,n):null==n||i&&!Qo(n)?e.removeAttribute(t):e.setAttribute(t,i?'':Eo(n)?String(n):n)}function bc(e,t,n,s,o){if('innerHTML'===t||'textContent'===t)return void(null!=n&&(e[t]='innerHTML'===t?nc(n):n));const i=e.tagName;if('value'===t&&'PROGRESS'!==i&&!i.includes('-')){const s='OPTION'===i?e.getAttribute('value')||'':e.value,o=null==n?'checkbox'===e.type?'on':'':String(n);return s===o&&'_value'in e||(e.value=o),null==n&&e.removeAttribute(t),void(e._value=n)}let r=!1;if(''===n||null==n){const s=typeof e[t];'boolean'===s?n=Qo(n):null==n&&'string'===s?(n='',r=!0):'number'===s&&(n=0,r=!0)}try{e[t]=n}catch(iy){}r&&e.removeAttribute(o||t)}function _c(e,t,n,s){e.addEventListener(t,n,s)}const wc=Symbol('_vei');function kc(e,t,n,s,o=null){const i=e[wc]||(e[wc]={}),r=i[t];if(s&&r)r.value=s;else{const[n,a]=function(e){let t;if(Sc.test(e)){let n;for(t={};n=e.match(Sc);)e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}const n=':'===e[2]?e.slice(3):Lo(e.slice(2));return[n,t]}(t);if(s){const r=i[t]=function(e,t){const n=e=>{if(e._vts){if(e._vts<=n.attached)return}else e._vts=Date.now();qr(function(e,t){if(bo(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(e=>t=>!t._stopped&&e&&e(t))}return t}(e,n.value),t,5,[e])};return n.value=e,n.attached=Tc(),n}(s,o);_c(e,n,r,a)}else r&&(!function(e,t,n,s){e.removeEventListener(t,n,s)}(e,n,r,a),i[t]=void 0)}}const Sc=/(?:Once|Passive|Capture)$/;let xc=0;const Ec=Promise.resolve(),Tc=()=>xc||(Ec.then(()=>xc=0),xc=Date.now());const Cc=e=>111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123;const Nc=e=>{const t=e.props['onUpdate:modelValue']||!1;return bo(t)?e=>Bo(t,e):t};function Oc(e){e.target.composing=!0}function Ac(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event('input')))}const Ic=Symbol('_assign');function $c(e,t,n){return t&&(e=e.trim()),n&&(e=Vo(e)),e}const Pc={created(e,{modifiers:{lazy:t,trim:n,number:s}},o){e[Ic]=Nc(o);const i=s||o.props&&'number'===o.props.type;_c(e,t?'change':'input',t=>{t.target.composing||e[Ic]($c(e.value,n,i))}),(n||i)&&_c(e,'change',()=>{e.value=$c(e.value,n,i)}),t||(_c(e,'compositionstart',Oc),_c(e,'compositionend',Ac),_c(e,'change',Ac))},mounted(e,{value:t}){e.value=null==t?'':t},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:s,trim:o,number:i}},r){if(e[Ic]=Nc(r),e.composing)return;const a=null==t?'':t;if((!i&&'number'!==e.type||/^0\d/.test(e.value)?e.value:Vo(e.value))!==a){if(document.activeElement===e&&'range'!==e.type){if(s&&t===n)return;if(o&&e.value.trim()===a)return}e.value=a}}},Dc={deep:!0,created(e,_,t){e[Ic]=Nc(t),_c(e,'change',()=>{const t=e._modelValue,n=Mc(e),s=e.checked,o=e[Ic];if(bo(t)){const e=ti(t,n),i=-1!==e;if(s&&!i)o(t.concat(n));else if(!s&&i){const n=[...t];n.splice(e,1),o(n)}}else if(wo(t)){const e=new Set(t);s?e.add(n):e.delete(n),o(e)}else o(Fc(e,s))})},mounted:jc,beforeUpdate(e,t,n){e[Ic]=Nc(n),jc(e,t,n)}};function jc(e,{value:t,oldValue:n},s){let o;if(e._modelValue=t,bo(t))o=ti(t,s.props.value)>-1;else if(wo(t))o=t.has(s.props.value);else{if(t===n)return;o=ei(t,Fc(e,!0))}e.checked!==o&&(e.checked=o)}const zc={deep:!0,created(e,{value:t,modifiers:{number:n}},s){const o=wo(t);_c(e,'change',()=>{const t=Array.prototype.filter.call(e.options,e=>e.selected).map(e=>n?Vo(Mc(e)):Mc(e));e[Ic](e.multiple?o?new Set(t):t:t[0]),e._assigning=!0,ta(()=>{e._assigning=!1})}),e[Ic]=Nc(s)},mounted(e,{value:t}){Lc(e,t)},beforeUpdate(e,t,n){e[Ic]=Nc(n)},updated(e,{value:t}){e._assigning||Lc(e,t)}};function Lc(e,t){const n=e.multiple,s=bo(t);if(!n||s||wo(t)){for(let o=0,i=e.options.length;o<i;o++){const i=e.options[o],r=Mc(i);if(n)if(s){const e=typeof r;i.selected='string'===e||'number'===e?t.some(e=>String(e)===String(r)):ti(t,r)>-1}else i.selected=t.has(r);else if(ei(Mc(i),t))return void(e.selectedIndex!==o&&(e.selectedIndex=o))}n||-1===e.selectedIndex||(e.selectedIndex=-1)}}function Mc(e){return'_value'in e?e._value:e.value}function Fc(e,t){const n=t?'_trueValue':'_falseValue';return n in e?e[n]:t}const Rc=mo({patchProp:(e,t,n,s,o,i)=>{const r='svg'===o;'class'===t?function(e,t,n){const s=e[rc];s&&(t=(t?[t,...s]:[...s]).join(' ')),null==t?e.removeAttribute('class'):n?e.setAttribute('class',t):e.className=t}(e,s,r):'style'===t?function(e,t,n){const s=e.style,o=xo(n);let i=!1;if(n&&!o){if(t)if(xo(t))for(const e of t.split(';')){const t=e.slice(0,e.indexOf(':')).trim();null==n[t]&&hc(s,t,'')}else for(const e in t)null==n[e]&&hc(s,e,'');for(const e in n)'display'===e&&(i=!0),hc(s,e,n[e])}else if(o){if(t!==n){const e=s[dc];e&&(n+=';'+e),s.cssText=n,i=fc.test(n)}}else t&&e.removeAttribute('style');ac in e&&(e[ac]=i?s.display:'',e[lc]&&(s.display='none'))}(e,n,s):po(t)?ho(t)||kc(e,t,0,s,i):('.'===t[0]?(t=t.slice(1),1):'^'===t[0]?(t=t.slice(1),0):function(e,t,n,s){if(s)return'innerHTML'===t||'textContent'===t||!!(t in e&&Cc(t)&&So(n));if('spellcheck'===t||'draggable'===t||'translate'===t||'autocorrect'===t)return!1;if('sandbox'===t&&'IFRAME'===e.tagName)return!1;if('form'===t)return!1;if('list'===t&&'INPUT'===e.tagName)return!1;if('type'===t&&'TEXTAREA'===e.tagName)return!1;if('width'===t||'height'===t){const t=e.tagName;if('IMG'===t||'VIDEO'===t||'CANVAS'===t||'SOURCE'===t)return!1}if(Cc(t)&&xo(n))return!1;return t in e}(e,t,s,r))?(bc(e,t,s),e.tagName.includes('-')||'value'!==t&&'checked'!==t&&'selected'!==t||yc(e,t,s,r,0,'value'!==t)):!e._isVueCE||!/[A-Z]/.test(t)&&xo(s)?('true-value'===t?e._trueValue=s:'false-value'===t&&(e._falseValue=s),yc(e,t,s,r)):bc(e,jo(t),s,0,t)}},ic);let Bc;const Uc=(...e)=>{const t=(Bc||(Bc=ol(Rc))).createApp(...e),{mount:n}=t;return t.mount=e=>{const s=function(e){if(xo(e)){return document.querySelector(e)}return e}
/*!
 * pinia v3.0.4
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */(e);if(!s)return;const o=t._component;So(o)||o.render||o.template||(o.template=s.innerHTML),1===s.nodeType&&(s.textContent='');const i=n(s,!1,function(e){if(e instanceof SVGElement)return'svg';if('function'==typeof MathMLElement&&e instanceof MathMLElement)return'mathml'}(s));return s instanceof Element&&(s.removeAttribute('v-cloak'),s.setAttribute('data-v-app','')),i},t};let Vc;const Kc=e=>Vc=e,Zc=Symbol();function qc(e){return e&&'object'==typeof e&&'[object Object]'===Object.prototype.toString.call(e)&&'function'!=typeof e.toJSON}var Wc,Yc;function Hc(){const e=ci(!0),t=e.run(()=>Ar({}));let n=[],s=[];const o=Tr({install(e){Kc(o),o._a=e,e.provide(Zc,o),e.config.globalProperties.$pinia=o,s.forEach(e=>n.push(e)),s=[]},use(e){return this._a?n.push(e):s.push(e),this},_p:n,_a:null,_e:e,_s:new Map,state:t});return o}(Yc=Wc||(Wc={})).direct='direct',Yc.patchObject='patch object',Yc.patchFunction='patch function';const Gc=()=>{};function Jc(e,t,n,s=Gc){e.add(t);const o=()=>{e.delete(t)&&s()};var i;return!n&&ui()&&(i=o,ri&&ri.cleanups.push(i)),o}function Xc(e,...t){e.forEach(e=>{e(...t)})}const Qc=e=>e(),eu=Symbol(),tu=Symbol();function nu(e,t){e instanceof Map&&t instanceof Map?t.forEach((t,n)=>e.set(n,t)):e instanceof Set&&t instanceof Set&&t.forEach(e.add,e);for(const n in t){if(!t.hasOwnProperty(n))continue;const s=t[n],o=e[n];qc(o)&&qc(s)&&e.hasOwnProperty(n)&&!Or(s)&&!wr(s)?e[n]=nu(o,s):e[n]=s}return e}const su=Symbol();function ou(e){return!qc(e)||!Object.prototype.hasOwnProperty.call(e,su)}const{assign:iu}=Object;function ru(e){return!(!Or(e)||!e.effect)}function au(e,t,n,s){const{state:o,actions:i,getters:r}=t,a=n.state.value[e];let l;return l=lu(e,function(){a||(n.state.value[e]=o?o():{});const t=function(e){const t=bo(e)?new Array(e.length):{};for(const n in e)t[n]=Mr(e,n);return t}(n.state.value[e]);return iu(t,i,Object.keys(r||{}).reduce((t,s)=>(t[s]=Tr(Jl(()=>{Kc(n);const t=n._s.get(e);return r[s].call(t,t)})),t),{}))},t,n,s,!0),l}function lu(e,t,n={},s,o,i){let r;const a=iu({actions:{}},n),l={deep:!0};let c,u,d,f=new Set,p=new Set;const h=s.state.value[e];let m;function g(t){let n;c=u=!1,'function'==typeof t?(t(s.state.value[e]),n={type:Wc.patchFunction,storeId:e,events:d}):(nu(s.state.value[e],t),n={type:Wc.patchObject,payload:t,storeId:e,events:d});const o=m=Symbol();ta().then(()=>{m===o&&(c=!0)}),u=!0,Xc(f,n,s.state.value[e])}i||h||(s.state.value[e]={}),Ar({});const v=i?function(){const{state:e}=n,t=e?e():{};this.$patch(e=>{iu(e,t)})}:Gc;const y=(t,n='')=>{if(eu in t)return t[tu]=n,t;const o=function(){Kc(s);const n=Array.from(arguments),i=new Set,r=new Set;let a;Xc(p,{args:n,name:o[tu],store:b,after:function(e){i.add(e)},onError:function(e){r.add(e)}});try{a=t.apply(this&&this.$id===e?this:b,n)}catch(l){throw Xc(r,l),l}return a instanceof Promise?a.then(e=>(Xc(i,e),e)).catch(e=>(Xc(r,e),Promise.reject(e))):(Xc(i,a),a)};return o[eu]=!0,o[tu]=n,o},b=yr({_p:s,$id:e,$onAction:Jc.bind(null,p),$patch:g,$reset:v,$subscribe(t,n={}){const o=Jc(f,t,n.detached,()=>i()),i=r.run(()=>ja(()=>s.state.value[e],s=>{('sync'===n.flush?u:c)&&t({storeId:e,type:Wc.direct,events:d},s)},iu({},l,n)));return o},$dispose:function(){r.stop(),f.clear(),p.clear(),s._s.delete(e)}});s._s.set(e,b);const w=(s._a&&s._a.runWithContext||Qc)(()=>s._e.run(()=>(r=ci()).run(()=>t({action:y}))));for(const k in w){const t=w[k];if(Or(t)&&!ru(t)||wr(t))i||(h&&ou(t)&&(Or(t)?t.value=h[k]:nu(t,h[k])),s.state.value[e][k]=t);else if('function'==typeof t){const e=y(t,k);w[k]=e,a.actions[k]=t}}return iu(b,w),iu(Er(b),w),Object.defineProperty(b,'$state',{get:()=>s.state.value[e],set:e=>{g(t=>{iu(t,e)})}}),s._p.forEach(e=>{iu(b,r.run(()=>e({store:b,app:s._a,pinia:s,options:a})))}),h&&i&&n.hydrate&&n.hydrate(b.$state,h),c=!0,u=!0,b}
/*! #__NO_SIDE_EFFECTS__ */function cu(e,t,n){let s;const o='function'==typeof t;function i(n,i){const r=!(!Rl()&&!$a);(n=n||(r?Pa(Zc,null):null))&&Kc(n),(n=Vc)._s.has(e)||(o?lu(e,t,s,n):au(e,s,n));return n._s.get(e)}return s=o?n:t,i.$id=e,i}function uu(e){const t=Er(e),n={};for(const s in t){const o=t[s];o.effect?n[s]=Jl({get:()=>e[s],set(t){e[s]=t}}):(Or(o)||wr(o))&&(n[s]=Lr(e,s))}return n}function du(e){if('object'!=typeof e)return e;var t,n,s=Object.prototype.toString.call(e);if('[object Object]'===s){if(e.constructor!==Object&&'function'==typeof e.constructor)for(t in n=new e.constructor,e)e.hasOwnProperty(t)&&n[t]!==e[t]&&(n[t]=du(e[t]));else for(t in n={},e)'__proto__'===t?Object.defineProperty(n,t,{value:du(e[t]),configurable:!0,enumerable:!0,writable:!0}):n[t]=du(e[t]);return n}if('[object Array]'===s){for(t=e.length,n=Array(t);t--;)n[t]=du(e[t]);return n}return'[object Set]'===s?(n=new Set,e.forEach(function(e){n.add(du(e))}),n):'[object Map]'===s?(n=new Map,e.forEach(function(e,t){n.set(du(t),du(e))}),n):'[object Date]'===s?new Date(+e):'[object RegExp]'===s?((n=new RegExp(e.source,e.flags)).lastIndex=e.lastIndex,n):'[object DataView]'===s?new e.constructor(du(e.buffer)):'[object ArrayBuffer]'===s?e.slice(0):'Array]'===s.slice(-6)?new e.constructor(e):e}const fu=cu('settings',()=>{const e=_.get(r,Ys),t=void 0===e,n=Hs(Ws,e);t&&!n.custom_prompt&&(n.custom_prompt=Gs);const s=Ar(n);return ja(s,e=>{_.set(r,Ys,du(e)),i()},{deep:!0}),{settings:s}});function pu(){try{return fu().settings.debug_mode}catch{return!1}}const hu={log:(...e)=>{pu()&&console.log('[myst]',...e)},warn:(...e)=>{pu()&&console.warn('[myst]',...e)},error:(...e)=>{pu()&&console.error('[myst]',...e)}},mu=Symbol.for('yaml.alias'),gu=Symbol.for('yaml.document'),vu=Symbol.for('yaml.map'),yu=Symbol.for('yaml.pair'),bu=Symbol.for('yaml.scalar'),_u=Symbol.for('yaml.seq'),wu=Symbol.for('yaml.node.type'),ku=e=>!!e&&'object'==typeof e&&e[wu]===mu,Su=e=>!!e&&'object'==typeof e&&e[wu]===gu,xu=e=>!!e&&'object'==typeof e&&e[wu]===vu,Eu=e=>!!e&&'object'==typeof e&&e[wu]===yu,Tu=e=>!!e&&'object'==typeof e&&e[wu]===bu,Cu=e=>!!e&&'object'==typeof e&&e[wu]===_u;function Nu(e){if(e&&'object'==typeof e)switch(e[wu]){case vu:case _u:return!0}return!1}function Ou(e){if(e&&'object'==typeof e)switch(e[wu]){case mu:case vu:case bu:case _u:return!0}return!1}const Au=e=>(Tu(e)||Nu(e))&&!!e.anchor,Iu=Symbol('break visit'),$u=Symbol('skip children'),Pu=Symbol('remove node');function Du(e,t){const n=function(e){if('object'==typeof e&&(e.Collection||e.Node||e.Value))return Object.assign({Alias:e.Node,Map:e.Node,Scalar:e.Node,Seq:e.Node},e.Value&&{Map:e.Value,Scalar:e.Value,Seq:e.Value},e.Collection&&{Map:e.Collection,Seq:e.Collection},e);return e}(t);if(Su(e)){ju(null,e.contents,n,Object.freeze([e]))===Pu&&(e.contents=null)}else ju(null,e,n,Object.freeze([]))}function ju(e,t,n,s){const o=function(e,t,n,s){return'function'==typeof n?n(e,t,s):xu(t)?n.Map?.(e,t,s):Cu(t)?n.Seq?.(e,t,s):Eu(t)?n.Pair?.(e,t,s):Tu(t)?n.Scalar?.(e,t,s):ku(t)?n.Alias?.(e,t,s):void 0}(e,t,n,s);if(Ou(o)||Eu(o))return function(e,t,n){const s=t[t.length-1];if(Nu(s))s.items[e]=n;else if(Eu(s))'key'===e?s.key=n:s.value=n;else{if(!Su(s)){const e=ku(s)?'alias':'scalar';throw new Error(`Cannot replace node with ${e} parent`)}s.contents=n}}(e,s,o),ju(e,o,n,s);if('symbol'!=typeof o)if(Nu(t)){s=Object.freeze(s.concat(t));for(let e=0;e<t.items.length;++e){const o=ju(e,t.items[e],n,s);if('number'==typeof o)e=o-1;else{if(o===Iu)return Iu;o===Pu&&(t.items.splice(e,1),e-=1)}}}else if(Eu(t)){s=Object.freeze(s.concat(t));const e=ju('key',t.key,n,s);if(e===Iu)return Iu;e===Pu&&(t.key=null);const o=ju('value',t.value,n,s);if(o===Iu)return Iu;o===Pu&&(t.value=null)}return o}Du.BREAK=Iu,Du.SKIP=$u,Du.REMOVE=Pu;const zu={'!':'%21',',':'%2C','[':'%5B',']':'%5D','{':'%7B','}':'%7D'},Lu=e=>e.replace(/[!,[\]{}]/g,e=>zu[e]);class Mu{constructor(e,t){this.docStart=null,this.docEnd=!1,this.yaml=Object.assign({},Mu.defaultYaml,e),this.tags=Object.assign({},Mu.defaultTags,t)}clone(){const e=new Mu(this.yaml,this.tags);return e.docStart=this.docStart,e}atDocument(){const e=new Mu(this.yaml,this.tags);switch(this.yaml.version){case'1.1':this.atNextDocument=!0;break;case'1.2':this.atNextDocument=!1,this.yaml={explicit:Mu.defaultYaml.explicit,version:'1.2'},this.tags=Object.assign({},Mu.defaultTags)}return e}add(e,t){this.atNextDocument&&(this.yaml={explicit:Mu.defaultYaml.explicit,version:'1.1'},this.tags=Object.assign({},Mu.defaultTags),this.atNextDocument=!1);const n=e.trim().split(/[ \t]+/),s=n.shift();switch(s){case'%TAG':{if(2!==n.length&&(t(0,'%TAG directive should contain exactly two parts'),n.length<2))return!1;const[e,s]=n;return this.tags[e]=s,!0}case'%YAML':{if(this.yaml.explicit=!0,1!==n.length)return t(0,'%YAML directive should contain exactly one part'),!1;const[e]=n;if('1.1'===e||'1.2'===e)return this.yaml.version=e,!0;return t(6,`Unsupported YAML version ${e}`,/^\d+\.\d+$/.test(e)),!1}default:return t(0,`Unknown directive ${s}`,!0),!1}}tagName(e,t){if('!'===e)return'!';if('!'!==e[0])return t(`Not a valid tag: ${e}`),null;if('<'===e[1]){const n=e.slice(2,-1);return'!'===n||'!!'===n?(t(`Verbatim tags aren't resolved, so ${e} is invalid.`),null):('>'!==e[e.length-1]&&t('Verbatim tags must end with a >'),n)}const[,n,s]=e.match(/^(.*!)([^!]*)$/s);s||t(`The ${e} tag has no suffix`);const o=this.tags[n];if(o)try{return o+decodeURIComponent(s)}catch(i){return t(String(i)),null}return'!'===n?e:(t(`Could not resolve tag: ${e}`),null)}tagString(e){for(const[t,n]of Object.entries(this.tags))if(e.startsWith(n))return t+Lu(e.substring(n.length));return'!'===e[0]?e:`!<${e}>`}toString(e){const t=this.yaml.explicit?[`%YAML ${this.yaml.version||'1.2'}`]:[],n=Object.entries(this.tags);let s;if(e&&n.length>0&&Ou(e.contents)){const t={};Du(e.contents,(e,n)=>{Ou(n)&&n.tag&&(t[n.tag]=!0)}),s=Object.keys(t)}else s=[];for(const[o,i]of n)'!!'===o&&'tag:yaml.org,2002:'===i||e&&!s.some(e=>e.startsWith(i))||t.push(`%TAG ${o} ${i}`);return t.join('\n')}}function Fu(e){if(/[\x00-\x19\s,[\]{}]/.test(e)){const t=JSON.stringify(e);throw new Error(`Anchor must not contain whitespace or control characters: ${t}`)}return!0}function Ru(e){const t=new Set;return Du(e,{Value(e,n){n.anchor&&t.add(n.anchor)}}),t}function Bu(e,t){for(let n=1;;++n){const s=`${e}${n}`;if(!t.has(s))return s}}function Uu(e,t,n,s){if(s&&'object'==typeof s)if(Array.isArray(s))for(let o=0,i=s.length;o<i;++o){const t=s[o],n=Uu(e,s,String(o),t);void 0===n?delete s[o]:n!==t&&(s[o]=n)}else if(s instanceof Map)for(const o of Array.from(s.keys())){const t=s.get(o),n=Uu(e,s,o,t);void 0===n?s.delete(o):n!==t&&s.set(o,n)}else if(s instanceof Set)for(const o of Array.from(s)){const t=Uu(e,s,o,o);void 0===t?s.delete(o):t!==o&&(s.delete(o),s.add(t))}else for(const[o,i]of Object.entries(s)){const t=Uu(e,s,o,i);void 0===t?delete s[o]:t!==i&&(s[o]=t)}return e.call(t,n,s)}function Vu(e,t,n){if(Array.isArray(e))return e.map((e,t)=>Vu(e,String(t),n));if(e&&'function'==typeof e.toJSON){if(!n||!Au(e))return e.toJSON(t,n);const s={aliasCount:0,count:1,res:void 0};n.anchors.set(e,s),n.onCreate=e=>{s.res=e,delete n.onCreate};const o=e.toJSON(t,n);return n.onCreate&&n.onCreate(o),o}return'bigint'!=typeof e||n?.keep?e:Number(e)}Mu.defaultYaml={explicit:!1,version:'1.2'},Mu.defaultTags={'!!':'tag:yaml.org,2002:'};class Ku{constructor(e){Object.defineProperty(this,wu,{value:e})}clone(){const e=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return this.range&&(e.range=this.range.slice()),e}toJS(e,{mapAsMap:t,maxAliasCount:n,onAnchor:s,reviver:o}={}){if(!Su(e))throw new TypeError('A document argument is required');const i={anchors:new Map,doc:e,keep:!0,mapAsMap:!0===t,mapKeyWarned:!1,maxAliasCount:'number'==typeof n?n:100},r=Vu(this,'',i);if('function'==typeof s)for(const{count:a,res:l}of i.anchors.values())s(l,a);return'function'==typeof o?Uu(o,{'':r},'',r):r}}class Zu extends Ku{constructor(e){super(mu),this.source=e,Object.defineProperty(this,'tag',{set(){throw new Error('Alias nodes cannot have tags')}})}resolve(e,t){let n,s;t?.aliasResolveCache?n=t.aliasResolveCache:(n=[],Du(e,{Node:(e,t)=>{(ku(t)||Au(t))&&n.push(t)}}),t&&(t.aliasResolveCache=n));for(const o of n){if(o===this)break;o.anchor===this.source&&(s=o)}return s}toJSON(e,t){if(!t)return{source:this.source};const{anchors:n,doc:s,maxAliasCount:o}=t,i=this.resolve(s,t);if(!i){const e=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new ReferenceError(e)}let r=n.get(i);if(r||(Vu(i,null,t),r=n.get(i)),void 0===r?.res){throw new ReferenceError('This should not happen: Alias anchor was not resolved?')}if(o>=0&&(r.count+=1,0===r.aliasCount&&(r.aliasCount=qu(s,i,n)),r.count*r.aliasCount>o)){throw new ReferenceError('Excessive alias count indicates a resource exhaustion attack')}return r.res}toString(e,t,n){const s=`*${this.source}`;if(e){if(Fu(this.source),e.options.verifyAliasOrder&&!e.anchors.has(this.source)){const e=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new Error(e)}if(e.implicitKey)return`${s} `}return s}}function qu(e,t,n){if(ku(t)){const s=t.resolve(e),o=n&&s&&n.get(s);return o?o.count*o.aliasCount:0}if(Nu(t)){let s=0;for(const o of t.items){const t=qu(e,o,n);t>s&&(s=t)}return s}if(Eu(t)){const s=qu(e,t.key,n),o=qu(e,t.value,n);return Math.max(s,o)}return 1}const Wu=e=>!e||'function'!=typeof e&&'object'!=typeof e;class Yu extends Ku{constructor(e){super(bu),this.value=e}toJSON(e,t){return t?.keep?this.value:Vu(this.value,e,t)}toString(){return String(this.value)}}Yu.BLOCK_FOLDED='BLOCK_FOLDED',Yu.BLOCK_LITERAL='BLOCK_LITERAL',Yu.PLAIN='PLAIN',Yu.QUOTE_DOUBLE='QUOTE_DOUBLE',Yu.QUOTE_SINGLE='QUOTE_SINGLE';function Hu(e,t,n){if(Su(e)&&(e=e.contents),Ou(e))return e;if(Eu(e)){const t=n.schema[vu].createNode?.(n.schema,null,n);return t.items.push(e),t}(e instanceof String||e instanceof Number||e instanceof Boolean||'undefined'!=typeof BigInt&&e instanceof BigInt)&&(e=e.valueOf());const{aliasDuplicateObjects:s,onAnchor:o,onTagObj:i,schema:r,sourceObjects:a}=n;let l;if(s&&e&&'object'==typeof e){if(l=a.get(e),l)return l.anchor??(l.anchor=o(e)),new Zu(l.anchor);l={anchor:null,node:null},a.set(e,l)}t?.startsWith('!!')&&(t='tag:yaml.org,2002:'+t.slice(2));let c=function(e,t,n){if(t){const e=n.filter(e=>e.tag===t),s=e.find(e=>!e.format)??e[0];if(!s)throw new Error(`Tag ${t} not found`);return s}return n.find(t=>t.identify?.(e)&&!t.format)}(e,t,r.tags);if(!c){if(e&&'function'==typeof e.toJSON&&(e=e.toJSON()),!e||'object'!=typeof e){const t=new Yu(e);return l&&(l.node=t),t}c=e instanceof Map?r[vu]:Symbol.iterator in Object(e)?r[_u]:r[vu]}i&&(i(c),delete n.onTagObj);const u=c?.createNode?c.createNode(n.schema,e,n):'function'==typeof c?.nodeClass?.from?c.nodeClass.from(n.schema,e,n):new Yu(e);return t?u.tag=t:c.default||(u.tag=c.tag),l&&(l.node=u),u}function Gu(e,t,n){let s=n;for(let o=t.length-1;o>=0;--o){const e=t[o];if('number'==typeof e&&Number.isInteger(e)&&e>=0){const t=[];t[e]=s,s=t}else s=new Map([[e,s]])}return Hu(s,void 0,{aliasDuplicateObjects:!1,keepUndefined:!1,onAnchor:()=>{throw new Error('This should not happen, please report a bug.')},schema:e,sourceObjects:new Map})}const Ju=e=>null==e||'object'==typeof e&&!!e[Symbol.iterator]().next().done;class Xu extends Ku{constructor(e,t){super(e),Object.defineProperty(this,'schema',{value:t,configurable:!0,enumerable:!1,writable:!0})}clone(e){const t=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return e&&(t.schema=e),t.items=t.items.map(t=>Ou(t)||Eu(t)?t.clone(e):t),this.range&&(t.range=this.range.slice()),t}addIn(e,t){if(Ju(e))this.add(t);else{const[n,...s]=e,o=this.get(n,!0);if(Nu(o))o.addIn(s,t);else{if(void 0!==o||!this.schema)throw new Error(`Expected YAML collection at ${n}. Remaining path: ${s}`);this.set(n,Gu(this.schema,s,t))}}}deleteIn(e){const[t,...n]=e;if(0===n.length)return this.delete(t);const s=this.get(t,!0);if(Nu(s))return s.deleteIn(n);throw new Error(`Expected YAML collection at ${t}. Remaining path: ${n}`)}getIn(e,t){const[n,...s]=e,o=this.get(n,!0);return 0===s.length?!t&&Tu(o)?o.value:o:Nu(o)?o.getIn(s,t):void 0}hasAllNullValues(e){return this.items.every(t=>{if(!Eu(t))return!1;const n=t.value;return null==n||e&&Tu(n)&&null==n.value&&!n.commentBefore&&!n.comment&&!n.tag})}hasIn(e){const[t,...n]=e;if(0===n.length)return this.has(t);const s=this.get(t,!0);return!!Nu(s)&&s.hasIn(n)}setIn(e,t){const[n,...s]=e;if(0===s.length)this.set(n,t);else{const e=this.get(n,!0);if(Nu(e))e.setIn(s,t);else{if(void 0!==e||!this.schema)throw new Error(`Expected YAML collection at ${n}. Remaining path: ${s}`);this.set(n,Gu(this.schema,s,t))}}}}const Qu=e=>e.replace(/^(?!$)(?: $)?/gm,'#');function ed(e,t){return/^\n+$/.test(e)?e.substring(1):t?e.replace(/^(?! *$)/gm,t):e}const td=(e,t,n)=>e.endsWith('\n')?ed(n,t):n.includes('\n')?'\n'+ed(n,t):(e.endsWith(' ')?'':' ')+n,nd='flow',sd='block',od='quoted';function id(e,t,n='flow',{indentAtStart:s,lineWidth:o=80,minContentWidth:i=20,onFold:r,onOverflow:a}={}){if(!o||o<0)return e;o<i&&(i=0);const l=Math.max(1+i,1+o-t.length);if(e.length<=l)return e;const c=[],u={};let d,f,p=o-t.length;'number'==typeof s&&(s>o-Math.max(2,i)?c.push(0):p=o-s);let h=!1,m=-1,g=-1,v=-1;n===sd&&(m=rd(e,m,t.length),-1!==m&&(p=m+l));for(let b;b=e[m+=1];){if(n===od&&'\\'===b){switch(g=m,e[m+1]){case'x':m+=3;break;case'u':m+=5;break;case'U':m+=9;break;default:m+=1}v=m}if('\n'===b)n===sd&&(m=rd(e,m,t.length)),p=m+t.length+l,d=void 0;else{if(' '===b&&f&&' '!==f&&'\n'!==f&&'\t'!==f){const t=e[m+1];t&&' '!==t&&'\n'!==t&&'\t'!==t&&(d=m)}if(m>=p)if(d)c.push(d),p=d+l,d=void 0;else if(n===od){for(;' '===f||'\t'===f;)f=b,b=e[m+=1],h=!0;const t=m>v+1?m-2:g-1;if(u[t])return e;c.push(t),u[t]=!0,p=t+l,d=void 0}else h=!0}f=b}if(h&&a&&a(),0===c.length)return e;r&&r();let y=e.slice(0,c[0]);for(let b=0;b<c.length;++b){const s=c[b],o=c[b+1]||e.length;0===s?y=`\n${t}${e.slice(0,o)}`:(n===od&&u[s]&&(y+=`${e[s]}\\`),y+=`\n${t}${e.slice(s+1,o)}`)}return y}function rd(e,t,n){let s=t,o=t+1,i=e[o];for(;' '===i||'\t'===i;)if(t<o+n)i=e[++t];else{do{i=e[++t]}while(i&&'\n'!==i);s=t,o=t+1,i=e[o]}return s}const ad=(e,t)=>({indentAtStart:t?e.indent.length:e.indentAtStart,lineWidth:e.options.lineWidth,minContentWidth:e.options.minContentWidth}),ld=e=>/^(%|---|\.\.\.)/m.test(e);function cd(e,t){const n=JSON.stringify(e);if(t.options.doubleQuotedAsJSON)return n;const{implicitKey:s}=t,o=t.options.doubleQuotedMinMultiLineLength,i=t.indent||(ld(e)?'  ':'');let r='',a=0;for(let l=0,c=n[l];c;c=n[++l])if(' '===c&&'\\'===n[l+1]&&'n'===n[l+2]&&(r+=n.slice(a,l)+'\\ ',l+=1,a=l,c='\\'),'\\'===c)switch(n[l+1]){case'u':{r+=n.slice(a,l);const e=n.substr(l+2,4);switch(e){case'0000':r+='\\0';break;case'0007':r+='\\a';break;case'000b':r+='\\v';break;case'001b':r+='\\e';break;case'0085':r+='\\N';break;case'00a0':r+='\\_';break;case'2028':r+='\\L';break;case'2029':r+='\\P';break;default:'00'===e.substr(0,2)?r+='\\x'+e.substr(2):r+=n.substr(l,6)}l+=5,a=l+1}break;case'n':if(s||'"'===n[l+2]||n.length<o)l+=1;else{for(r+=n.slice(a,l)+'\n\n';'\\'===n[l+2]&&'n'===n[l+3]&&'"'!==n[l+4];)r+='\n',l+=2;r+=i,' '===n[l+2]&&(r+='\\'),l+=1,a=l+1}break;default:l+=1}return r=a?r+n.slice(a):n,s?r:id(r,i,od,ad(t,!1))}function ud(e,t){if(!1===t.options.singleQuote||t.implicitKey&&e.includes('\n')||/[ \t]\n|\n[ \t]/.test(e))return cd(e,t);const n=t.indent||(ld(e)?'  ':''),s='\''+e.replace(/'/g,'\'\'').replace(/\n+/g,`$&\n${n}`)+'\'';return t.implicitKey?s:id(s,n,nd,ad(t,!1))}function dd(e,t){const{singleQuote:n}=t.options;let s;if(!1===n)s=cd;else{const t=e.includes('"'),o=e.includes('\'');s=t&&!o?ud:o&&!t?cd:n?ud:cd}return s(e,t)}let fd;try{fd=new RegExp('(^|(?<!\n))\n+(?!\n|$)','g')}catch{fd=/\n+(?!\n|$)/g}function pd({comment:e,type:t,value:n},s,o,i){const{blockQuote:r,commentString:a,lineWidth:l}=s.options;if(!r||/\n[\t ]+$/.test(n))return dd(n,s);const c=s.indent||(s.forceBlockIndent||ld(n)?'  ':''),u='literal'===r||'folded'!==r&&t!==Yu.BLOCK_FOLDED&&(t===Yu.BLOCK_LITERAL||!function(e,t,n){if(!t||t<0)return!1;const s=t-n,o=e.length;if(o<=s)return!1;for(let i=0,r=0;i<o;++i)if('\n'===e[i]){if(i-r>s)return!0;if(r=i+1,o-r<=s)return!1}return!0}(n,l,c.length));if(!n)return u?'|\n':'>\n';let d,f;for(f=n.length;f>0;--f){const e=n[f-1];if('\n'!==e&&'\t'!==e&&' '!==e)break}let p=n.substring(f);const h=p.indexOf('\n');-1===h?d='-':n===p||h!==p.length-1?(d='+',i&&i()):d='',p&&(n=n.slice(0,-p.length),'\n'===p[p.length-1]&&(p=p.slice(0,-1)),p=p.replace(fd,`$&${c}`));let m,g=!1,v=-1;for(m=0;m<n.length;++m){const e=n[m];if(' '===e)g=!0;else{if('\n'!==e)break;v=m}}let y=n.substring(0,v<m?v+1:m);y&&(n=n.substring(y.length),y=y.replace(/\n+/g,`$&${c}`));let b=(g?c?'2':'1':'')+d;if(e&&(b+=' '+a(e.replace(/ ?[\r\n]+/g,' ')),o&&o()),!u){const e=n.replace(/\n+/g,'\n$&').replace(/(?:^|\n)([\t ].*)(?:([\n\t ]*)\n(?![\n\t ]))?/g,'$1$2').replace(/\n+/g,`$&${c}`);let o=!1;const i=ad(s,!0);'folded'!==r&&t!==Yu.BLOCK_FOLDED&&(i.onOverflow=()=>{o=!0});const a=id(`${y}${e}${p}`,c,sd,i);if(!o)return`>${b}\n${c}${a}`}return`|${b}\n${c}${y}${n=n.replace(/\n+/g,`$&${c}`)}${p}`}function hd(e,t,n,s){const{implicitKey:o,inFlow:i}=t,r='string'==typeof e.value?e:Object.assign({},e,{value:String(e.value)});let{type:a}=e;a!==Yu.QUOTE_DOUBLE&&/[\x00-\x08\x0b-\x1f\x7f-\x9f\u{D800}-\u{DFFF}]/u.test(r.value)&&(a=Yu.QUOTE_DOUBLE);const l=e=>{switch(e){case Yu.BLOCK_FOLDED:case Yu.BLOCK_LITERAL:return o||i?dd(r.value,t):pd(r,t,n,s);case Yu.QUOTE_DOUBLE:return cd(r.value,t);case Yu.QUOTE_SINGLE:return ud(r.value,t);case Yu.PLAIN:return function(e,t,n,s){const{type:o,value:i}=e,{actualString:r,implicitKey:a,indent:l,indentStep:c,inFlow:u}=t;if(a&&i.includes('\n')||u&&/[[\]{},]/.test(i))return dd(i,t);if(/^[\n\t ,[\]{}#&*!|>'"%@`]|^[?-]$|^[?-][ \t]|[\n:][ \t]|[ \t]\n|[\n\t ]#|[\n\t :]$/.test(i))return a||u||!i.includes('\n')?dd(i,t):pd(e,t,n,s);if(!a&&!u&&o!==Yu.PLAIN&&i.includes('\n'))return pd(e,t,n,s);if(ld(i)){if(''===l)return t.forceBlockIndent=!0,pd(e,t,n,s);if(a&&l===c)return dd(i,t)}const d=i.replace(/\n+/g,`$&\n${l}`);if(r){const e=e=>e.default&&'tag:yaml.org,2002:str'!==e.tag&&e.test?.test(d),{compat:n,tags:s}=t.doc.schema;if(s.some(e)||n?.some(e))return dd(i,t)}return a?d:id(d,l,nd,ad(t,!1))}(r,t,n,s);default:return null}};let c=l(a);if(null===c){const{defaultKeyType:e,defaultStringType:n}=t.options,s=o&&e||n;if(c=l(s),null===c)throw new Error(`Unsupported default string type ${s}`)}return c}function md(e,t){const n=Object.assign({blockQuote:!0,commentString:Qu,defaultKeyType:null,defaultStringType:'PLAIN',directives:null,doubleQuotedAsJSON:!1,doubleQuotedMinMultiLineLength:40,falseStr:'false',flowCollectionPadding:!0,indentSeq:!0,lineWidth:80,minContentWidth:20,nullStr:'null',simpleKeys:!1,singleQuote:null,trueStr:'true',verifyAliasOrder:!0},e.schema.toStringOptions,t);let s;switch(n.collectionStyle){case'block':s=!1;break;case'flow':s=!0;break;default:s=null}return{anchors:new Set,doc:e,flowCollectionPadding:n.flowCollectionPadding?' ':'',indent:'',indentStep:'number'==typeof n.indent?' '.repeat(n.indent):'  ',inFlow:s,options:n}}function gd(e,t,n,s){if(Eu(e))return e.toString(t,n,s);if(ku(e)){if(t.doc.directives)return e.toString(t);if(t.resolvedAliases?.has(e))throw new TypeError('Cannot stringify circular structure without alias nodes');t.resolvedAliases?t.resolvedAliases.add(e):t.resolvedAliases=new Set([e]),e=e.resolve(t.doc)}let o;const i=Ou(e)?e:t.doc.createNode(e,{onTagObj:e=>o=e});o??(o=function(e,t){if(t.tag){const n=e.filter(e=>e.tag===t.tag);if(n.length>0)return n.find(e=>e.format===t.format)??n[0]}let n,s;if(Tu(t)){s=t.value;let o=e.filter(e=>e.identify?.(s));if(o.length>1){const e=o.filter(e=>e.test);e.length>0&&(o=e)}n=o.find(e=>e.format===t.format)??o.find(e=>!e.format)}else s=t,n=e.find(e=>e.nodeClass&&s instanceof e.nodeClass);if(!n)throw new Error(`Tag not resolved for ${s?.constructor?.name??(null===s?'null':typeof s)} value`);return n}(t.doc.schema.tags,i));const r=function(e,t,{anchors:n,doc:s}){if(!s.directives)return'';const o=[],i=(Tu(e)||Nu(e))&&e.anchor;i&&Fu(i)&&(n.add(i),o.push(`&${i}`));const r=e.tag??(t.default?null:t.tag);return r&&o.push(s.directives.tagString(r)),o.join(' ')}(i,o,t);r.length>0&&(t.indentAtStart=(t.indentAtStart??0)+r.length+1);const a='function'==typeof o.stringify?o.stringify(i,t,n,s):Tu(i)?hd(i,t,n,s):i.toString(t,n,s);return r?Tu(i)||'{'===a[0]||'['===a[0]?`${r} ${a}`:`${r}\n${t.indent}${a}`:a}function vd(e,t){'debug'!==e&&'warn'!==e||console.warn(t)}const yd='<<',bd={identify:e=>e===yd||'symbol'==typeof e&&e.description===yd,default:'key',tag:'tag:yaml.org,2002:merge',test:/^<<$/,resolve:()=>Object.assign(new Yu(Symbol(yd)),{addToJSMap:_d}),stringify:()=>yd};function _d(e,t,n){if(n=e&&ku(n)?n.resolve(e.doc):n,Cu(n))for(const s of n.items)wd(e,t,s);else if(Array.isArray(n))for(const s of n)wd(e,t,s);else wd(e,t,n)}function wd(e,t,n){const s=e&&ku(n)?n.resolve(e.doc):n;if(!xu(s))throw new Error('Merge sources must be maps or map aliases');const o=s.toJSON(null,e,Map);for(const[i,r]of o)t instanceof Map?t.has(i)||t.set(i,r):t instanceof Set?t.add(i):Object.prototype.hasOwnProperty.call(t,i)||Object.defineProperty(t,i,{value:r,writable:!0,enumerable:!0,configurable:!0});return t}function kd(e,t,{key:n,value:s}){if(Ou(n)&&n.addToJSMap)n.addToJSMap(e,t,s);else if(((e,t)=>(bd.identify(t)||Tu(t)&&(!t.type||t.type===Yu.PLAIN)&&bd.identify(t.value))&&e?.doc.schema.tags.some(e=>e.tag===bd.tag&&e.default))(e,n))_d(e,t,s);else{const o=Vu(n,'',e);if(t instanceof Map)t.set(o,Vu(s,o,e));else if(t instanceof Set)t.add(o);else{const i=function(e,t,n){if(null===t)return'';if('object'!=typeof t)return String(t);if(Ou(e)&&n?.doc){const t=md(n.doc,{});t.anchors=new Set;for(const e of n.anchors.keys())t.anchors.add(e.anchor);t.inFlow=!0,t.inStringifyKey=!0;const s=e.toString(t);if(!n.mapKeyWarned){let e=JSON.stringify(s);e.length>40&&(e=e.substring(0,36)+'..."'),vd(n.doc.options.logLevel,`Keys with collection values will be stringified due to JS Object restrictions: ${e}. Set mapAsMap: true to use object keys.`),n.mapKeyWarned=!0}return s}return JSON.stringify(t)}(n,o,e),r=Vu(s,i,e);i in t?Object.defineProperty(t,i,{value:r,writable:!0,enumerable:!0,configurable:!0}):t[i]=r}}return t}function Sd(e,t,n){const s=Hu(e,void 0,n),o=Hu(t,void 0,n);return new xd(s,o)}class xd{constructor(e,t=null){Object.defineProperty(this,wu,{value:yu}),this.key=e,this.value=t}clone(e){let{key:t,value:n}=this;return Ou(t)&&(t=t.clone(e)),Ou(n)&&(n=n.clone(e)),new xd(t,n)}toJSON(_,e){return kd(e,e?.mapAsMap?new Map:{},this)}toString(e,t,n){return e?.doc?function({key:e,value:t},n,s,o){const{allNullValues:i,doc:r,indent:a,indentStep:l,options:{commentString:c,indentSeq:u,simpleKeys:d}}=n;let f=Ou(e)&&e.comment||null;if(d){if(f)throw new Error('With simple keys, key nodes cannot have comments');if(Nu(e)||!Ou(e)&&'object'==typeof e)throw new Error('With simple keys, collection cannot be used as a key value')}let p=!d&&(!e||f&&null==t&&!n.inFlow||Nu(e)||(Tu(e)?e.type===Yu.BLOCK_FOLDED||e.type===Yu.BLOCK_LITERAL:'object'==typeof e));n=Object.assign({},n,{allNullValues:!1,implicitKey:!p&&(d||!i),indent:a+l});let h,m,g,v=!1,y=!1,b=gd(e,n,()=>v=!0,()=>y=!0);if(!p&&!n.inFlow&&b.length>1024){if(d)throw new Error('With simple keys, single line scalar must not span more than 1024 characters');p=!0}if(n.inFlow){if(i||null==t)return v&&s&&s(),''===b?'?':p?`? ${b}`:b}else if(i&&!d||null==t&&p)return b=`? ${b}`,f&&!v?b+=td(b,n.indent,c(f)):y&&o&&o(),b;v&&(f=null),p?(f&&(b+=td(b,n.indent,c(f))),b=`? ${b}\n${a}:`):(b=`${b}:`,f&&(b+=td(b,n.indent,c(f)))),Ou(t)?(h=!!t.spaceBefore,m=t.commentBefore,g=t.comment):(h=!1,m=null,g=null,t&&'object'==typeof t&&(t=r.createNode(t))),n.implicitKey=!1,p||f||!Tu(t)||(n.indentAtStart=b.length+1),y=!1,u||!(l.length>=2)||n.inFlow||p||!Cu(t)||t.flow||t.tag||t.anchor||(n.indent=n.indent.substring(2));let w=!1;const k=gd(t,n,()=>w=!0,()=>y=!0);let S=' ';if(f||h||m)S=h?'\n':'',m&&(S+=`\n${ed(c(m),n.indent)}`),''!==k||n.inFlow?S+=`\n${n.indent}`:'\n'===S&&g&&(S='\n\n');else if(!p&&Nu(t)){const e=k[0],s=k.indexOf('\n'),o=-1!==s,i=n.inFlow??t.flow??0===t.items.length;if(o||!i){let t=!1;if(o&&('&'===e||'!'===e)){let n=k.indexOf(' ');'&'===e&&-1!==n&&n<s&&'!'===k[n+1]&&(n=k.indexOf(' ',n+1)),(-1===n||s<n)&&(t=!0)}t||(S=`\n${n.indent}`)}}else''!==k&&'\n'!==k[0]||(S='');return b+=S+k,n.inFlow?w&&s&&s():g&&!w?b+=td(b,n.indent,c(g)):y&&o&&o(),b}(this,e,t,n):JSON.stringify(this)}}function Ed(e,t,n){return(t.inFlow??e.flow?Cd:Td)(e,t,n)}function Td({comment:e,items:t},n,{blockItemPrefix:s,flowChars:o,itemIndent:i,onChompKeep:r,onComment:a}){const{indent:l,options:{commentString:c}}=n,u=Object.assign({},n,{indent:i,type:null});let d=!1;const f=[];for(let h=0;h<t.length;++h){const e=t[h];let o=null;if(Ou(e))!d&&e.spaceBefore&&f.push(''),Nd(n,f,e.commentBefore,d),e.comment&&(o=e.comment);else if(Eu(e)){const t=Ou(e.key)?e.key:null;t&&(!d&&t.spaceBefore&&f.push(''),Nd(n,f,t.commentBefore,d))}d=!1;let r=gd(e,u,()=>o=null,()=>d=!0);o&&(r+=td(r,i,c(o))),d&&o&&(d=!1),f.push(s+r)}let p;if(0===f.length)p=o.start+o.end;else{p=f[0];for(let e=1;e<f.length;++e){const t=f[e];p+=t?`\n${l}${t}`:'\n'}}return e?(p+='\n'+ed(c(e),l),a&&a()):d&&r&&r(),p}function Cd({items:e},t,{flowChars:n,itemIndent:s}){const{indent:o,indentStep:i,flowCollectionPadding:r,options:{commentString:a}}=t;s+=i;const l=Object.assign({},t,{indent:s,inFlow:!0,type:null});let c=!1,u=0;const d=[];for(let h=0;h<e.length;++h){const n=e[h];let o=null;if(Ou(n))n.spaceBefore&&d.push(''),Nd(t,d,n.commentBefore,!1),n.comment&&(o=n.comment);else if(Eu(n)){const e=Ou(n.key)?n.key:null;e&&(e.spaceBefore&&d.push(''),Nd(t,d,e.commentBefore,!1),e.comment&&(c=!0));const s=Ou(n.value)?n.value:null;s?(s.comment&&(o=s.comment),s.commentBefore&&(c=!0)):null==n.value&&e?.comment&&(o=e.comment)}o&&(c=!0);let i=gd(n,l,()=>o=null);h<e.length-1&&(i+=','),o&&(i+=td(i,s,a(o))),!c&&(d.length>u||i.includes('\n'))&&(c=!0),d.push(i),u=d.length}const{start:f,end:p}=n;if(0===d.length)return f+p;if(!c){const e=d.reduce((e,t)=>e+t.length+2,2);c=t.options.lineWidth>0&&e>t.options.lineWidth}if(c){let e=f;for(const t of d)e+=t?`\n${i}${o}${t}`:'\n';return`${e}\n${o}${p}`}return`${f}${r}${d.join(' ')}${r}${p}`}function Nd({indent:e,options:{commentString:t}},n,s,o){if(s&&o&&(s=s.replace(/^\n+/,'')),s){const o=ed(t(s),e);n.push(o.trimStart())}}function Od(e,t){const n=Tu(t)?t.value:t;for(const s of e)if(Eu(s)){if(s.key===t||s.key===n)return s;if(Tu(s.key)&&s.key.value===n)return s}}class Ad extends Xu{static get tagName(){return'tag:yaml.org,2002:map'}constructor(e){super(vu,e),this.items=[]}static from(e,t,n){const{keepUndefined:s,replacer:o}=n,i=new this(e),r=(e,r)=>{if('function'==typeof o)r=o.call(t,e,r);else if(Array.isArray(o)&&!o.includes(e))return;(void 0!==r||s)&&i.items.push(Sd(e,r,n))};if(t instanceof Map)for(const[a,l]of t)r(a,l);else if(t&&'object'==typeof t)for(const a of Object.keys(t))r(a,t[a]);return'function'==typeof e.sortMapEntries&&i.items.sort(e.sortMapEntries),i}add(e,t){let n;n=Eu(e)?e:e&&'object'==typeof e&&'key'in e?new xd(e.key,e.value):new xd(e,e?.value);const s=Od(this.items,n.key),o=this.schema?.sortMapEntries;if(s){if(!t)throw new Error(`Key ${n.key} already set`);Tu(s.value)&&Wu(n.value)?s.value.value=n.value:s.value=n.value}else if(o){const e=this.items.findIndex(e=>o(n,e)<0);-1===e?this.items.push(n):this.items.splice(e,0,n)}else this.items.push(n)}delete(e){const t=Od(this.items,e);if(!t)return!1;return this.items.splice(this.items.indexOf(t),1).length>0}get(e,t){const n=Od(this.items,e),s=n?.value;return(!t&&Tu(s)?s.value:s)??void 0}has(e){return!!Od(this.items,e)}set(e,t){this.add(new xd(e,t),!0)}toJSON(_,e,t){const n=t?new t:e?.mapAsMap?new Map:{};e?.onCreate&&e.onCreate(n);for(const s of this.items)kd(e,n,s);return n}toString(e,t,n){if(!e)return JSON.stringify(this);for(const s of this.items)if(!Eu(s))throw new Error(`Map items must all be pairs; found ${JSON.stringify(s)} instead`);return!e.allNullValues&&this.hasAllNullValues(!1)&&(e=Object.assign({},e,{allNullValues:!0})),Ed(this,e,{blockItemPrefix:'',flowChars:{start:'{',end:'}'},itemIndent:e.indent||'',onChompKeep:n,onComment:t})}}const Id={collection:'map',default:!0,nodeClass:Ad,tag:'tag:yaml.org,2002:map',resolve:(e,t)=>(xu(e)||t('Expected a mapping for this tag'),e),createNode:(e,t,n)=>Ad.from(e,t,n)};class $d extends Xu{static get tagName(){return'tag:yaml.org,2002:seq'}constructor(e){super(_u,e),this.items=[]}add(e){this.items.push(e)}delete(e){const t=Pd(e);if('number'!=typeof t)return!1;return this.items.splice(t,1).length>0}get(e,t){const n=Pd(e);if('number'!=typeof n)return;const s=this.items[n];return!t&&Tu(s)?s.value:s}has(e){const t=Pd(e);return'number'==typeof t&&t<this.items.length}set(e,t){const n=Pd(e);if('number'!=typeof n)throw new Error(`Expected a valid index, not ${e}.`);const s=this.items[n];Tu(s)&&Wu(t)?s.value=t:this.items[n]=t}toJSON(_,e){const t=[];e?.onCreate&&e.onCreate(t);let n=0;for(const s of this.items)t.push(Vu(s,String(n++),e));return t}toString(e,t,n){return e?Ed(this,e,{blockItemPrefix:'- ',flowChars:{start:'[',end:']'},itemIndent:(e.indent||'')+'  ',onChompKeep:n,onComment:t}):JSON.stringify(this)}static from(e,t,n){const{replacer:s}=n,o=new this(e);if(t&&Symbol.iterator in Object(t)){let e=0;for(let i of t){if('function'==typeof s){const n=t instanceof Set?i:String(e++);i=s.call(t,n,i)}o.items.push(Hu(i,void 0,n))}}return o}}function Pd(e){let t=Tu(e)?e.value:e;return t&&'string'==typeof t&&(t=Number(t)),'number'==typeof t&&Number.isInteger(t)&&t>=0?t:null}const Dd={collection:'seq',default:!0,nodeClass:$d,tag:'tag:yaml.org,2002:seq',resolve:(e,t)=>(Cu(e)||t('Expected a sequence for this tag'),e),createNode:(e,t,n)=>$d.from(e,t,n)},jd={identify:e=>'string'==typeof e,default:!0,tag:'tag:yaml.org,2002:str',resolve:e=>e,stringify:(e,t,n,s)=>hd(e,t=Object.assign({actualString:!0},t),n,s)},zd={identify:e=>null==e,createNode:()=>new Yu(null),default:!0,tag:'tag:yaml.org,2002:null',test:/^(?:~|[Nn]ull|NULL)?$/,resolve:()=>new Yu(null),stringify:({source:e},t)=>'string'==typeof e&&zd.test.test(e)?e:t.options.nullStr},Ld={identify:e=>'boolean'==typeof e,default:!0,tag:'tag:yaml.org,2002:bool',test:/^(?:[Tt]rue|TRUE|[Ff]alse|FALSE)$/,resolve:e=>new Yu('t'===e[0]||'T'===e[0]),stringify({source:e,value:t},n){if(e&&Ld.test.test(e)){if(t===('t'===e[0]||'T'===e[0]))return e}return t?n.options.trueStr:n.options.falseStr}};function Md({format:e,minFractionDigits:t,tag:n,value:s}){if('bigint'==typeof s)return String(s);const o='number'==typeof s?s:Number(s);if(!isFinite(o))return isNaN(o)?'.nan':o<0?'-.inf':'.inf';let i=Object.is(s,-0)?'-0':JSON.stringify(s);if(!e&&t&&(!n||'tag:yaml.org,2002:float'===n)&&/^\d/.test(i)){let e=i.indexOf('.');e<0&&(e=i.length,i+='.');let n=t-(i.length-e-1);for(;n-- >0;)i+='0'}return i}const Fd={identify:e=>'number'==typeof e,default:!0,tag:'tag:yaml.org,2002:float',test:/^(?:[-+]?\.(?:inf|Inf|INF)|\.nan|\.NaN|\.NAN)$/,resolve:e=>'nan'===e.slice(-3).toLowerCase()?NaN:'-'===e[0]?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:Md},Rd={identify:e=>'number'==typeof e,default:!0,tag:'tag:yaml.org,2002:float',format:'EXP',test:/^[-+]?(?:\.[0-9]+|[0-9]+(?:\.[0-9]*)?)[eE][-+]?[0-9]+$/,resolve:e=>parseFloat(e),stringify(e){const t=Number(e.value);return isFinite(t)?t.toExponential():Md(e)}},Bd={identify:e=>'number'==typeof e,default:!0,tag:'tag:yaml.org,2002:float',test:/^[-+]?(?:\.[0-9]+|[0-9]+\.[0-9]*)$/,resolve(e){const t=new Yu(parseFloat(e)),n=e.indexOf('.');return-1!==n&&'0'===e[e.length-1]&&(t.minFractionDigits=e.length-n-1),t},stringify:Md},Ud=e=>'bigint'==typeof e||Number.isInteger(e),Vd=(e,t,n,{intAsBigInt:s})=>s?BigInt(e):parseInt(e.substring(t),n);function Kd(e,t,n){const{value:s}=e;return Ud(s)&&s>=0?n+s.toString(t):Md(e)}const Zd={identify:e=>Ud(e)&&e>=0,default:!0,tag:'tag:yaml.org,2002:int',format:'OCT',test:/^0o[0-7]+$/,resolve:(e,t,n)=>Vd(e,2,8,n),stringify:e=>Kd(e,8,'0o')},qd={identify:Ud,default:!0,tag:'tag:yaml.org,2002:int',test:/^[-+]?[0-9]+$/,resolve:(e,t,n)=>Vd(e,0,10,n),stringify:Md},Wd={identify:e=>Ud(e)&&e>=0,default:!0,tag:'tag:yaml.org,2002:int',format:'HEX',test:/^0x[0-9a-fA-F]+$/,resolve:(e,t,n)=>Vd(e,2,16,n),stringify:e=>Kd(e,16,'0x')},Yd=[Id,Dd,jd,zd,Ld,Zd,qd,Wd,Fd,Rd,Bd];function Hd(e){return'bigint'==typeof e||Number.isInteger(e)}const Gd=({value:e})=>JSON.stringify(e),Jd=[Id,Dd].concat([{identify:e=>'string'==typeof e,default:!0,tag:'tag:yaml.org,2002:str',resolve:e=>e,stringify:Gd},{identify:e=>null==e,createNode:()=>new Yu(null),default:!0,tag:'tag:yaml.org,2002:null',test:/^null$/,resolve:()=>null,stringify:Gd},{identify:e=>'boolean'==typeof e,default:!0,tag:'tag:yaml.org,2002:bool',test:/^true$|^false$/,resolve:e=>'true'===e,stringify:Gd},{identify:Hd,default:!0,tag:'tag:yaml.org,2002:int',test:/^-?(?:0|[1-9][0-9]*)$/,resolve:(e,t,{intAsBigInt:n})=>n?BigInt(e):parseInt(e,10),stringify:({value:e})=>Hd(e)?e.toString():JSON.stringify(e)},{identify:e=>'number'==typeof e,default:!0,tag:'tag:yaml.org,2002:float',test:/^-?(?:0|[1-9][0-9]*)(?:\.[0-9]*)?(?:[eE][-+]?[0-9]+)?$/,resolve:e=>parseFloat(e),stringify:Gd}],{default:!0,tag:'',test:/^/,resolve:(e,t)=>(t(`Unresolved plain scalar ${JSON.stringify(e)}`),e)}),Xd={identify:e=>e instanceof Uint8Array,default:!1,tag:'tag:yaml.org,2002:binary',resolve(e,t){if('function'==typeof atob){const t=atob(e.replace(/[\n\r]/g,'')),n=new Uint8Array(t.length);for(let e=0;e<t.length;++e)n[e]=t.charCodeAt(e);return n}return t('This environment does not support reading binary tags; either Buffer or atob is required'),e},stringify({comment:e,type:t,value:n},s,o,i){if(!n)return'';const r=n;let a;if('function'!=typeof btoa)throw new Error('This environment does not support writing binary tags; either Buffer or btoa is required');{let e='';for(let t=0;t<r.length;++t)e+=String.fromCharCode(r[t]);a=btoa(e)}if(t??(t=Yu.BLOCK_LITERAL),t!==Yu.QUOTE_DOUBLE){const e=Math.max(s.options.lineWidth-s.indent.length,s.options.minContentWidth),n=Math.ceil(a.length/e),o=new Array(n);for(let t=0,s=0;t<n;++t,s+=e)o[t]=a.substr(s,e);a=o.join(t===Yu.BLOCK_LITERAL?'\n':' ')}return hd({comment:e,type:t,value:a},s,o,i)}};function Qd(e,t){if(Cu(e))for(let n=0;n<e.items.length;++n){let s=e.items[n];if(!Eu(s)){if(xu(s)){s.items.length>1&&t('Each pair must have its own sequence indicator');const e=s.items[0]||new xd(new Yu(null));if(s.commentBefore&&(e.key.commentBefore=e.key.commentBefore?`${s.commentBefore}\n${e.key.commentBefore}`:s.commentBefore),s.comment){const t=e.value??e.key;t.comment=t.comment?`${s.comment}\n${t.comment}`:s.comment}s=e}e.items[n]=Eu(s)?s:new xd(s)}}else t('Expected a sequence for this tag');return e}function ef(e,t,n){const{replacer:s}=n,o=new $d(e);o.tag='tag:yaml.org,2002:pairs';let i=0;if(t&&Symbol.iterator in Object(t))for(let r of t){let e,a;if('function'==typeof s&&(r=s.call(t,String(i++),r)),Array.isArray(r)){if(2!==r.length)throw new TypeError(`Expected [key, value] tuple: ${r}`);e=r[0],a=r[1]}else if(r&&r instanceof Object){const t=Object.keys(r);if(1!==t.length)throw new TypeError(`Expected tuple with one key, not ${t.length} keys`);e=t[0],a=r[e]}else e=r;o.items.push(Sd(e,a,n))}return o}const tf={collection:'seq',default:!1,tag:'tag:yaml.org,2002:pairs',resolve:Qd,createNode:ef};class nf extends $d{constructor(){super(),this.add=Ad.prototype.add.bind(this),this.delete=Ad.prototype.delete.bind(this),this.get=Ad.prototype.get.bind(this),this.has=Ad.prototype.has.bind(this),this.set=Ad.prototype.set.bind(this),this.tag=nf.tag}toJSON(_,e){if(!e)return super.toJSON(_);const t=new Map;e?.onCreate&&e.onCreate(t);for(const n of this.items){let s,o;if(Eu(n)?(s=Vu(n.key,'',e),o=Vu(n.value,s,e)):s=Vu(n,'',e),t.has(s))throw new Error('Ordered maps must not include duplicate keys');t.set(s,o)}return t}static from(e,t,n){const s=ef(e,t,n),o=new this;return o.items=s.items,o}}nf.tag='tag:yaml.org,2002:omap';const sf={collection:'seq',identify:e=>e instanceof Map,nodeClass:nf,default:!1,tag:'tag:yaml.org,2002:omap',resolve(e,t){const n=Qd(e,t),s=[];for(const{key:o}of n.items)Tu(o)&&(s.includes(o.value)?t(`Ordered maps must not include duplicate keys: ${o.value}`):s.push(o.value));return Object.assign(new nf,n)},createNode:(e,t,n)=>nf.from(e,t,n)};function of({value:e,source:t},n){return t&&(e?rf:af).test.test(t)?t:e?n.options.trueStr:n.options.falseStr}const rf={identify:e=>!0===e,default:!0,tag:'tag:yaml.org,2002:bool',test:/^(?:Y|y|[Yy]es|YES|[Tt]rue|TRUE|[Oo]n|ON)$/,resolve:()=>new Yu(!0),stringify:of},af={identify:e=>!1===e,default:!0,tag:'tag:yaml.org,2002:bool',test:/^(?:N|n|[Nn]o|NO|[Ff]alse|FALSE|[Oo]ff|OFF)$/,resolve:()=>new Yu(!1),stringify:of},lf={identify:e=>'number'==typeof e,default:!0,tag:'tag:yaml.org,2002:float',test:/^(?:[-+]?\.(?:inf|Inf|INF)|\.nan|\.NaN|\.NAN)$/,resolve:e=>'nan'===e.slice(-3).toLowerCase()?NaN:'-'===e[0]?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:Md},cf={identify:e=>'number'==typeof e,default:!0,tag:'tag:yaml.org,2002:float',format:'EXP',test:/^[-+]?(?:[0-9][0-9_]*)?(?:\.[0-9_]*)?[eE][-+]?[0-9]+$/,resolve:e=>parseFloat(e.replace(/_/g,'')),stringify(e){const t=Number(e.value);return isFinite(t)?t.toExponential():Md(e)}},uf={identify:e=>'number'==typeof e,default:!0,tag:'tag:yaml.org,2002:float',test:/^[-+]?(?:[0-9][0-9_]*)?\.[0-9_]*$/,resolve(e){const t=new Yu(parseFloat(e.replace(/_/g,''))),n=e.indexOf('.');if(-1!==n){const s=e.substring(n+1).replace(/_/g,'');'0'===s[s.length-1]&&(t.minFractionDigits=s.length)}return t},stringify:Md},df=e=>'bigint'==typeof e||Number.isInteger(e);function ff(e,t,n,{intAsBigInt:s}){const o=e[0];if('-'!==o&&'+'!==o||(t+=1),e=e.substring(t).replace(/_/g,''),s){switch(n){case 2:e=`0b${e}`;break;case 8:e=`0o${e}`;break;case 16:e=`0x${e}`}const t=BigInt(e);return'-'===o?BigInt(-1)*t:t}const i=parseInt(e,n);return'-'===o?-1*i:i}function pf(e,t,n){const{value:s}=e;if(df(s)){const e=s.toString(t);return s<0?'-'+n+e.substr(1):n+e}return Md(e)}const hf={identify:df,default:!0,tag:'tag:yaml.org,2002:int',format:'BIN',test:/^[-+]?0b[0-1_]+$/,resolve:(e,t,n)=>ff(e,2,2,n),stringify:e=>pf(e,2,'0b')},mf={identify:df,default:!0,tag:'tag:yaml.org,2002:int',format:'OCT',test:/^[-+]?0[0-7_]+$/,resolve:(e,t,n)=>ff(e,1,8,n),stringify:e=>pf(e,8,'0')},gf={identify:df,default:!0,tag:'tag:yaml.org,2002:int',test:/^[-+]?[0-9][0-9_]*$/,resolve:(e,t,n)=>ff(e,0,10,n),stringify:Md},vf={identify:df,default:!0,tag:'tag:yaml.org,2002:int',format:'HEX',test:/^[-+]?0x[0-9a-fA-F_]+$/,resolve:(e,t,n)=>ff(e,2,16,n),stringify:e=>pf(e,16,'0x')};class yf extends Ad{constructor(e){super(e),this.tag=yf.tag}add(e){let t;t=Eu(e)?e:e&&'object'==typeof e&&'key'in e&&'value'in e&&null===e.value?new xd(e.key,null):new xd(e,null);Od(this.items,t.key)||this.items.push(t)}get(e,t){const n=Od(this.items,e);return!t&&Eu(n)?Tu(n.key)?n.key.value:n.key:n}set(e,t){if('boolean'!=typeof t)throw new Error('Expected boolean value for set(key, value) in a YAML set, not '+typeof t);const n=Od(this.items,e);n&&!t?this.items.splice(this.items.indexOf(n),1):!n&&t&&this.items.push(new xd(e))}toJSON(_,e){return super.toJSON(_,e,Set)}toString(e,t,n){if(!e)return JSON.stringify(this);if(this.hasAllNullValues(!0))return super.toString(Object.assign({},e,{allNullValues:!0}),t,n);throw new Error('Set items must all have null values')}static from(e,t,n){const{replacer:s}=n,o=new this(e);if(t&&Symbol.iterator in Object(t))for(let i of t)'function'==typeof s&&(i=s.call(t,i,i)),o.items.push(Sd(i,null,n));return o}}yf.tag='tag:yaml.org,2002:set';const bf={collection:'map',identify:e=>e instanceof Set,nodeClass:yf,default:!1,tag:'tag:yaml.org,2002:set',createNode:(e,t,n)=>yf.from(e,t,n),resolve(e,t){if(xu(e)){if(e.hasAllNullValues(!0))return Object.assign(new yf,e);t('Set items must all have null values')}else t('Expected a mapping for this tag');return e}};function _f(e,t){const n=e[0],s='-'===n||'+'===n?e.substring(1):e,o=e=>t?BigInt(e):Number(e),i=s.replace(/_/g,'').split(':').reduce((e,t)=>e*o(60)+o(t),o(0));return'-'===n?o(-1)*i:i}function wf(e){let{value:t}=e,n=e=>e;if('bigint'==typeof t)n=e=>BigInt(e);else if(isNaN(t)||!isFinite(t))return Md(e);let s='';t<0&&(s='-',t*=n(-1));const o=n(60),i=[t%o];return t<60?i.unshift(0):(t=(t-i[0])/o,i.unshift(t%o),t>=60&&(t=(t-i[0])/o,i.unshift(t))),s+i.map(e=>String(e).padStart(2,'0')).join(':').replace(/000000\d*$/,'')}const kf={identify:e=>'bigint'==typeof e||Number.isInteger(e),default:!0,tag:'tag:yaml.org,2002:int',format:'TIME',test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+$/,resolve:(e,t,{intAsBigInt:n})=>_f(e,n),stringify:wf},Sf={identify:e=>'number'==typeof e,default:!0,tag:'tag:yaml.org,2002:float',format:'TIME',test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\.[0-9_]*$/,resolve:e=>_f(e,!1),stringify:wf},xf={identify:e=>e instanceof Date,default:!0,tag:'tag:yaml.org,2002:timestamp',test:RegExp('^([0-9]{4})-([0-9]{1,2})-([0-9]{1,2})(?:(?:t|T|[ \\t]+)([0-9]{1,2}):([0-9]{1,2}):([0-9]{1,2}(\\.[0-9]+)?)(?:[ \\t]*(Z|[-+][012]?[0-9](?::[0-9]{2})?))?)?$'),resolve(e){const t=e.match(xf.test);if(!t)throw new Error('!!timestamp expects a date, starting with yyyy-mm-dd');const[,n,s,o,i,r,a]=t.map(Number),l=t[7]?Number((t[7]+'00').substr(1,3)):0;let c=Date.UTC(n,s-1,o,i||0,r||0,a||0,l);const u=t[8];if(u&&'Z'!==u){let e=_f(u,!1);Math.abs(e)<30&&(e*=60),c-=6e4*e}return new Date(c)},stringify:({value:e})=>e?.toISOString().replace(/(T00:00:00)?\.000Z$/,'')??''},Ef=[Id,Dd,jd,zd,rf,af,hf,mf,gf,vf,lf,cf,uf,Xd,bd,sf,tf,bf,kf,Sf,xf],Tf=new Map([['core',Yd],['failsafe',[Id,Dd,jd]],['json',Jd],['yaml11',Ef],['yaml-1.1',Ef]]),Cf={binary:Xd,bool:Ld,float:Bd,floatExp:Rd,floatNaN:Fd,floatTime:Sf,int:qd,intHex:Wd,intOct:Zd,intTime:kf,map:Id,merge:bd,null:zd,omap:sf,pairs:tf,seq:Dd,set:bf,timestamp:xf},Nf={'tag:yaml.org,2002:binary':Xd,'tag:yaml.org,2002:merge':bd,'tag:yaml.org,2002:omap':sf,'tag:yaml.org,2002:pairs':tf,'tag:yaml.org,2002:set':bf,'tag:yaml.org,2002:timestamp':xf};function Of(e,t,n){const s=Tf.get(t);if(s&&!e)return n&&!s.includes(bd)?s.concat(bd):s.slice();let o=s;if(!o){if(!Array.isArray(e)){const e=Array.from(Tf.keys()).filter(e=>'yaml11'!==e).map(e=>JSON.stringify(e)).join(', ');throw new Error(`Unknown schema "${t}"; use one of ${e} or define customTags array`)}o=[]}if(Array.isArray(e))for(const i of e)o=o.concat(i);else'function'==typeof e&&(o=e(o.slice()));return n&&(o=o.concat(bd)),o.reduce((e,t)=>{const n='string'==typeof t?Cf[t]:t;if(!n){const e=JSON.stringify(t),n=Object.keys(Cf).map(e=>JSON.stringify(e)).join(', ');throw new Error(`Unknown custom tag ${e}; use one of ${n}`)}return e.includes(n)||e.push(n),e},[])}const Af=(e,t)=>e.key<t.key?-1:e.key>t.key?1:0;class If{constructor({compat:e,customTags:t,merge:n,resolveKnownTags:s,schema:o,sortMapEntries:i,toStringDefaults:r}){this.compat=Array.isArray(e)?Of(e,'compat'):e?Of(null,e):null,this.name='string'==typeof o&&o||'core',this.knownTags=s?Nf:{},this.tags=Of(t,this.name,n),this.toStringOptions=r??null,Object.defineProperty(this,vu,{value:Id}),Object.defineProperty(this,bu,{value:jd}),Object.defineProperty(this,_u,{value:Dd}),this.sortMapEntries='function'==typeof i?i:!0===i?Af:null}clone(){const e=Object.create(If.prototype,Object.getOwnPropertyDescriptors(this));return e.tags=this.tags.slice(),e}}class $f{constructor(e,t,n){this.commentBefore=null,this.comment=null,this.errors=[],this.warnings=[],Object.defineProperty(this,wu,{value:gu});let s=null;'function'==typeof t||Array.isArray(t)?s=t:void 0===n&&t&&(n=t,t=void 0);const o=Object.assign({intAsBigInt:!1,keepSourceTokens:!1,logLevel:'warn',prettyErrors:!0,strict:!0,stringKeys:!1,uniqueKeys:!0,version:'1.2'},n);this.options=o;let{version:i}=o;n?._directives?(this.directives=n._directives.atDocument(),this.directives.yaml.explicit&&(i=this.directives.yaml.version)):this.directives=new Mu({version:i}),this.setSchema(i,n),this.contents=void 0===e?null:this.createNode(e,s,n)}clone(){const e=Object.create($f.prototype,{[wu]:{value:gu}});return e.commentBefore=this.commentBefore,e.comment=this.comment,e.errors=this.errors.slice(),e.warnings=this.warnings.slice(),e.options=Object.assign({},this.options),this.directives&&(e.directives=this.directives.clone()),e.schema=this.schema.clone(),e.contents=Ou(this.contents)?this.contents.clone(e.schema):this.contents,this.range&&(e.range=this.range.slice()),e}add(e){Pf(this.contents)&&this.contents.add(e)}addIn(e,t){Pf(this.contents)&&this.contents.addIn(e,t)}createAlias(e,t){if(!e.anchor){const n=Ru(this);e.anchor=!t||n.has(t)?Bu(t||'a',n):t}return new Zu(e.anchor)}createNode(e,t,n){let s;if('function'==typeof t)e=t.call({'':e},'',e),s=t;else if(Array.isArray(t)){const e=e=>'number'==typeof e||e instanceof String||e instanceof Number,n=t.filter(e).map(String);n.length>0&&(t=t.concat(n)),s=t}else void 0===n&&t&&(n=t,t=void 0);const{aliasDuplicateObjects:o,anchorPrefix:i,flow:r,keepUndefined:a,onTagObj:l,tag:c}=n??{},{onAnchor:u,setAnchors:d,sourceObjects:f}=function(e,t){const n=[],s=new Map;let o=null;return{onAnchor:s=>{n.push(s),o??(o=Ru(e));const i=Bu(t,o);return o.add(i),i},setAnchors:()=>{for(const e of n){const t=s.get(e);if('object'!=typeof t||!t.anchor||!Tu(t.node)&&!Nu(t.node)){const t=new Error('Failed to resolve repeated object (this should not happen)');throw t.source=e,t}t.node.anchor=t.anchor}},sourceObjects:s}}(this,i||'a'),p=Hu(e,c,{aliasDuplicateObjects:o??!0,keepUndefined:a??!1,onAnchor:u,onTagObj:l,replacer:s,schema:this.schema,sourceObjects:f});return r&&Nu(p)&&(p.flow=!0),d(),p}createPair(e,t,n={}){const s=this.createNode(e,null,n),o=this.createNode(t,null,n);return new xd(s,o)}delete(e){return!!Pf(this.contents)&&this.contents.delete(e)}deleteIn(e){return Ju(e)?null!=this.contents&&(this.contents=null,!0):!!Pf(this.contents)&&this.contents.deleteIn(e)}get(e,t){return Nu(this.contents)?this.contents.get(e,t):void 0}getIn(e,t){return Ju(e)?!t&&Tu(this.contents)?this.contents.value:this.contents:Nu(this.contents)?this.contents.getIn(e,t):void 0}has(e){return!!Nu(this.contents)&&this.contents.has(e)}hasIn(e){return Ju(e)?void 0!==this.contents:!!Nu(this.contents)&&this.contents.hasIn(e)}set(e,t){null==this.contents?this.contents=Gu(this.schema,[e],t):Pf(this.contents)&&this.contents.set(e,t)}setIn(e,t){Ju(e)?this.contents=t:null==this.contents?this.contents=Gu(this.schema,Array.from(e),t):Pf(this.contents)&&this.contents.setIn(e,t)}setSchema(e,t={}){let n;switch('number'==typeof e&&(e=String(e)),e){case'1.1':this.directives?this.directives.yaml.version='1.1':this.directives=new Mu({version:'1.1'}),n={resolveKnownTags:!1,schema:'yaml-1.1'};break;case'1.2':case'next':this.directives?this.directives.yaml.version=e:this.directives=new Mu({version:e}),n={resolveKnownTags:!0,schema:'core'};break;case null:this.directives&&delete this.directives,n=null;break;default:{const t=JSON.stringify(e);throw new Error(`Expected '1.1', '1.2' or null as first argument, but found: ${t}`)}}if(t.schema instanceof Object)this.schema=t.schema;else{if(!n)throw new Error('With a null YAML version, the { schema: Schema } option is required');this.schema=new If(Object.assign(n,t))}}toJS({json:e,jsonArg:t,mapAsMap:n,maxAliasCount:s,onAnchor:o,reviver:i}={}){const r={anchors:new Map,doc:this,keep:!e,mapAsMap:!0===n,mapKeyWarned:!1,maxAliasCount:'number'==typeof s?s:100},a=Vu(this.contents,t??'',r);if('function'==typeof o)for(const{count:l,res:c}of r.anchors.values())o(c,l);return'function'==typeof i?Uu(i,{'':a},'',a):a}toJSON(e,t){return this.toJS({json:!0,jsonArg:e,mapAsMap:!1,onAnchor:t})}toString(e={}){if(this.errors.length>0)throw new Error('Document with errors cannot be stringified');if('indent'in e&&(!Number.isInteger(e.indent)||Number(e.indent)<=0)){const t=JSON.stringify(e.indent);throw new Error(`"indent" option must be a positive integer, not ${t}`)}return function(e,t){const n=[];let s=!0===t.directives;if(!1!==t.directives&&e.directives){const t=e.directives.toString(e);t?(n.push(t),s=!0):e.directives.docStart&&(s=!0)}s&&n.push('---');const o=md(e,t),{commentString:i}=o.options;if(e.commentBefore){1!==n.length&&n.unshift('');const t=i(e.commentBefore);n.unshift(ed(t,''))}let r=!1,a=null;if(e.contents){if(Ou(e.contents)){if(e.contents.spaceBefore&&s&&n.push(''),e.contents.commentBefore){const t=i(e.contents.commentBefore);n.push(ed(t,''))}o.forceBlockIndent=!!e.comment,a=e.contents.comment}const t=a?void 0:()=>r=!0;let l=gd(e.contents,o,()=>a=null,t);a&&(l+=td(l,'',i(a))),'|'!==l[0]&&'>'!==l[0]||'---'!==n[n.length-1]?n.push(l):n[n.length-1]=`--- ${l}`}else n.push(gd(e.contents,o));if(e.directives?.docEnd)if(e.comment){const t=i(e.comment);t.includes('\n')?(n.push('...'),n.push(ed(t,''))):n.push(`... ${t}`)}else n.push('...');else{let t=e.comment;t&&r&&(t=t.replace(/^\n+/,'')),t&&(r&&!a||''===n[n.length-1]||n.push(''),n.push(ed(i(t),'')))}return n.join('\n')+'\n'}(this,e)}}function Pf(e){if(Nu(e))return!0;throw new Error('Expected a YAML collection as document contents')}class Df extends Error{constructor(e,t,n,s){super(),this.name=e,this.code=n,this.message=s,this.pos=t}}class jf extends Df{constructor(e,t,n){super('YAMLParseError',e,t,n)}}class zf extends Df{constructor(e,t,n){super('YAMLWarning',e,t,n)}}const Lf=(e,t)=>n=>{if(-1===n.pos[0])return;n.linePos=n.pos.map(e=>t.linePos(e));const{line:s,col:o}=n.linePos[0];n.message+=` at line ${s}, column ${o}`;let i=o-1,r=e.substring(t.lineStarts[s-1],t.lineStarts[s]).replace(/[\n\r]+$/,'');if(i>=60&&r.length>80){const e=Math.min(i-39,r.length-79);r=''+r.substring(e),i-=e-1}if(r.length>80&&(r=r.substring(0,79)+''),s>1&&/^ *$/.test(r.substring(0,i))){let n=e.substring(t.lineStarts[s-2],t.lineStarts[s-1]);n.length>80&&(n=n.substring(0,79)+'\n'),r=n+r}if(/[^ ]/.test(r)){let e=1;const t=n.linePos[1];t?.line===s&&t.col>o&&(e=Math.max(1,Math.min(t.col-o,80-i)));const a=' '.repeat(i)+'^'.repeat(e);n.message+=`:\n\n${r}\n${a}\n`}};function Mf(e,{flow:t,indicator:n,next:s,offset:o,onError:i,parentIndent:r,startOnNewline:a}){let l=!1,c=a,u=a,d='',f='',p=!1,h=!1,m=null,g=null,v=null,y=null,b=null,w=null,k=null;for(const E of e)switch(h&&('space'!==E.type&&'newline'!==E.type&&'comma'!==E.type&&i(E.offset,'MISSING_CHAR','Tags and anchors must be separated from the next token by white space'),h=!1),m&&(c&&'comment'!==E.type&&'newline'!==E.type&&i(m,'TAB_AS_INDENT','Tabs are not allowed as indentation'),m=null),E.type){case'space':t||'doc-start'===n&&'flow-collection'===s?.type||!E.source.includes('\t')||(m=E),u=!0;break;case'comment':{u||i(E,'MISSING_CHAR','Comments must be separated from other tokens by white space characters');const e=E.source.substring(1)||' ';d?d+=f+e:d=e,f='',c=!1;break}case'newline':c?d?d+=E.source:w&&'seq-item-ind'===n||(l=!0):f+=E.source,c=!0,p=!0,(g||v)&&(y=E),u=!0;break;case'anchor':g&&i(E,'MULTIPLE_ANCHORS','A node can have at most one anchor'),E.source.endsWith(':')&&i(E.offset+E.source.length-1,'BAD_ALIAS','Anchor ending in : is ambiguous',!0),g=E,k??(k=E.offset),c=!1,u=!1,h=!0;break;case'tag':v&&i(E,'MULTIPLE_TAGS','A node can have at most one tag'),v=E,k??(k=E.offset),c=!1,u=!1,h=!0;break;case n:(g||v)&&i(E,'BAD_PROP_ORDER',`Anchors and tags must be after the ${E.source} indicator`),w&&i(E,'UNEXPECTED_TOKEN',`Unexpected ${E.source} in ${t??'collection'}`),w=E,c='seq-item-ind'===n||'explicit-key-ind'===n,u=!1;break;case'comma':if(t){b&&i(E,'UNEXPECTED_TOKEN',`Unexpected , in ${t}`),b=E,c=!1,u=!1;break}default:i(E,'UNEXPECTED_TOKEN',`Unexpected ${E.type} token`),c=!1,u=!1}const S=e[e.length-1],x=S?S.offset+S.source.length:o;return h&&s&&'space'!==s.type&&'newline'!==s.type&&'comma'!==s.type&&('scalar'!==s.type||''!==s.source)&&i(s.offset,'MISSING_CHAR','Tags and anchors must be separated from the next token by white space'),m&&(c&&m.indent<=r||'block-map'===s?.type||'block-seq'===s?.type)&&i(m,'TAB_AS_INDENT','Tabs are not allowed as indentation'),{comma:b,found:w,spaceBefore:l,comment:d,hasNewline:p,anchor:g,tag:v,newlineAfterProp:y,end:x,start:k??x}}function Ff(e){if(!e)return null;switch(e.type){case'alias':case'scalar':case'double-quoted-scalar':case'single-quoted-scalar':if(e.source.includes('\n'))return!0;if(e.end)for(const t of e.end)if('newline'===t.type)return!0;return!1;case'flow-collection':for(const t of e.items){for(const e of t.start)if('newline'===e.type)return!0;if(t.sep)for(const e of t.sep)if('newline'===e.type)return!0;if(Ff(t.key)||Ff(t.value))return!0}return!1;default:return!0}}function Rf(e,t,n){if('flow-collection'===t?.type){const s=t.end[0];if(s.indent===e&&(']'===s.source||'}'===s.source)&&Ff(t)){n(s,'BAD_INDENT','Flow end indicator should be more indented than parent',!0)}}}function Bf(e,t,n){const{uniqueKeys:s}=e.options;if(!1===s)return!1;const o='function'==typeof s?s:(e,t)=>e===t||Tu(e)&&Tu(t)&&e.value===t.value;return t.some(e=>o(e.key,n))}const Uf='All mapping items must start at the same column';function Vf(e,t,n,s){let o='';if(e){let i=!1,r='';for(const a of e){const{source:e,type:l}=a;switch(l){case'space':i=!0;break;case'comment':{n&&!i&&s(a,'MISSING_CHAR','Comments must be separated from other tokens by white space characters');const t=e.substring(1)||' ';o?o+=r+t:o=t,r='';break}case'newline':o&&(r+=e),i=!0;break;default:s(a,'UNEXPECTED_TOKEN',`Unexpected ${l} at node end`)}t+=e.length}}return{comment:o,offset:t}}const Kf='Block collections are not allowed within flow collections',Zf=e=>e&&('block-map'===e.type||'block-seq'===e.type);function qf(e,t,n,s,o,i){const r='block-map'===n.type?function({composeNode:e,composeEmptyNode:t},n,s,o,i){const r=new(i?.nodeClass??Ad)(n.schema);n.atRoot&&(n.atRoot=!1);let a=s.offset,l=null;for(const c of s.items){const{start:i,key:u,sep:d,value:f}=c,p=Mf(i,{indicator:'explicit-key-ind',next:u??d?.[0],offset:a,onError:o,parentIndent:s.indent,startOnNewline:!0}),h=!p.found;if(h){if(u&&('block-seq'===u.type?o(a,'BLOCK_AS_IMPLICIT_KEY','A block sequence may not be used as an implicit map key'):'indent'in u&&u.indent!==s.indent&&o(a,'BAD_INDENT',Uf)),!p.anchor&&!p.tag&&!d){l=p.end,p.comment&&(r.comment?r.comment+='\n'+p.comment:r.comment=p.comment);continue}(p.newlineAfterProp||Ff(u))&&o(u??i[i.length-1],'MULTILINE_IMPLICIT_KEY','Implicit keys need to be on a single line')}else p.found?.indent!==s.indent&&o(a,'BAD_INDENT',Uf);n.atKey=!0;const m=p.end,g=u?e(n,u,p,o):t(n,m,i,null,p,o);n.schema.compat&&Rf(s.indent,u,o),n.atKey=!1,Bf(n,r.items,g)&&o(m,'DUPLICATE_KEY','Map keys must be unique');const v=Mf(d??[],{indicator:'map-value-ind',next:f,offset:g.range[2],onError:o,parentIndent:s.indent,startOnNewline:!u||'block-scalar'===u.type});if(a=v.end,v.found){h&&('block-map'!==f?.type||v.hasNewline||o(a,'BLOCK_AS_IMPLICIT_KEY','Nested mappings are not allowed in compact mappings'),n.options.strict&&p.start<v.found.offset-1024&&o(g.range,'KEY_OVER_1024_CHARS','The : indicator must be at most 1024 chars after the start of an implicit block mapping key'));const i=f?e(n,f,v,o):t(n,a,d,null,v,o);n.schema.compat&&Rf(s.indent,f,o),a=i.range[2];const l=new xd(g,i);n.options.keepSourceTokens&&(l.srcToken=c),r.items.push(l)}else{h&&o(g.range,'MISSING_CHAR','Implicit map keys need to be followed by map values'),v.comment&&(g.comment?g.comment+='\n'+v.comment:g.comment=v.comment);const e=new xd(g);n.options.keepSourceTokens&&(e.srcToken=c),r.items.push(e)}}return l&&l<a&&o(l,'IMPOSSIBLE','Map comment with trailing content'),r.range=[s.offset,a,l??a],r}(e,t,n,s,i):'block-seq'===n.type?function({composeNode:e,composeEmptyNode:t},n,s,o,i){const r=new(i?.nodeClass??$d)(n.schema);n.atRoot&&(n.atRoot=!1),n.atKey&&(n.atKey=!1);let a=s.offset,l=null;for(const{start:c,value:u}of s.items){const i=Mf(c,{indicator:'seq-item-ind',next:u,offset:a,onError:o,parentIndent:s.indent,startOnNewline:!0});if(!i.found){if(!(i.anchor||i.tag||u)){l=i.end,i.comment&&(r.comment=i.comment);continue}'block-seq'===u?.type?o(i.end,'BAD_INDENT','All sequence items must start at the same column'):o(a,'MISSING_CHAR','Sequence item without - indicator')}const d=u?e(n,u,i,o):t(n,i.end,c,null,i,o);n.schema.compat&&Rf(s.indent,u,o),a=d.range[2],r.items.push(d)}return r.range=[s.offset,a,l??a],r}(e,t,n,s,i):function({composeNode:e,composeEmptyNode:t},n,s,o,i){const r='{'===s.start.source,a=r?'flow map':'flow sequence',l=new(i?.nodeClass??(r?Ad:$d))(n.schema);l.flow=!0;const c=n.atRoot;c&&(n.atRoot=!1),n.atKey&&(n.atKey=!1);let u=s.offset+s.start.source.length;for(let m=0;m<s.items.length;++m){const i=s.items[m],{start:c,key:d,sep:f,value:p}=i,h=Mf(c,{flow:a,indicator:'explicit-key-ind',next:d??f?.[0],offset:u,onError:o,parentIndent:s.indent,startOnNewline:!1});if(!h.found){if(!(h.anchor||h.tag||f||p)){0===m&&h.comma?o(h.comma,'UNEXPECTED_TOKEN',`Unexpected , in ${a}`):m<s.items.length-1&&o(h.start,'UNEXPECTED_TOKEN',`Unexpected empty item in ${a}`),h.comment&&(l.comment?l.comment+='\n'+h.comment:l.comment=h.comment),u=h.end;continue}!r&&n.options.strict&&Ff(d)&&o(d,'MULTILINE_IMPLICIT_KEY','Implicit keys of flow sequence pairs need to be on a single line')}if(0===m)h.comma&&o(h.comma,'UNEXPECTED_TOKEN',`Unexpected , in ${a}`);else if(h.comma||o(h.start,'MISSING_CHAR',`Missing , between ${a} items`),h.comment){let e='';e:for(const t of c)switch(t.type){case'comma':case'space':break;case'comment':e=t.source.substring(1);break e;default:break e}if(e){let t=l.items[l.items.length-1];Eu(t)&&(t=t.value??t.key),t.comment?t.comment+='\n'+e:t.comment=e,h.comment=h.comment.substring(e.length+1)}}if(r||f||h.found){n.atKey=!0;const m=h.end,g=d?e(n,d,h,o):t(n,m,c,null,h,o);Zf(d)&&o(g.range,'BLOCK_IN_FLOW',Kf),n.atKey=!1;const v=Mf(f??[],{flow:a,indicator:'map-value-ind',next:p,offset:g.range[2],onError:o,parentIndent:s.indent,startOnNewline:!1});if(v.found){if(!r&&!h.found&&n.options.strict){if(f)for(const e of f){if(e===v.found)break;if('newline'===e.type){o(e,'MULTILINE_IMPLICIT_KEY','Implicit keys of flow sequence pairs need to be on a single line');break}}h.start<v.found.offset-1024&&o(v.found,'KEY_OVER_1024_CHARS','The : indicator must be at most 1024 chars after the start of an implicit flow sequence key')}}else p&&('source'in p&&':'===p.source?.[0]?o(p,'MISSING_CHAR',`Missing space after : in ${a}`):o(v.start,'MISSING_CHAR',`Missing , or : between ${a} items`));const y=p?e(n,p,v,o):v.found?t(n,v.end,f,null,v,o):null;y?Zf(p)&&o(y.range,'BLOCK_IN_FLOW',Kf):v.comment&&(g.comment?g.comment+='\n'+v.comment:g.comment=v.comment);const b=new xd(g,y);if(n.options.keepSourceTokens&&(b.srcToken=i),r){const e=l;Bf(n,e.items,g)&&o(m,'DUPLICATE_KEY','Map keys must be unique'),e.items.push(b)}else{const e=new Ad(n.schema);e.flow=!0,e.items.push(b);const t=(y??g).range;e.range=[g.range[0],t[1],t[2]],l.items.push(e)}u=y?y.range[2]:v.end}else{const s=p?e(n,p,h,o):t(n,h.end,f,null,h,o);l.items.push(s),u=s.range[2],Zf(p)&&o(s.range,'BLOCK_IN_FLOW',Kf)}}const d=r?'}':']',[f,...p]=s.end;let h=u;if(f?.source===d)h=f.offset+f.source.length;else{const e=a[0].toUpperCase()+a.substring(1);o(u,c?'MISSING_CHAR':'BAD_INDENT',c?`${e} must end with a ${d}`:`${e} in block collection must be sufficiently indented and end with a ${d}`),f&&1!==f.source.length&&p.unshift(f)}if(p.length>0){const e=Vf(p,h,n.options.strict,o);e.comment&&(l.comment?l.comment+='\n'+e.comment:l.comment=e.comment),l.range=[s.offset,h,e.offset]}else l.range=[s.offset,h,h];return l}(e,t,n,s,i),a=r.constructor;return'!'===o||o===a.tagName?(r.tag=a.tagName,r):(o&&(r.tag=o),r)}function Wf(e,t,n){const s=t.offset,o=function({offset:e,props:t},n,s){if('block-scalar-header'!==t[0].type)return s(t[0],'IMPOSSIBLE','Block scalar header not found'),null;const{source:o}=t[0],i=o[0];let r=0,a='',l=-1;for(let f=1;f<o.length;++f){const t=o[f];if(a||'-'!==t&&'+'!==t){const n=Number(t);!r&&n?r=n:-1===l&&(l=e+f)}else a=t}-1!==l&&s(l,'UNEXPECTED_TOKEN',`Block scalar header includes extra characters: ${o}`);let c=!1,u='',d=o.length;for(let f=1;f<t.length;++f){const e=t[f];switch(e.type){case'space':c=!0;case'newline':d+=e.source.length;break;case'comment':if(n&&!c){s(e,'MISSING_CHAR','Comments must be separated from other tokens by white space characters')}d+=e.source.length,u=e.source.substring(1);break;case'error':s(e,'UNEXPECTED_TOKEN',e.message),d+=e.source.length;break;default:{s(e,'UNEXPECTED_TOKEN',`Unexpected token in block scalar header: ${e.type}`);const t=e.source;t&&'string'==typeof t&&(d+=t.length)}}}return{mode:i,indent:r,chomp:a,comment:u,length:d}}(t,e.options.strict,n);if(!o)return{value:'',type:null,comment:'',range:[s,s,s]};const i='>'===o.mode?Yu.BLOCK_FOLDED:Yu.BLOCK_LITERAL,r=t.source?function(e){const t=e.split(/\n( *)/),n=t[0],s=n.match(/^( *)/),o=[s?.[1]?[s[1],n.slice(s[1].length)]:['',n]];for(let i=1;i<t.length;i+=2)o.push([t[i],t[i+1]]);return o}(t.source):[];let a=r.length;for(let m=r.length-1;m>=0;--m){const e=r[m][1];if(''!==e&&'\r'!==e)break;a=m}if(0===a){const e='+'===o.chomp&&r.length>0?'\n'.repeat(Math.max(1,r.length-1)):'';let n=s+o.length;return t.source&&(n+=t.source.length),{value:e,type:i,comment:o.comment,range:[s,n,n]}}let l=t.indent+o.indent,c=t.offset+o.length,u=0;for(let m=0;m<a;++m){const[t,s]=r[m];if(''!==s&&'\r'!==s){if(t.length<l){const e='Block scalars with more-indented leading empty lines must use an explicit indentation indicator';n(c+t.length,'MISSING_CHAR',e)}if(0===o.indent&&(l=t.length),u=m,0===l&&!e.atRoot){n(c,'BAD_INDENT','Block scalar values in collections must be indented')}break}0===o.indent&&t.length>l&&(l=t.length),c+=t.length+s.length+1}for(let m=r.length-1;m>=a;--m)r[m][0].length>l&&(a=m+1);let d='',f='',p=!1;for(let m=0;m<u;++m)d+=r[m][0].slice(l)+'\n';for(let m=u;m<a;++m){let[e,t]=r[m];c+=e.length+t.length+1;const s='\r'===t[t.length-1];if(s&&(t=t.slice(0,-1)),t&&e.length<l){const i=`Block scalar lines must not be less indented than their ${o.indent?'explicit indentation indicator':'first line'}`;n(c-t.length-(s?2:1),'BAD_INDENT',i),e=''}i===Yu.BLOCK_LITERAL?(d+=f+e.slice(l)+t,f='\n'):e.length>l||'\t'===t[0]?(' '===f?f='\n':p||'\n'!==f||(f='\n\n'),d+=f+e.slice(l)+t,f='\n',p=!0):''===t?'\n'===f?d+='\n':f='\n':(d+=f+t,f=' ',p=!1)}switch(o.chomp){case'-':break;case'+':for(let e=a;e<r.length;++e)d+='\n'+r[e][0].slice(l);'\n'!==d[d.length-1]&&(d+='\n');break;default:d+='\n'}const h=s+o.length+t.source.length;return{value:d,type:i,comment:o.comment,range:[s,h,h]}}function Yf(e,t,n){const{offset:s,type:o,source:i,end:r}=e;let a,l;const c=(e,t,o)=>n(s+e,t,o);switch(o){case'scalar':a=Yu.PLAIN,l=function(e,t){let n='';switch(e[0]){case'\t':n='a tab character';break;case',':n='flow indicator character ,';break;case'%':n='directive indicator character %';break;case'|':case'>':n=`block scalar indicator ${e[0]}`;break;case'@':case'`':n=`reserved character ${e[0]}`}n&&t(0,'BAD_SCALAR_START',`Plain value cannot start with ${n}`);return Hf(e)}(i,c);break;case'single-quoted-scalar':a=Yu.QUOTE_SINGLE,l=function(e,t){'\''===e[e.length-1]&&1!==e.length||t(e.length,'MISSING_CHAR','Missing closing \'quote');return Hf(e.slice(1,-1)).replace(/''/g,'\'')}(i,c);break;case'double-quoted-scalar':a=Yu.QUOTE_DOUBLE,l=function(e,t){let n='';for(let s=1;s<e.length-1;++s){const o=e[s];if('\r'!==o||'\n'!==e[s+1])if('\n'===o){const{fold:t,offset:o}=Gf(e,s);n+=t,s=o}else if('\\'===o){let o=e[++s];const i=Jf[o];if(i)n+=i;else if('\n'===o)for(o=e[s+1];' '===o||'\t'===o;)o=e[1+ ++s];else if('\r'===o&&'\n'===e[s+1])for(o=e[1+ ++s];' '===o||'\t'===o;)o=e[1+ ++s];else if('x'===o||'u'===o||'U'===o){const i={x:2,u:4,U:8}[o];n+=Xf(e,s+1,i,t),s+=i}else{const o=e.substr(s-1,2);t(s-1,'BAD_DQ_ESCAPE',`Invalid escape sequence ${o}`),n+=o}}else if(' '===o||'\t'===o){const t=s;let i=e[s+1];for(;' '===i||'\t'===i;)i=e[1+ ++s];'\n'===i||'\r'===i&&'\n'===e[s+2]||(n+=s>t?e.slice(t,s+1):o)}else n+=o}'"'===e[e.length-1]&&1!==e.length||t(e.length,'MISSING_CHAR','Missing closing "quote');return n}(i,c);break;default:return n(e,'UNEXPECTED_TOKEN',`Expected a flow scalar value, but found: ${o}`),{value:'',type:null,comment:'',range:[s,s+i.length,s+i.length]}}const u=s+i.length,d=Vf(r,u,t,n);return{value:l,type:a,comment:d.comment,range:[s,u,d.offset]}}function Hf(e){let t,n;try{t=new RegExp('(.*?)(?<![ \t])[ \t]*\r?\n','sy'),n=new RegExp('[ \t]*(.*?)(?:(?<![ \t])[ \t]*)?\r?\n','sy')}catch{t=/(.*?)[ \t]*\r?\n/sy,n=/[ \t]*(.*?)[ \t]*\r?\n/sy}let s=t.exec(e);if(!s)return e;let o=s[1],i=' ',r=t.lastIndex;for(n.lastIndex=r;s=n.exec(e);)''===s[1]?'\n'===i?o+=i:i='\n':(o+=i+s[1],i=' '),r=n.lastIndex;const a=/[ \t]*(.*)/sy;return a.lastIndex=r,s=a.exec(e),o+i+(s?.[1]??'')}function Gf(e,t){let n='',s=e[t+1];for(;!(' '!==s&&'\t'!==s&&'\n'!==s&&'\r'!==s||'\r'===s&&'\n'!==e[t+2]);)'\n'===s&&(n+='\n'),s=e[(t+=1)+1];return n||(n=' '),{fold:n,offset:t}}const Jf={0:'\0',a:'',b:'\b',e:'',f:'\f',n:'\n',r:'\r',t:'\t',v:'\v',N:'',_:'',L:'\u2028',P:'\u2029',' ':' ','"':'"','/':'/','\\':'\\','\t':'\t'};function Xf(e,t,n,s){const o=e.substr(t,n),i=o.length===n&&/^[0-9a-fA-F]+$/.test(o)?parseInt(o,16):NaN;if(isNaN(i)){const o=e.substr(t-2,n+2);return s(t-2,'BAD_DQ_ESCAPE',`Invalid escape sequence ${o}`),o}return String.fromCodePoint(i)}function Qf(e,t,n,s){const{value:o,type:i,comment:r,range:a}='block-scalar'===t.type?Wf(e,t,s):Yf(t,e.options.strict,s),l=n?e.directives.tagName(n.source,e=>s(n,'TAG_RESOLVE_FAILED',e)):null;let c,u;c=e.options.stringKeys&&e.atKey?e.schema[bu]:l?function(e,t,n,s,o){if('!'===n)return e[bu];const i=[];for(const a of e.tags)if(!a.collection&&a.tag===n){if(!a.default||!a.test)return a;i.push(a)}for(const a of i)if(a.test?.test(t))return a;const r=e.knownTags[n];if(r&&!r.collection)return e.tags.push(Object.assign({},r,{default:!1,test:void 0})),r;return o(s,'TAG_RESOLVE_FAILED',`Unresolved tag: ${n}`,'tag:yaml.org,2002:str'!==n),e[bu]}(e.schema,o,l,n,s):'scalar'===t.type?function({atKey:e,directives:t,schema:n},s,o,i){const r=n.tags.find(t=>(!0===t.default||e&&'key'===t.default)&&t.test?.test(s))||n[bu];if(n.compat){const e=n.compat.find(e=>e.default&&e.test?.test(s))??n[bu];if(r.tag!==e.tag){i(o,'TAG_RESOLVE_FAILED',`Value may be parsed as either ${t.tagString(r.tag)} or ${t.tagString(e.tag)}`,!0)}}return r}(e,o,t,s):e.schema[bu];try{const i=c.resolve(o,e=>s(n??t,'TAG_RESOLVE_FAILED',e),e.options);u=Tu(i)?i:new Yu(i)}catch(d){const e=d instanceof Error?d.message:String(d);s(n??t,'TAG_RESOLVE_FAILED',e),u=new Yu(o)}return u.range=a,u.source=o,i&&(u.type=i),l&&(u.tag=l),c.format&&(u.format=c.format),r&&(u.comment=r),u}function ep(e,t,n){if(t){n??(n=t.length);for(let s=n-1;s>=0;--s){let n=t[s];switch(n.type){case'space':case'comment':case'newline':e-=n.source.length;continue}for(n=t[++s];'space'===n?.type;)e+=n.source.length,n=t[++s];break}}return e}const tp={composeNode:np,composeEmptyNode:sp};function np(e,t,n,s){const o=e.atKey,{spaceBefore:i,comment:r,anchor:a,tag:l}=n;let c,u=!0;switch(t.type){case'alias':c=function({options:e},{offset:t,source:n,end:s},o){const i=new Zu(n.substring(1));''===i.source&&o(t,'BAD_ALIAS','Alias cannot be an empty string');i.source.endsWith(':')&&o(t+n.length-1,'BAD_ALIAS','Alias ending in : is ambiguous',!0);const r=t+n.length,a=Vf(s,r,e.strict,o);i.range=[t,r,a.offset],a.comment&&(i.comment=a.comment);return i}(e,t,s),(a||l)&&s(t,'ALIAS_PROPS','An alias node must not specify any properties');break;case'scalar':case'single-quoted-scalar':case'double-quoted-scalar':case'block-scalar':c=Qf(e,t,l,s),a&&(c.anchor=a.source.substring(1));break;case'block-map':case'block-seq':case'flow-collection':c=function(e,t,n,s,o){const i=s.tag,r=i?t.directives.tagName(i.source,e=>o(i,'TAG_RESOLVE_FAILED',e)):null;if('block-seq'===n.type){const{anchor:e,newlineAfterProp:t}=s,n=e&&i?e.offset>i.offset?e:i:e??i;n&&(!t||t.offset<n.offset)&&o(n,'MISSING_CHAR','Missing newline after block sequence props')}const a='block-map'===n.type?'map':'block-seq'===n.type?'seq':'{'===n.start.source?'map':'seq';if(!i||!r||'!'===r||r===Ad.tagName&&'map'===a||r===$d.tagName&&'seq'===a)return qf(e,t,n,o,r);let l=t.schema.tags.find(e=>e.tag===r&&e.collection===a);if(!l){const s=t.schema.knownTags[r];if(s?.collection!==a)return s?o(i,'BAD_COLLECTION_TYPE',`${s.tag} used for ${a} collection, but expects ${s.collection??'scalar'}`,!0):o(i,'TAG_RESOLVE_FAILED',`Unresolved tag: ${r}`,!0),qf(e,t,n,o,r);t.schema.tags.push(Object.assign({},s,{default:!1})),l=s}const c=qf(e,t,n,o,r,l),u=l.resolve?.(c,e=>o(i,'TAG_RESOLVE_FAILED',e),t.options)??c,d=Ou(u)?u:new Yu(u);return d.range=c.range,d.tag=r,l?.format&&(d.format=l.format),d}(tp,e,t,n,s),a&&(c.anchor=a.source.substring(1));break;default:s(t,'UNEXPECTED_TOKEN','error'===t.type?t.message:`Unsupported token (type: ${t.type})`),c=sp(e,t.offset,void 0,null,n,s),u=!1}if(a&&''===c.anchor&&s(a,'BAD_ALIAS','Anchor cannot be an empty string'),o&&e.options.stringKeys&&(!Tu(c)||'string'!=typeof c.value||c.tag&&'tag:yaml.org,2002:str'!==c.tag)){s(l??t,'NON_STRING_KEY','With stringKeys, all keys must be strings')}return i&&(c.spaceBefore=!0),r&&('scalar'===t.type&&''===t.source?c.comment=r:c.commentBefore=r),e.options.keepSourceTokens&&u&&(c.srcToken=t),c}function sp(e,t,n,s,{spaceBefore:o,comment:i,anchor:r,tag:a,end:l},c){const u=Qf(e,{type:'scalar',offset:ep(t,n,s),indent:-1,source:''},a,c);return r&&(u.anchor=r.source.substring(1),''===u.anchor&&c(r,'BAD_ALIAS','Anchor cannot be an empty string')),o&&(u.spaceBefore=!0),i&&(u.comment=i,u.range[2]=l),u}function op(e){if('number'==typeof e)return[e,e+1];if(Array.isArray(e))return 2===e.length?e:[e[0],e[1]];const{offset:t,source:n}=e;return[t,t+('string'==typeof n?n.length:1)]}function ip(e){let t='',n=!1,s=!1;for(let o=0;o<e.length;++o){const i=e[o];switch(i[0]){case'#':t+=(''===t?'':s?'\n\n':'\n')+(i.substring(1)||' '),n=!0,s=!1;break;case'%':'#'!==e[o+1]?.[0]&&(o+=1),n=!1;break;default:n||(s=!0),n=!1}}return{comment:t,afterEmptyLine:s}}class rp{constructor(e={}){this.doc=null,this.atDirectives=!1,this.prelude=[],this.errors=[],this.warnings=[],this.onError=(e,t,n,s)=>{const o=op(e);s?this.warnings.push(new zf(o,t,n)):this.errors.push(new jf(o,t,n))},this.directives=new Mu({version:e.version||'1.2'}),this.options=e}decorate(e,t){const{comment:n,afterEmptyLine:s}=ip(this.prelude);if(n){const o=e.contents;if(t)e.comment=e.comment?`${e.comment}\n${n}`:n;else if(s||e.directives.docStart||!o)e.commentBefore=n;else if(Nu(o)&&!o.flow&&o.items.length>0){let e=o.items[0];Eu(e)&&(e=e.key);const t=e.commentBefore;e.commentBefore=t?`${n}\n${t}`:n}else{const e=o.commentBefore;o.commentBefore=e?`${n}\n${e}`:n}}t?(Array.prototype.push.apply(e.errors,this.errors),Array.prototype.push.apply(e.warnings,this.warnings)):(e.errors=this.errors,e.warnings=this.warnings),this.prelude=[],this.errors=[],this.warnings=[]}streamInfo(){return{comment:ip(this.prelude).comment,directives:this.directives,errors:this.errors,warnings:this.warnings}}*compose(e,t=!1,n=-1){for(const s of e)yield*this.next(s);yield*this.end(t,n)}*next(e){switch(e.type){case'directive':this.directives.add(e.source,(t,n,s)=>{const o=op(e);o[0]+=t,this.onError(o,'BAD_DIRECTIVE',n,s)}),this.prelude.push(e.source),this.atDirectives=!0;break;case'document':{const t=function(e,t,{offset:n,start:s,value:o,end:i},r){const a=Object.assign({_directives:t},e),l=new $f(void 0,a),c={atKey:!1,atRoot:!0,directives:l.directives,options:l.options,schema:l.schema},u=Mf(s,{indicator:'doc-start',next:o??i?.[0],offset:n,onError:r,parentIndent:0,startOnNewline:!0});u.found&&(l.directives.docStart=!0,!o||'block-map'!==o.type&&'block-seq'!==o.type||u.hasNewline||r(u.end,'MISSING_CHAR','Block collection cannot start on same line with directives-end marker')),l.contents=o?np(c,o,u,r):sp(c,u.end,s,null,u,r);const d=l.contents.range[2],f=Vf(i,d,!1,r);return f.comment&&(l.comment=f.comment),l.range=[n,d,f.offset],l}(this.options,this.directives,e,this.onError);this.atDirectives&&!t.directives.docStart&&this.onError(e,'MISSING_CHAR','Missing directives-end/doc-start indicator line'),this.decorate(t,!1),this.doc&&(yield this.doc),this.doc=t,this.atDirectives=!1;break}case'byte-order-mark':case'space':break;case'comment':case'newline':this.prelude.push(e.source);break;case'error':{const t=e.source?`${e.message}: ${JSON.stringify(e.source)}`:e.message,n=new jf(op(e),'UNEXPECTED_TOKEN',t);this.atDirectives||!this.doc?this.errors.push(n):this.doc.errors.push(n);break}case'doc-end':{if(!this.doc){const t='Unexpected doc-end without preceding document';this.errors.push(new jf(op(e),'UNEXPECTED_TOKEN',t));break}this.doc.directives.docEnd=!0;const t=Vf(e.end,e.offset+e.source.length,this.doc.options.strict,this.onError);if(this.decorate(this.doc,!0),t.comment){const e=this.doc.comment;this.doc.comment=e?`${e}\n${t.comment}`:t.comment}this.doc.range[2]=t.offset;break}default:this.errors.push(new jf(op(e),'UNEXPECTED_TOKEN',`Unsupported token ${e.type}`))}}*end(e=!1,t=-1){if(this.doc)this.decorate(this.doc,!0),yield this.doc,this.doc=null;else if(e){const e=Object.assign({_directives:this.directives},this.options),n=new $f(void 0,e);this.atDirectives&&this.onError(t,'MISSING_CHAR','Missing directives-end indicator line'),n.range=[0,t,t],this.decorate(n,!1),yield n}}}function ap(e){switch(e){case void 0:case' ':case'\n':case'\r':case'\t':return!0;default:return!1}}const lp=new Set('0123456789ABCDEFabcdef'),cp=new Set('0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-#;/?:@&=+$_.!~*\'()'),up=new Set(',[]{}'),dp=new Set(' ,[]{}\n\r\t'),fp=e=>!e||dp.has(e);class pp{constructor(){this.atEnd=!1,this.blockScalarIndent=-1,this.blockScalarKeep=!1,this.buffer='',this.flowKey=!1,this.flowLevel=0,this.indentNext=0,this.indentValue=0,this.lineEndPos=null,this.next=null,this.pos=0}*lex(e,t=!1){if(e){if('string'!=typeof e)throw TypeError('source is not a string');this.buffer=this.buffer?this.buffer+e:e,this.lineEndPos=null}this.atEnd=!t;let n=this.next??'stream';for(;n&&(t||this.hasChars(1));)n=yield*this.parseNext(n)}atLineEnd(){let e=this.pos,t=this.buffer[e];for(;' '===t||'\t'===t;)t=this.buffer[++e];return!t||'#'===t||'\n'===t||'\r'===t&&'\n'===this.buffer[e+1]}charAt(e){return this.buffer[this.pos+e]}continueScalar(e){let t=this.buffer[e];if(this.indentNext>0){let n=0;for(;' '===t;)t=this.buffer[++n+e];if('\r'===t){const t=this.buffer[n+e+1];if('\n'===t||!t&&!this.atEnd)return e+n+1}return'\n'===t||n>=this.indentNext||!t&&!this.atEnd?e+n:-1}if('-'===t||'.'===t){const t=this.buffer.substr(e,3);if(('---'===t||'...'===t)&&ap(this.buffer[e+3]))return-1}return e}getLine(){let e=this.lineEndPos;return('number'!=typeof e||-1!==e&&e<this.pos)&&(e=this.buffer.indexOf('\n',this.pos),this.lineEndPos=e),-1===e?this.atEnd?this.buffer.substring(this.pos):null:('\r'===this.buffer[e-1]&&(e-=1),this.buffer.substring(this.pos,e))}hasChars(e){return this.pos+e<=this.buffer.length}setNext(e){return this.buffer=this.buffer.substring(this.pos),this.pos=0,this.lineEndPos=null,this.next=e,null}peek(e){return this.buffer.substr(this.pos,e)}*parseNext(e){switch(e){case'stream':return yield*this.parseStream();case'line-start':return yield*this.parseLineStart();case'block-start':return yield*this.parseBlockStart();case'doc':return yield*this.parseDocument();case'flow':return yield*this.parseFlowCollection();case'quoted-scalar':return yield*this.parseQuotedScalar();case'block-scalar':return yield*this.parseBlockScalar();case'plain-scalar':return yield*this.parsePlainScalar()}}*parseStream(){let e=this.getLine();if(null===e)return this.setNext('stream');if('\ufeff'===e[0]&&(yield*this.pushCount(1),e=e.substring(1)),'%'===e[0]){let t=e.length,n=e.indexOf('#');for(;-1!==n;){const s=e[n-1];if(' '===s||'\t'===s){t=n-1;break}n=e.indexOf('#',n+1)}for(;;){const n=e[t-1];if(' '!==n&&'\t'!==n)break;t-=1}const s=(yield*this.pushCount(t))+(yield*this.pushSpaces(!0));return yield*this.pushCount(e.length-s),this.pushNewline(),'stream'}if(this.atLineEnd()){const t=yield*this.pushSpaces(!0);return yield*this.pushCount(e.length-t),yield*this.pushNewline(),'stream'}return yield'',yield*this.parseLineStart()}*parseLineStart(){const e=this.charAt(0);if(!e&&!this.atEnd)return this.setNext('line-start');if('-'===e||'.'===e){if(!this.atEnd&&!this.hasChars(4))return this.setNext('line-start');const e=this.peek(3);if(('---'===e||'...'===e)&&ap(this.charAt(3)))return yield*this.pushCount(3),this.indentValue=0,this.indentNext=0,'---'===e?'doc':'stream'}return this.indentValue=yield*this.pushSpaces(!1),this.indentNext>this.indentValue&&!ap(this.charAt(1))&&(this.indentNext=this.indentValue),yield*this.parseBlockStart()}*parseBlockStart(){const[e,t]=this.peek(2);if(!t&&!this.atEnd)return this.setNext('block-start');if(('-'===e||'?'===e||':'===e)&&ap(t)){const e=(yield*this.pushCount(1))+(yield*this.pushSpaces(!0));return this.indentNext=this.indentValue+1,this.indentValue+=e,yield*this.parseBlockStart()}return'doc'}*parseDocument(){yield*this.pushSpaces(!0);const e=this.getLine();if(null===e)return this.setNext('doc');let t=yield*this.pushIndicators();switch(e[t]){case'#':yield*this.pushCount(e.length-t);case void 0:return yield*this.pushNewline(),yield*this.parseLineStart();case'{':case'[':return yield*this.pushCount(1),this.flowKey=!1,this.flowLevel=1,'flow';case'}':case']':return yield*this.pushCount(1),'doc';case'*':return yield*this.pushUntil(fp),'doc';case'"':case'\'':return yield*this.parseQuotedScalar();case'|':case'>':return t+=(yield*this.parseBlockScalarHeader()),t+=(yield*this.pushSpaces(!0)),yield*this.pushCount(e.length-t),yield*this.pushNewline(),yield*this.parseBlockScalar();default:return yield*this.parsePlainScalar()}}*parseFlowCollection(){let e,t,n=-1;do{e=yield*this.pushNewline(),e>0?(t=yield*this.pushSpaces(!1),this.indentValue=n=t):t=0,t+=(yield*this.pushSpaces(!0))}while(e+t>0);const s=this.getLine();if(null===s)return this.setNext('flow');if(-1!==n&&n<this.indentNext&&'#'!==s[0]||0===n&&(s.startsWith('---')||s.startsWith('...'))&&ap(s[3])){if(!(n===this.indentNext-1&&1===this.flowLevel&&(']'===s[0]||'}'===s[0])))return this.flowLevel=0,yield'',yield*this.parseLineStart()}let o=0;for(;','===s[o];)o+=(yield*this.pushCount(1)),o+=(yield*this.pushSpaces(!0)),this.flowKey=!1;switch(o+=(yield*this.pushIndicators()),s[o]){case void 0:return'flow';case'#':return yield*this.pushCount(s.length-o),'flow';case'{':case'[':return yield*this.pushCount(1),this.flowKey=!1,this.flowLevel+=1,'flow';case'}':case']':return yield*this.pushCount(1),this.flowKey=!0,this.flowLevel-=1,this.flowLevel?'flow':'doc';case'*':return yield*this.pushUntil(fp),'flow';case'"':case'\'':return this.flowKey=!0,yield*this.parseQuotedScalar();case':':{const e=this.charAt(1);if(this.flowKey||ap(e)||','===e)return this.flowKey=!1,yield*this.pushCount(1),yield*this.pushSpaces(!0),'flow'}default:return this.flowKey=!1,yield*this.parsePlainScalar()}}*parseQuotedScalar(){const e=this.charAt(0);let t=this.buffer.indexOf(e,this.pos+1);if('\''===e)for(;-1!==t&&'\''===this.buffer[t+1];)t=this.buffer.indexOf('\'',t+2);else for(;-1!==t;){let e=0;for(;'\\'===this.buffer[t-1-e];)e+=1;if(e%2==0)break;t=this.buffer.indexOf('"',t+1)}const n=this.buffer.substring(0,t);let s=n.indexOf('\n',this.pos);if(-1!==s){for(;-1!==s;){const e=this.continueScalar(s+1);if(-1===e)break;s=n.indexOf('\n',e)}-1!==s&&(t=s-('\r'===n[s-1]?2:1))}if(-1===t){if(!this.atEnd)return this.setNext('quoted-scalar');t=this.buffer.length}return yield*this.pushToIndex(t+1,!1),this.flowLevel?'flow':'doc'}*parseBlockScalarHeader(){this.blockScalarIndent=-1,this.blockScalarKeep=!1;let e=this.pos;for(;;){const t=this.buffer[++e];if('+'===t)this.blockScalarKeep=!0;else if(t>'0'&&t<='9')this.blockScalarIndent=Number(t)-1;else if('-'!==t)break}return yield*this.pushUntil(e=>ap(e)||'#'===e)}*parseBlockScalar(){let e,t=this.pos-1,n=0;e:for(let o=this.pos;e=this.buffer[o];++o)switch(e){case' ':n+=1;break;case'\n':t=o,n=0;break;case'\r':{const e=this.buffer[o+1];if(!e&&!this.atEnd)return this.setNext('block-scalar');if('\n'===e)break}default:break e}if(!e&&!this.atEnd)return this.setNext('block-scalar');if(n>=this.indentNext){-1===this.blockScalarIndent?this.indentNext=n:this.indentNext=this.blockScalarIndent+(0===this.indentNext?1:this.indentNext);do{const e=this.continueScalar(t+1);if(-1===e)break;t=this.buffer.indexOf('\n',e)}while(-1!==t);if(-1===t){if(!this.atEnd)return this.setNext('block-scalar');t=this.buffer.length}}let s=t+1;for(e=this.buffer[s];' '===e;)e=this.buffer[++s];if('\t'===e){for(;'\t'===e||' '===e||'\r'===e||'\n'===e;)e=this.buffer[++s];t=s-1}else if(!this.blockScalarKeep)for(;;){let e=t-1,s=this.buffer[e];'\r'===s&&(s=this.buffer[--e]);const o=e;for(;' '===s;)s=this.buffer[--e];if(!('\n'===s&&e>=this.pos&&e+1+n>o))break;t=e}return yield'',yield*this.pushToIndex(t+1,!0),yield*this.parseLineStart()}*parsePlainScalar(){const e=this.flowLevel>0;let t,n=this.pos-1,s=this.pos-1;for(;t=this.buffer[++s];)if(':'===t){const t=this.buffer[s+1];if(ap(t)||e&&up.has(t))break;n=s}else if(ap(t)){let o=this.buffer[s+1];if('\r'===t&&('\n'===o?(s+=1,t='\n',o=this.buffer[s+1]):n=s),'#'===o||e&&up.has(o))break;if('\n'===t){const e=this.continueScalar(s+1);if(-1===e)break;s=Math.max(s,e-2)}}else{if(e&&up.has(t))break;n=s}return t||this.atEnd?(yield'',yield*this.pushToIndex(n+1,!0),e?'flow':'doc'):this.setNext('plain-scalar')}*pushCount(e){return e>0?(yield this.buffer.substr(this.pos,e),this.pos+=e,e):0}*pushToIndex(e,t){const n=this.buffer.slice(this.pos,e);return n?(yield n,this.pos+=n.length,n.length):(t&&(yield''),0)}*pushIndicators(){switch(this.charAt(0)){case'!':return(yield*this.pushTag())+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators());case'&':return(yield*this.pushUntil(fp))+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators());case'-':case'?':case':':{const e=this.flowLevel>0,t=this.charAt(1);if(ap(t)||e&&up.has(t))return e?this.flowKey&&(this.flowKey=!1):this.indentNext=this.indentValue+1,(yield*this.pushCount(1))+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators())}}return 0}*pushTag(){if('<'===this.charAt(1)){let e=this.pos+2,t=this.buffer[e];for(;!ap(t)&&'>'!==t;)t=this.buffer[++e];return yield*this.pushToIndex('>'===t?e+1:e,!1)}{let e=this.pos+1,t=this.buffer[e];for(;t;)if(cp.has(t))t=this.buffer[++e];else{if('%'!==t||!lp.has(this.buffer[e+1])||!lp.has(this.buffer[e+2]))break;t=this.buffer[e+=3]}return yield*this.pushToIndex(e,!1)}}*pushNewline(){const e=this.buffer[this.pos];return'\n'===e?yield*this.pushCount(1):'\r'===e&&'\n'===this.charAt(1)?yield*this.pushCount(2):0}*pushSpaces(e){let t,n=this.pos-1;do{t=this.buffer[++n]}while(' '===t||e&&'\t'===t);const s=n-this.pos;return s>0&&(yield this.buffer.substr(this.pos,s),this.pos=n),s}*pushUntil(e){let t=this.pos,n=this.buffer[t];for(;!e(n);)n=this.buffer[++t];return yield*this.pushToIndex(t,!1)}}class hp{constructor(){this.lineStarts=[],this.addNewLine=e=>this.lineStarts.push(e),this.linePos=e=>{let t=0,n=this.lineStarts.length;for(;t<n;){const s=t+n>>1;this.lineStarts[s]<e?t=s+1:n=s}if(this.lineStarts[t]===e)return{line:t+1,col:1};if(0===t)return{line:0,col:e};return{line:t,col:e-this.lineStarts[t-1]+1}}}}function mp(e,t){for(let n=0;n<e.length;++n)if(e[n].type===t)return!0;return!1}function gp(e){for(let t=0;t<e.length;++t)switch(e[t].type){case'space':case'comment':case'newline':break;default:return t}return-1}function vp(e){switch(e?.type){case'alias':case'scalar':case'single-quoted-scalar':case'double-quoted-scalar':case'flow-collection':return!0;default:return!1}}function yp(e){switch(e.type){case'document':return e.start;case'block-map':{const t=e.items[e.items.length-1];return t.sep??t.start}case'block-seq':return e.items[e.items.length-1].start;default:return[]}}function bp(e){if(0===e.length)return[];let t=e.length;e:for(;--t>=0;)switch(e[t].type){case'doc-start':case'explicit-key-ind':case'map-value-ind':case'seq-item-ind':case'newline':break e}for(;'space'===e[++t]?.type;);return e.splice(t,e.length)}function _p(e){if('flow-seq-start'===e.start.type)for(const t of e.items)!t.sep||t.value||mp(t.start,'explicit-key-ind')||mp(t.sep,'map-value-ind')||(t.key&&(t.value=t.key),delete t.key,vp(t.value)?t.value.end?Array.prototype.push.apply(t.value.end,t.sep):t.value.end=t.sep:Array.prototype.push.apply(t.start,t.sep),delete t.sep)}class wp{constructor(e){this.atNewLine=!0,this.atScalar=!1,this.indent=0,this.offset=0,this.onKeyLine=!1,this.stack=[],this.source='',this.type='',this.lexer=new pp,this.onNewLine=e}*parse(e,t=!1){this.onNewLine&&0===this.offset&&this.onNewLine(0);for(const n of this.lexer.lex(e,t))yield*this.next(n);t||(yield*this.end())}*next(e){if(this.source=e,this.atScalar)return this.atScalar=!1,yield*this.step(),void(this.offset+=e.length);const t=function(e){switch(e){case'\ufeff':return'byte-order-mark';case'':return'doc-mode';case'':return'flow-error-end';case'':return'scalar';case'---':return'doc-start';case'...':return'doc-end';case'':case'\n':case'\r\n':return'newline';case'-':return'seq-item-ind';case'?':return'explicit-key-ind';case':':return'map-value-ind';case'{':return'flow-map-start';case'}':return'flow-map-end';case'[':return'flow-seq-start';case']':return'flow-seq-end';case',':return'comma'}switch(e[0]){case' ':case'\t':return'space';case'#':return'comment';case'%':return'directive-line';case'*':return'alias';case'&':return'anchor';case'!':return'tag';case'\'':return'single-quoted-scalar';case'"':return'double-quoted-scalar';case'|':case'>':return'block-scalar-header'}return null}(e);if(t)if('scalar'===t)this.atNewLine=!1,this.atScalar=!0,this.type='scalar';else{switch(this.type=t,yield*this.step(),t){case'newline':this.atNewLine=!0,this.indent=0,this.onNewLine&&this.onNewLine(this.offset+e.length);break;case'space':this.atNewLine&&' '===e[0]&&(this.indent+=e.length);break;case'explicit-key-ind':case'map-value-ind':case'seq-item-ind':this.atNewLine&&(this.indent+=e.length);break;case'doc-mode':case'flow-error-end':return;default:this.atNewLine=!1}this.offset+=e.length}else{const t=`Not a YAML token: ${e}`;yield*this.pop({type:'error',offset:this.offset,message:t,source:e}),this.offset+=e.length}}*end(){for(;this.stack.length>0;)yield*this.pop()}get sourceToken(){return{type:this.type,offset:this.offset,indent:this.indent,source:this.source}}*step(){const e=this.peek(1);if('doc-end'!==this.type||'doc-end'===e?.type){if(!e)return yield*this.stream();switch(e.type){case'document':return yield*this.document(e);case'alias':case'scalar':case'single-quoted-scalar':case'double-quoted-scalar':return yield*this.scalar(e);case'block-scalar':return yield*this.blockScalar(e);case'block-map':return yield*this.blockMap(e);case'block-seq':return yield*this.blockSequence(e);case'flow-collection':return yield*this.flowCollection(e);case'doc-end':return yield*this.documentEnd(e)}yield*this.pop()}else{for(;this.stack.length>0;)yield*this.pop();this.stack.push({type:'doc-end',offset:this.offset,source:this.source})}}peek(e){return this.stack[this.stack.length-e]}*pop(e){const t=e??this.stack.pop();if(t)if(0===this.stack.length)yield t;else{const e=this.peek(1);switch('block-scalar'===t.type?t.indent='indent'in e?e.indent:0:'flow-collection'===t.type&&'document'===e.type&&(t.indent=0),'flow-collection'===t.type&&_p(t),e.type){case'document':e.value=t;break;case'block-scalar':e.props.push(t);break;case'block-map':{const n=e.items[e.items.length-1];if(n.value)return e.items.push({start:[],key:t,sep:[]}),void(this.onKeyLine=!0);if(!n.sep)return Object.assign(n,{key:t,sep:[]}),void(this.onKeyLine=!n.explicitKey);n.value=t;break}case'block-seq':{const n=e.items[e.items.length-1];n.value?e.items.push({start:[],value:t}):n.value=t;break}case'flow-collection':{const n=e.items[e.items.length-1];return void(!n||n.value?e.items.push({start:[],key:t,sep:[]}):n.sep?n.value=t:Object.assign(n,{key:t,sep:[]}))}default:yield*this.pop(),yield*this.pop(t)}if(!('document'!==e.type&&'block-map'!==e.type&&'block-seq'!==e.type||'block-map'!==t.type&&'block-seq'!==t.type)){const n=t.items[t.items.length-1];n&&!n.sep&&!n.value&&n.start.length>0&&-1===gp(n.start)&&(0===t.indent||n.start.every(e=>'comment'!==e.type||e.indent<t.indent))&&('document'===e.type?e.end=n.start:e.items.push({start:n.start}),t.items.splice(-1,1))}}else{const e='Tried to pop an empty stack';yield{type:'error',offset:this.offset,source:'',message:e}}}*stream(){switch(this.type){case'directive-line':return void(yield{type:'directive',offset:this.offset,source:this.source});case'byte-order-mark':case'space':case'comment':case'newline':return void(yield this.sourceToken);case'doc-mode':case'doc-start':{const e={type:'document',offset:this.offset,start:[]};return'doc-start'===this.type&&e.start.push(this.sourceToken),void this.stack.push(e)}}yield{type:'error',offset:this.offset,message:`Unexpected ${this.type} token in YAML stream`,source:this.source}}*document(e){if(e.value)return yield*this.lineEnd(e);switch(this.type){case'doc-start':return void(-1!==gp(e.start)?(yield*this.pop(),yield*this.step()):e.start.push(this.sourceToken));case'anchor':case'tag':case'space':case'comment':case'newline':return void e.start.push(this.sourceToken)}const t=this.startBlockValue(e);t?this.stack.push(t):yield{type:'error',offset:this.offset,message:`Unexpected ${this.type} token in YAML document`,source:this.source}}*scalar(e){if('map-value-ind'===this.type){const t=bp(yp(this.peek(2)));let n;e.end?(n=e.end,n.push(this.sourceToken),delete e.end):n=[this.sourceToken];const s={type:'block-map',offset:e.offset,indent:e.indent,items:[{start:t,key:e,sep:n}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=s}else yield*this.lineEnd(e)}*blockScalar(e){switch(this.type){case'space':case'comment':case'newline':return void e.props.push(this.sourceToken);case'scalar':if(e.source=this.source,this.atNewLine=!0,this.indent=0,this.onNewLine){let e=this.source.indexOf('\n')+1;for(;0!==e;)this.onNewLine(this.offset+e),e=this.source.indexOf('\n',e)+1}yield*this.pop();break;default:yield*this.pop(),yield*this.step()}}*blockMap(e){const t=e.items[e.items.length-1];switch(this.type){case'newline':if(this.onKeyLine=!1,t.value){const n='end'in t.value?t.value.end:void 0,s=Array.isArray(n)?n[n.length-1]:void 0;'comment'===s?.type?n?.push(this.sourceToken):e.items.push({start:[this.sourceToken]})}else t.sep?t.sep.push(this.sourceToken):t.start.push(this.sourceToken);return;case'space':case'comment':if(t.value)e.items.push({start:[this.sourceToken]});else if(t.sep)t.sep.push(this.sourceToken);else{if(this.atIndentedComment(t.start,e.indent)){const n=e.items[e.items.length-2],s=n?.value?.end;if(Array.isArray(s))return Array.prototype.push.apply(s,t.start),s.push(this.sourceToken),void e.items.pop()}t.start.push(this.sourceToken)}return}if(this.indent>=e.indent){const n=!this.onKeyLine&&this.indent===e.indent,s=n&&(t.sep||t.explicitKey)&&'seq-item-ind'!==this.type;let o=[];if(s&&t.sep&&!t.value){const n=[];for(let s=0;s<t.sep.length;++s){const o=t.sep[s];switch(o.type){case'newline':n.push(s);break;case'space':break;case'comment':o.indent>e.indent&&(n.length=0);break;default:n.length=0}}n.length>=2&&(o=t.sep.splice(n[1]))}switch(this.type){case'anchor':case'tag':return void(s||t.value?(o.push(this.sourceToken),e.items.push({start:o}),this.onKeyLine=!0):t.sep?t.sep.push(this.sourceToken):t.start.push(this.sourceToken));case'explicit-key-ind':return t.sep||t.explicitKey?s||t.value?(o.push(this.sourceToken),e.items.push({start:o,explicitKey:!0})):this.stack.push({type:'block-map',offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken],explicitKey:!0}]}):(t.start.push(this.sourceToken),t.explicitKey=!0),void(this.onKeyLine=!0);case'map-value-ind':if(t.explicitKey)if(t.sep)if(t.value)e.items.push({start:[],key:null,sep:[this.sourceToken]});else if(mp(t.sep,'map-value-ind'))this.stack.push({type:'block-map',offset:this.offset,indent:this.indent,items:[{start:o,key:null,sep:[this.sourceToken]}]});else if(vp(t.key)&&!mp(t.sep,'newline')){const e=bp(t.start),n=t.key,s=t.sep;s.push(this.sourceToken),delete t.key,delete t.sep,this.stack.push({type:'block-map',offset:this.offset,indent:this.indent,items:[{start:e,key:n,sep:s}]})}else o.length>0?t.sep=t.sep.concat(o,this.sourceToken):t.sep.push(this.sourceToken);else if(mp(t.start,'newline'))Object.assign(t,{key:null,sep:[this.sourceToken]});else{const e=bp(t.start);this.stack.push({type:'block-map',offset:this.offset,indent:this.indent,items:[{start:e,key:null,sep:[this.sourceToken]}]})}else t.sep?t.value||s?e.items.push({start:o,key:null,sep:[this.sourceToken]}):mp(t.sep,'map-value-ind')?this.stack.push({type:'block-map',offset:this.offset,indent:this.indent,items:[{start:[],key:null,sep:[this.sourceToken]}]}):t.sep.push(this.sourceToken):Object.assign(t,{key:null,sep:[this.sourceToken]});return void(this.onKeyLine=!0);case'alias':case'scalar':case'single-quoted-scalar':case'double-quoted-scalar':{const n=this.flowScalar(this.type);return void(s||t.value?(e.items.push({start:o,key:n,sep:[]}),this.onKeyLine=!0):t.sep?this.stack.push(n):(Object.assign(t,{key:n,sep:[]}),this.onKeyLine=!0))}default:{const s=this.startBlockValue(e);if(s){if('block-seq'===s.type){if(!t.explicitKey&&t.sep&&!mp(t.sep,'newline'))return void(yield*this.pop({type:'error',offset:this.offset,message:'Unexpected block-seq-ind on same line with key',source:this.source}))}else n&&e.items.push({start:o});return void this.stack.push(s)}}}}yield*this.pop(),yield*this.step()}*blockSequence(e){const t=e.items[e.items.length-1];switch(this.type){case'newline':if(t.value){const n='end'in t.value?t.value.end:void 0,s=Array.isArray(n)?n[n.length-1]:void 0;'comment'===s?.type?n?.push(this.sourceToken):e.items.push({start:[this.sourceToken]})}else t.start.push(this.sourceToken);return;case'space':case'comment':if(t.value)e.items.push({start:[this.sourceToken]});else{if(this.atIndentedComment(t.start,e.indent)){const n=e.items[e.items.length-2],s=n?.value?.end;if(Array.isArray(s))return Array.prototype.push.apply(s,t.start),s.push(this.sourceToken),void e.items.pop()}t.start.push(this.sourceToken)}return;case'anchor':case'tag':if(t.value||this.indent<=e.indent)break;return void t.start.push(this.sourceToken);case'seq-item-ind':if(this.indent!==e.indent)break;return void(t.value||mp(t.start,'seq-item-ind')?e.items.push({start:[this.sourceToken]}):t.start.push(this.sourceToken))}if(this.indent>e.indent){const t=this.startBlockValue(e);if(t)return void this.stack.push(t)}yield*this.pop(),yield*this.step()}*flowCollection(e){const t=e.items[e.items.length-1];if('flow-error-end'===this.type){let e;do{yield*this.pop(),e=this.peek(1)}while('flow-collection'===e?.type)}else if(0===e.end.length){switch(this.type){case'comma':case'explicit-key-ind':return void(!t||t.sep?e.items.push({start:[this.sourceToken]}):t.start.push(this.sourceToken));case'map-value-ind':return void(!t||t.value?e.items.push({start:[],key:null,sep:[this.sourceToken]}):t.sep?t.sep.push(this.sourceToken):Object.assign(t,{key:null,sep:[this.sourceToken]}));case'space':case'comment':case'newline':case'anchor':case'tag':return void(!t||t.value?e.items.push({start:[this.sourceToken]}):t.sep?t.sep.push(this.sourceToken):t.start.push(this.sourceToken));case'alias':case'scalar':case'single-quoted-scalar':case'double-quoted-scalar':{const n=this.flowScalar(this.type);return void(!t||t.value?e.items.push({start:[],key:n,sep:[]}):t.sep?this.stack.push(n):Object.assign(t,{key:n,sep:[]}))}case'flow-map-end':case'flow-seq-end':return void e.end.push(this.sourceToken)}const n=this.startBlockValue(e);n?this.stack.push(n):(yield*this.pop(),yield*this.step())}else{const t=this.peek(2);if('block-map'===t.type&&('map-value-ind'===this.type&&t.indent===e.indent||'newline'===this.type&&!t.items[t.items.length-1].sep))yield*this.pop(),yield*this.step();else if('map-value-ind'===this.type&&'flow-collection'!==t.type){const n=bp(yp(t));_p(e);const s=e.end.splice(1,e.end.length);s.push(this.sourceToken);const o={type:'block-map',offset:e.offset,indent:e.indent,items:[{start:n,key:e,sep:s}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=o}else yield*this.lineEnd(e)}}flowScalar(e){if(this.onNewLine){let e=this.source.indexOf('\n')+1;for(;0!==e;)this.onNewLine(this.offset+e),e=this.source.indexOf('\n',e)+1}return{type:e,offset:this.offset,indent:this.indent,source:this.source}}startBlockValue(e){switch(this.type){case'alias':case'scalar':case'single-quoted-scalar':case'double-quoted-scalar':return this.flowScalar(this.type);case'block-scalar-header':return{type:'block-scalar',offset:this.offset,indent:this.indent,props:[this.sourceToken],source:''};case'flow-map-start':case'flow-seq-start':return{type:'flow-collection',offset:this.offset,indent:this.indent,start:this.sourceToken,items:[],end:[]};case'seq-item-ind':return{type:'block-seq',offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken]}]};case'explicit-key-ind':{this.onKeyLine=!0;const t=bp(yp(e));return t.push(this.sourceToken),{type:'block-map',offset:this.offset,indent:this.indent,items:[{start:t,explicitKey:!0}]}}case'map-value-ind':{this.onKeyLine=!0;const t=bp(yp(e));return{type:'block-map',offset:this.offset,indent:this.indent,items:[{start:t,key:null,sep:[this.sourceToken]}]}}}return null}atIndentedComment(e,t){return'comment'===this.type&&(!(this.indent<=t)&&e.every(e=>'newline'===e.type||'space'===e.type))}*documentEnd(e){'doc-mode'!==this.type&&(e.end?e.end.push(this.sourceToken):e.end=[this.sourceToken],'newline'===this.type&&(yield*this.pop()))}*lineEnd(e){switch(this.type){case'comma':case'doc-start':case'doc-end':case'flow-seq-end':case'flow-map-end':case'map-value-ind':yield*this.pop(),yield*this.step();break;case'newline':this.onKeyLine=!1;default:e.end?e.end.push(this.sourceToken):e.end=[this.sourceToken],'newline'===this.type&&(yield*this.pop())}}}function kp(e,t={}){const{lineCounter:n,prettyErrors:s}=function(e){const t=!1!==e.prettyErrors;return{lineCounter:e.lineCounter||t&&new hp||null,prettyErrors:t}}(t),o=new wp(n?.addNewLine),i=new rp(t);let r=null;for(const a of i.compose(o.parse(e),!0,e.length))if(r){if('silent'!==r.options.logLevel){r.errors.push(new jf(a.range.slice(0,2),'MULTIPLE_DOCS','Source contains multiple documents; please use YAML.parseAllDocuments()'));break}}else r=a;return s&&n&&(r.errors.forEach(Lf(e,n)),r.warnings.forEach(Lf(e,n))),r}function Sp(e){if(!e)return null;const t=e.match(/```myst\s*\n([\s\S]*?)```/);if(!t)return null;let n=t[1].trim();n=n.replace(/^(\s*)([^:\s]+)\s*:\s*([*:].*)$/gm,(e,t,n,s)=>s.trim().startsWith('"')||s.trim().startsWith('\'')?e:`${t}${n}: "${s.trim()}"`);try{const e=function(e,t,n){let s;const o=kp(e,n);if(!o)return null;if(o.warnings.forEach(e=>vd(o.options.logLevel,e)),o.errors.length>0){if('silent'!==o.options.logLevel)throw o.errors[0];o.errors=[]}return o.toJS(Object.assign({reviver:s},n))}(n);return hu.log('[messageParser]  myst '),e}catch(s){return hu.error('[messageParser]  myst :',s),null}}function xp(e,t){const n={date:e.time||e['']||e.date||'',location:e.place||e['']||e.location||'',weather:e.weather||e['']||'',news:{type:e.news?.type||e['']?.['']||'',title:e.news?.title||e['']?.['']||'',content:e.news?.content||e['']?.['']||''},notes:function(e){if(!e)return'';if(Array.isArray(e))return e.map(e=>`- ${String(e).trim()}`).join('\n');return String(e)}(e.notes||e['']||e['']||'')};const s={};for(const o of t){if(!o.enabled)continue;const t=o.name;if(t&&void 0!==e[t])if('number'===o.type){const n=String(e[t]).trim(),i=n.replace(/%$/,''),r=Number(i);isNaN(r)?s[o.id]=e[t]:s[o.id]={value:r,display:n}}else s[o.id]=String(e[t])}return{...n,customFields:s}}function Ep(n,s,o){hu.log('[messageParser] ');const i=()=>{const e=function(e){const t=a();if(!t.chat||0===t.chat.length)return null;for(let n=t.chat.length-1;n>=0;n--){const s=t.chat[n];if(s.is_user||s.is_system)continue;const o=Sp(s.swipes?.[s.swipe_id]||s.mes);if(o)return hu.log(`[messageParser]  #${n} `),xp(o,e)}return hu.log('[messageParser] '),null}(o());e?n(e):s()};e.on(t.MESSAGE_RECEIVED,()=>{hu.log('[messageParser]  AI '),i()}),e.on(t.MESSAGE_SWIPED,()=>{hu.log('[messageParser]  swipe'),i()}),e.on(t.MESSAGE_EDITED,()=>{hu.log('[messageParser] '),i()}),e.on(t.CHAT_CHANGED,()=>{hu.log('[messageParser] '),i()}),e.on(t.MESSAGE_DELETED,()=>{hu.log('[messageParser] '),i()}),i()}function Tp(e){if(!e.length)return;const t=e.find('.mes_text');t.length&&t.find('pre').each(function(){const e=$(this),t=e.find('code');if(!t.length)return;const n=e.html(),s=t.text();(t.hasClass('language-myst')||n.includes('language-myst')||s.includes(':')&&s.split('\n').length>1)&&(hu.log('[messageRenderer]  myst '),e.hide())})}function Cp(e){Tp($(`#chat .mes[mesid="${e}"]`))}function Np(){hu.log('[messageRenderer]  myst '),$('#chat .mes').each(function(){const e=$(this);e.hasClass('user_mes')||Tp(e)})}const Op={'zh-TW':{'':'','':'','Debug ':'Debug ','':'','':'','':'','':'','':'','':'','':'','':'',English:'English','':'','':'','':'','':'','AI':'AI','':'','':'','':'','':'','':'','':'',' Prompt':' Prompt','Prompt ':'Prompt ',' Prompt':' Prompt',' Prompt':' Prompt','':'','':'','':'','':'','':'','':'','':'','(ov)':'(ov)','AI':'AI','':'','':'','':'','Prompt ':'Prompt ','':'','':'','':'','Prompt':'Prompt','':'','':'','':'','':'','':'','':'','':'','':'','\nPrompt':'\nPrompt','':'',' CSS':' CSS',' CSS':' CSS',' CSS':' CSS','':'',' CSS...':' CSS...','':'','CSS ':'CSS ','CSS ':'CSS ',' CSS ':' CSS ','':'','':'','':'','':''},'zh-CN':{'':'','':'','Debug ':'Debug ','':'','':'','':'','':'','':'','':'','':'','':'',English:'English','':'','':'','':'','':'','AI':'AI','':'','':'','':'','':'','':'','':'',' Prompt':' Prompt','Prompt ':'Prompt ',' Prompt':' Prompt',' Prompt':' Prompt','':'','':'','':'','':'','':'','':'','':'','(ov)':'(ov)','AI':'AI','':'','':'','':'','Prompt ':'Prompt ','':'','':'','':'','Prompt':'Prompt','':'','':'','':'','':'','':'','':'','':'','':'','\nPrompt':'\nPrompt','':'',' CSS':' CSS',' CSS':' CSS',' CSS':' CSS','':'',' CSS...':' CSS...','':'','CSS ':'CSS ','CSS ':'CSS ',' CSS ':' CSS ','':'','':'','':'','':''},en:{'':'Status Tracking','':'Enable Status Panel','Debug ':'Debug Mode','':'Extension Settings','':'Field Settings','':'Panel Position','':'Left','':'Right','':'Language','':'Traditional Chinese','':'Simplified Chinese',English:'English','':'NEWS','':'No fields configured. Please click the \'Field Settings\' button below.','':'Add Field','':'Field Name','AI':'Description to AI','':'Number','':'Text','':'Progress Bar Colors','':'Low Value Color','':'High Value Color','':'Preview',' Prompt':'Copy Prompt','Prompt ':'Prompt copied to clipboard',' Prompt':'Edit Prompts',' Prompt':'Edit Fixed Field Prompts','':'Time','':'Location','':'Weather','':'News Type','':'News Title','':'News Content','':'Notes','(ov)':'No status to track yet (ov)','AI':'Send a message to AI!','':'Restore Defaults','':'Save','':'General Settings','Prompt ':'Prompt Settings','':'Fixed Fields Settings','':'Custom Fields Settings','':'Backup & Restore','Prompt':'Export all settings (fields, prompts, styles, etc.)','':'Export Backup','':'Import Backup','':'Backup exported','':'Success','':'Export failed. Check console.','':'Error','':'Invalid data format','':'Import failed','\nPrompt':'Import this backup?\nThis will overwrite all current settings (fields, prompts, styles, etc.).','':'Backup restored. Please reopen settings to view changes.',' CSS':'Custom CSS',' CSS':'Import CSS',' CSS':'Export CSS','':'Load Example Template',' CSS...':'Enter custom CSS here...','':'Tip: Click \'OK\' button at the bottom of the popup to apply styles after editing','CSS ':'CSS exported','CSS ':'CSS imported. Click \'Save\' to apply',' CSS ':'Loading the example template will overwrite current CSS content. Continue?','':'Example template loaded','':'Import All Settings','':'Export All Settings','':'Backup restored'}},Ap=cu('i18n',()=>{const e=fu(),t=Jl(()=>e.settings.language);return{currentLanguage:t,t:function(e,...n){let s;s='string'==typeof e?e:e[0];const o=t.value,i=Op[o];return i&&i[s]?i[s]:s}}}),Ip={class:'status-tracking-settings'},$p={class:'inline-drawer'},Pp={class:'inline-drawer-toggle inline-drawer-header'},Dp={class:'inline-drawer-content'},jp={class:'toggles-container'},zp={class:'toggle-item'},Lp={for:'status-tracking_enabled'},Mp={class:'toggle-item'},Fp={for:'status-tracking_debug'},Rp=ga({__name:'Panel',setup(e){const{settings:t}=uu(fu()),{t:n}=Ap();return(e,s)=>(vl(),wl('div',Ip,[Cl('div',$p,[Cl('div',Pp,[Cl('b',null,si($r(n)``),1),s[2]||(s[2]=Cl('div',{class:'inline-drawer-icon fa-solid fa-circle-chevron-down down'},null,-1))]),Cl('div',Dp,[Cl('div',jp,[Cl('div',zp,[da(Cl('input',{id:'status-tracking_enabled','onUpdate:modelValue':s[0]||(s[0]=e=>$r(t).panel_enabled=e),type:'checkbox'},null,512),[[Dc,$r(t).panel_enabled]]),Cl('label',Lp,si($r(n)``),1)]),Cl('div',Mp,[da(Cl('input',{id:'status-tracking_debug','onUpdate:modelValue':s[1]||(s[1]=e=>$r(t).debug_mode=e),type:'checkbox'},null,512),[[Dc,$r(t).debug_mode]]),Cl('label',Fp,si($r(n)`Debug `),1)])]),s[3]||(s[3]=Il('<hr class="sysHR"><div class="links-container"><a href="https://github.com/lilminzyu" target="_blank" class="menu_button link-button"><i class="fa-brands fa-github"></i> GitHub </a><a href="https://discord.gg/NFmesS7ubb" target="_blank" class="menu_button link-button"><i class="fa-brands fa-discord"></i> Discord </a></div>',2))])])]))}}),Bp=Uc(Rp),Up=Hc();Bp.use(Up);const Vp={install:e=>{e.config.globalProperties.t=l}};
/**!
 * Sortable 1.15.6
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */
function Kp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,s)}return n}function Zp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Kp(Object(n),!0).forEach(function(t){Wp(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Kp(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function qp(e){return qp='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&'function'==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?'symbol':typeof e},qp(e)}function Wp(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Yp(){return Yp=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Yp.apply(this,arguments)}function Hp(e,t){if(null==e)return{};var n,s,o=function(e,t){if(null==e)return{};var n,s,o={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}Bp.use(Vp);function Gp(e){if('undefined'!=typeof window&&window.navigator)return!!navigator.userAgent.match(e)}var Jp=Gp(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Xp=Gp(/Edge/i),Qp=Gp(/firefox/i),eh=Gp(/safari/i)&&!Gp(/chrome/i)&&!Gp(/android/i),th=Gp(/iP(ad|od|hone)/i),nh=Gp(/chrome/i)&&Gp(/android/i),sh={capture:!1,passive:!1};function oh(e,t,n){e.addEventListener(t,n,!Jp&&sh)}function ih(e,t,n){e.removeEventListener(t,n,!Jp&&sh)}function rh(e,t){if(t){if('>'===t[0]&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch(_){return!1}return!1}}function ah(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function lh(e,t,n,s){if(e){n=n||document;do{if(null!=t&&('>'===t[0]?e.parentNode===n&&rh(e,t):rh(e,t))||s&&e===n)return e;if(e===n)break}while(e=ah(e))}return null}var ch,uh=/\s+/g;function dh(e,t,n){if(e&&t)if(e.classList)e.classList[n?'add':'remove'](t);else{var s=(' '+e.className+' ').replace(uh,' ').replace(' '+t+' ',' ');e.className=(s+(n?' '+t:'')).replace(uh,' ')}}function fh(e,t,n){var s=e&&e.style;if(s){if(void 0===n)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(e,''):e.currentStyle&&(n=e.currentStyle),void 0===t?n:n[t];t in s||-1!==t.indexOf('webkit')||(t='-webkit-'+t),s[t]=n+('string'==typeof n?'':'px')}}function ph(e,t){var n='';if('string'==typeof e)n=e;else do{var s=fh(e,'transform');s&&'none'!==s&&(n=s+' '+n)}while(!t&&(e=e.parentNode));var o=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return o&&new o(n)}function hh(e,t,n){if(e){var s=e.getElementsByTagName(t),o=0,i=s.length;if(n)for(;o<i;o++)n(s[o],o);return s}return[]}function mh(){var e=document.scrollingElement;return e||document.documentElement}function gh(e,t,n,s,o){if(e.getBoundingClientRect||e===window){var i,r,a,l,c,u,d;if(e!==window&&e.parentNode&&e!==mh()?(r=(i=e.getBoundingClientRect()).top,a=i.left,l=i.bottom,c=i.right,u=i.height,d=i.width):(r=0,a=0,l=window.innerHeight,c=window.innerWidth,u=window.innerHeight,d=window.innerWidth),(t||n)&&e!==window&&(o=o||e.parentNode,!Jp))do{if(o&&o.getBoundingClientRect&&('none'!==fh(o,'transform')||n&&'static'!==fh(o,'position'))){var f=o.getBoundingClientRect();r-=f.top+parseInt(fh(o,'border-top-width')),a-=f.left+parseInt(fh(o,'border-left-width')),l=r+i.height,c=a+i.width;break}}while(o=o.parentNode);if(s&&e!==window){var p=ph(o||e),h=p&&p.a,m=p&&p.d;p&&(l=(r/=m)+(u/=m),c=(a/=h)+(d/=h))}return{top:r,left:a,bottom:l,right:c,width:d,height:u}}}function vh(e,t,n){for(var s=kh(e,!0),o=gh(e)[t];s;){if(!(o>=gh(s)[n]))return s;if(s===mh())break;s=kh(s,!1)}return!1}function yh(e,t,n,s){for(var o=0,i=0,r=e.children;i<r.length;){if('none'!==r[i].style.display&&r[i]!==Tm.ghost&&(s||r[i]!==Tm.dragged)&&lh(r[i],n.draggable,e,!1)){if(o===t)return r[i];o++}i++}return null}function bh(e,t){for(var n=e.lastElementChild;n&&(n===Tm.ghost||'none'===fh(n,'display')||t&&!rh(n,t));)n=n.previousElementSibling;return n||null}function _h(e,t){var n=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)'TEMPLATE'===e.nodeName.toUpperCase()||e===Tm.clone||t&&!rh(e,t)||n++;return n}function wh(e){var t=0,n=0,s=mh();if(e)do{var o=ph(e),i=o.a,r=o.d;t+=e.scrollLeft*i,n+=e.scrollTop*r}while(e!==s&&(e=e.parentNode));return[t,n]}function kh(e,t){if(!e||!e.getBoundingClientRect)return mh();var n=e,s=!1;do{if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var o=fh(n);if(n.clientWidth<n.scrollWidth&&('auto'==o.overflowX||'scroll'==o.overflowX)||n.clientHeight<n.scrollHeight&&('auto'==o.overflowY||'scroll'==o.overflowY)){if(!n.getBoundingClientRect||n===document.body)return mh();if(s||t)return n;s=!0}}}while(n=n.parentNode);return mh()}function Sh(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}function xh(e,t){return function(){if(!ch){var n=arguments;1===n.length?e.call(this,n[0]):e.apply(this,n),ch=setTimeout(function(){ch=void 0},t)}}}function Eh(e,t,n){e.scrollLeft+=t,e.scrollTop+=n}function Th(e){var t=window.Polymer,$=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):$?$(e).clone(!0)[0]:e.cloneNode(!0)}function Ch(e,t,n){var s={};return Array.from(e.children).forEach(function(o){var i,r,a,l;if(lh(o,t.draggable,e,!1)&&!o.animated&&o!==n){var c=gh(o);s.left=Math.min(null!==(i=s.left)&&void 0!==i?i:1/0,c.left),s.top=Math.min(null!==(r=s.top)&&void 0!==r?r:1/0,c.top),s.right=Math.max(null!==(a=s.right)&&void 0!==a?a:-1/0,c.right),s.bottom=Math.max(null!==(l=s.bottom)&&void 0!==l?l:-1/0,c.bottom)}}),s.width=s.right-s.left,s.height=s.bottom-s.top,s.x=s.left,s.y=s.top,s}var Nh='Sortable'+(new Date).getTime();function Oh(){var e,t=[];return{captureAnimationState:function(){(t=[],this.options.animation)&&[].slice.call(this.el.children).forEach(function(e){if('none'!==fh(e,'display')&&e!==Tm.ghost){t.push({target:e,rect:gh(e)});var n=Zp({},t[t.length-1].rect);if(e.thisAnimationDuration){var s=ph(e,!0);s&&(n.top-=s.f,n.left-=s.e)}e.fromRect=n}})},addAnimationState:function(e){t.push(e)},removeAnimationState:function(e){t.splice(function(e,t){for(var n in e)if(e.hasOwnProperty(n))for(var s in t)if(t.hasOwnProperty(s)&&t[s]===e[n][s])return Number(n);return-1}(t,{target:e}),1)},animateAll:function(n){var s=this;if(!this.options.animation)return clearTimeout(e),void('function'==typeof n&&n());var o=!1,i=0;t.forEach(function(e){var t=0,n=e.target,r=n.fromRect,a=gh(n),l=n.prevFromRect,c=n.prevToRect,u=e.rect,d=ph(n,!0);d&&(a.top-=d.f,a.left-=d.e),n.toRect=a,n.thisAnimationDuration&&Sh(l,a)&&!Sh(r,a)&&(u.top-a.top)/(u.left-a.left)===(r.top-a.top)/(r.left-a.left)&&(t=function(e,t,n,s){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-n.top,2)+Math.pow(t.left-n.left,2))*s.animation}(u,l,c,s.options)),Sh(a,r)||(n.prevFromRect=r,n.prevToRect=a,t||(t=s.options.animation),s.animate(n,u,a,t)),t&&(o=!0,i=Math.max(i,t),clearTimeout(n.animationResetTimer),n.animationResetTimer=setTimeout(function(){n.animationTime=0,n.prevFromRect=null,n.fromRect=null,n.prevToRect=null,n.thisAnimationDuration=null},t),n.thisAnimationDuration=t)}),clearTimeout(e),o?e=setTimeout(function(){'function'==typeof n&&n()},i):'function'==typeof n&&n(),t=[]},animate:function(e,t,n,s){if(s){fh(e,'transition',''),fh(e,'transform','');var o=ph(this.el),i=o&&o.a,r=o&&o.d,a=(t.left-n.left)/(i||1),l=(t.top-n.top)/(r||1);e.animatingX=!!a,e.animatingY=!!l,fh(e,'transform','translate3d('+a+'px,'+l+'px,0)'),this.forRepaintDummy=function(e){return e.offsetWidth}(e),fh(e,'transition','transform '+s+'ms'+(this.options.easing?' '+this.options.easing:'')),fh(e,'transform','translate3d(0,0,0)'),'number'==typeof e.animated&&clearTimeout(e.animated),e.animated=setTimeout(function(){fh(e,'transition',''),fh(e,'transform',''),e.animated=!1,e.animatingX=!1,e.animatingY=!1},s)}}}}var Ah=[],Ih={initializeByDefault:!0},$h={mount:function(e){for(var t in Ih)Ih.hasOwnProperty(t)&&!(t in e)&&(e[t]=Ih[t]);Ah.forEach(function(t){if(t.pluginName===e.pluginName)throw'Sortable: Cannot mount plugin '.concat(e.pluginName,' more than once')}),Ah.push(e)},pluginEvent:function(e,t,n){var s=this;this.eventCanceled=!1,n.cancel=function(){s.eventCanceled=!0};var o=e+'Global';Ah.forEach(function(s){t[s.pluginName]&&(t[s.pluginName][o]&&t[s.pluginName][o](Zp({sortable:t},n)),t.options[s.pluginName]&&t[s.pluginName][e]&&t[s.pluginName][e](Zp({sortable:t},n)))})},initializePlugins:function(e,t,n,s){for(var o in Ah.forEach(function(s){var o=s.pluginName;if(e.options[o]||s.initializeByDefault){var i=new s(e,t,e.options);i.sortable=e,i.options=e.options,e[o]=i,Yp(n,i.defaults)}}),e.options)if(e.options.hasOwnProperty(o)){var i=this.modifyOption(e,o,e.options[o]);void 0!==i&&(e.options[o]=i)}},getEventProperties:function(e,t){var n={};return Ah.forEach(function(s){'function'==typeof s.eventProperties&&Yp(n,s.eventProperties.call(t[s.pluginName],e))}),n},modifyOption:function(e,t,n){var s;return Ah.forEach(function(o){e[o.pluginName]&&o.optionListeners&&'function'==typeof o.optionListeners[t]&&(s=o.optionListeners[t].call(e[o.pluginName],n))}),s}};var Ph=['evt'],Dh=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=n.evt,o=Hp(n,Ph);$h.pluginEvent.bind(Tm)(e,t,Zp({dragEl:zh,parentEl:Lh,ghostEl:Mh,rootEl:Fh,nextEl:Rh,lastDownEl:Bh,cloneEl:Uh,cloneHidden:Vh,dragStarted:nm,putSortable:Hh,activeSortable:Tm.active,originalEvent:s,oldIndex:Kh,oldDraggableIndex:qh,newIndex:Zh,newDraggableIndex:Wh,hideGhostForTarget:km,unhideGhostForTarget:Sm,cloneNowHidden:function(){Vh=!0},cloneNowShown:function(){Vh=!1},dispatchSortableEvent:function(e){jh({sortable:t,name:e,originalEvent:s})}},o))};function jh(e){!function(e){var t=e.sortable,n=e.rootEl,s=e.name,o=e.targetEl,i=e.cloneEl,r=e.toEl,a=e.fromEl,l=e.oldIndex,c=e.newIndex,u=e.oldDraggableIndex,d=e.newDraggableIndex,f=e.originalEvent,p=e.putSortable,h=e.extraEventProperties;if(t=t||n&&n[Nh]){var m,g=t.options,v='on'+s.charAt(0).toUpperCase()+s.substr(1);!window.CustomEvent||Jp||Xp?(m=document.createEvent('Event')).initEvent(s,!0,!0):m=new CustomEvent(s,{bubbles:!0,cancelable:!0}),m.to=r||n,m.from=a||n,m.item=o||n,m.clone=i,m.oldIndex=l,m.newIndex=c,m.oldDraggableIndex=u,m.newDraggableIndex=d,m.originalEvent=f,m.pullMode=p?p.lastPutMode:void 0;var y=Zp(Zp({},h),$h.getEventProperties(s,t));for(var b in y)m[b]=y[b];n&&n.dispatchEvent(m),g[v]&&g[v].call(t,m)}}(Zp({putSortable:Hh,cloneEl:Uh,targetEl:zh,rootEl:Fh,oldIndex:Kh,oldDraggableIndex:qh,newIndex:Zh,newDraggableIndex:Wh},e))}var zh,Lh,Mh,Fh,Rh,Bh,Uh,Vh,Kh,Zh,qh,Wh,Yh,Hh,Gh,Jh,Xh,Qh,em,tm,nm,sm,om,im,rm,am=!1,lm=!1,cm=[],um=!1,dm=!1,fm=[],pm=!1,hm=[],mm='undefined'!=typeof document,gm=th,vm=Xp||Jp?'cssFloat':'float',ym=mm&&!nh&&!th&&'draggable'in document.createElement('div'),bm=function(){if(mm){if(Jp)return!1;var e=document.createElement('x');return e.style.cssText='pointer-events:auto','auto'===e.style.pointerEvents}}(),_m=function(e,t){var n=fh(e),s=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),o=yh(e,0,t),i=yh(e,1,t),r=o&&fh(o),a=i&&fh(i),l=r&&parseInt(r.marginLeft)+parseInt(r.marginRight)+gh(o).width,c=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+gh(i).width;if('flex'===n.display)return'column'===n.flexDirection||'column-reverse'===n.flexDirection?'vertical':'horizontal';if('grid'===n.display)return n.gridTemplateColumns.split(' ').length<=1?'vertical':'horizontal';if(o&&r.float&&'none'!==r.float){var u='left'===r.float?'left':'right';return!i||'both'!==a.clear&&a.clear!==u?'horizontal':'vertical'}return o&&('block'===r.display||'flex'===r.display||'table'===r.display||'grid'===r.display||l>=s&&'none'===n[vm]||i&&'none'===n[vm]&&l+c>s)?'vertical':'horizontal'},wm=function(e){function t(e,n){return function(s,o,i,r){var a=s.options.group.name&&o.options.group.name&&s.options.group.name===o.options.group.name;if(null==e&&(n||a))return!0;if(null==e||!1===e)return!1;if(n&&'clone'===e)return e;if('function'==typeof e)return t(e(s,o,i,r),n)(s,o,i,r);var l=(n?s:o).options.group.name;return!0===e||'string'==typeof e&&e===l||e.join&&e.indexOf(l)>-1}}var n={},s=e.group;s&&'object'==qp(s)||(s={name:s}),n.name=s.name,n.checkPull=t(s.pull,!0),n.checkPut=t(s.put),n.revertClone=s.revertClone,e.group=n},km=function(){!bm&&Mh&&fh(Mh,'display','none')},Sm=function(){!bm&&Mh&&fh(Mh,'display','')};mm&&!nh&&document.addEventListener('click',function(e){if(lm)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),lm=!1,!1},!0);var xm=function(e){if(zh){e=e.touches?e.touches[0]:e;var t=(o=e.clientX,i=e.clientY,cm.some(function(e){var t=e[Nh].options.emptyInsertThreshold;if(t&&!bh(e)){var n=gh(e),s=o>=n.left-t&&o<=n.right+t,a=i>=n.top-t&&i<=n.bottom+t;return s&&a?r=e:void 0}}),r);if(t){var n={};for(var s in e)e.hasOwnProperty(s)&&(n[s]=e[s]);n.target=n.rootEl=t,n.preventDefault=void 0,n.stopPropagation=void 0,t[Nh]._onDragOver(n)}}var o,i,r},Em=function(e){zh&&zh.parentNode[Nh]._isOutsideThisEl(e.target)};function Tm(e,t){if(!e||!e.nodeType||1!==e.nodeType)throw'Sortable: `el` must be an HTMLElement, not '.concat({}.toString.call(e));this.el=e,this.options=t=Yp({},t),e[Nh]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?'>li':'>*',swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return _m(e,this.options)},ghostClass:'sortable-ghost',chosenClass:'sortable-chosen',dragClass:'sortable-drag',ignore:'a, img',filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(e,t){e.setData('Text',t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:'data-id',delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:'sortable-fallback',fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==Tm.supportPointer&&'PointerEvent'in window&&(!eh||th),emptyInsertThreshold:5};for(var s in $h.initializePlugins(this,e,n),n)!(s in t)&&(t[s]=n[s]);for(var o in wm(t),this)'_'===o.charAt(0)&&'function'==typeof this[o]&&(this[o]=this[o].bind(this));this.nativeDraggable=!t.forceFallback&&ym,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?oh(e,'pointerdown',this._onTapStart):(oh(e,'mousedown',this._onTapStart),oh(e,'touchstart',this._onTapStart)),this.nativeDraggable&&(oh(e,'dragover',this),oh(e,'dragenter',this)),cm.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),Yp(this,Oh())}function Cm(e,t,n,s,o,i,r,a){var l,c,u=e[Nh],d=u.options.onMove;return!window.CustomEvent||Jp||Xp?(l=document.createEvent('Event')).initEvent('move',!0,!0):l=new CustomEvent('move',{bubbles:!0,cancelable:!0}),l.to=t,l.from=e,l.dragged=n,l.draggedRect=s,l.related=o||t,l.relatedRect=i||gh(t),l.willInsertAfter=a,l.originalEvent=r,e.dispatchEvent(l),d&&(c=d.call(u,l,r)),c}function Nm(e){e.draggable=!1}function Om(){pm=!1}function Am(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,n=t.length,s=0;n--;)s+=t.charCodeAt(n);return s.toString(36)}function Im(e){return setTimeout(e,0)}function $m(e){return clearTimeout(e)}Tm.prototype={constructor:Tm,_isOutsideThisEl:function(e){this.el.contains(e)||e===this.el||(sm=null)},_getDirection:function(e,t){return'function'==typeof this.options.direction?this.options.direction.call(this,e,t,zh):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t=this,n=this.el,s=this.options,o=s.preventOnFilter,i=e.type,r=e.touches&&e.touches[0]||e.pointerType&&'touch'===e.pointerType&&e,a=(r||e).target,l=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||a,c=s.filter;if(function(e){hm.length=0;var t=e.getElementsByTagName('input'),n=t.length;for(;n--;){var s=t[n];s.checked&&hm.push(s)}}(n),!zh&&!(/mousedown|pointerdown/.test(i)&&0!==e.button||s.disabled)&&!l.isContentEditable&&(this.nativeDraggable||!eh||!a||'SELECT'!==a.tagName.toUpperCase())&&!((a=lh(a,s.draggable,n,!1))&&a.animated||Bh===a)){if(Kh=_h(a),qh=_h(a,s.draggable),'function'==typeof c){if(c.call(this,e,a,this))return jh({sortable:t,rootEl:l,name:'filter',targetEl:a,toEl:n,fromEl:n}),Dh('filter',t,{evt:e}),void(o&&e.preventDefault())}else if(c&&(c=c.split(',').some(function(s){if(s=lh(l,s.trim(),n,!1))return jh({sortable:t,rootEl:s,name:'filter',targetEl:a,fromEl:n,toEl:n}),Dh('filter',t,{evt:e}),!0})))return void(o&&e.preventDefault());s.handle&&!lh(l,s.handle,n,!1)||this._prepareDragStart(e,r,a)}}},_prepareDragStart:function(e,t,n){var s,o=this,i=o.el,r=o.options,a=i.ownerDocument;if(n&&!zh&&n.parentNode===i){var l=gh(n);if(Fh=i,Lh=(zh=n).parentNode,Rh=zh.nextSibling,Bh=n,Yh=r.group,Tm.dragged=zh,Gh={target:zh,clientX:(t||e).clientX,clientY:(t||e).clientY},em=Gh.clientX-l.left,tm=Gh.clientY-l.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,zh.style['will-change']='all',s=function(){Dh('delayEnded',o,{evt:e}),Tm.eventCanceled?o._onDrop():(o._disableDelayedDragEvents(),!Qp&&o.nativeDraggable&&(zh.draggable=!0),o._triggerDragStart(e,t),jh({sortable:o,name:'choose',originalEvent:e}),dh(zh,r.chosenClass,!0))},r.ignore.split(',').forEach(function(e){hh(zh,e.trim(),Nm)}),oh(a,'dragover',xm),oh(a,'mousemove',xm),oh(a,'touchmove',xm),r.supportPointer?(oh(a,'pointerup',o._onDrop),!this.nativeDraggable&&oh(a,'pointercancel',o._onDrop)):(oh(a,'mouseup',o._onDrop),oh(a,'touchend',o._onDrop),oh(a,'touchcancel',o._onDrop)),Qp&&this.nativeDraggable&&(this.options.touchStartThreshold=4,zh.draggable=!0),Dh('delayStart',this,{evt:e}),!r.delay||r.delayOnTouchOnly&&!t||this.nativeDraggable&&(Xp||Jp))s();else{if(Tm.eventCanceled)return void this._onDrop();r.supportPointer?(oh(a,'pointerup',o._disableDelayedDrag),oh(a,'pointercancel',o._disableDelayedDrag)):(oh(a,'mouseup',o._disableDelayedDrag),oh(a,'touchend',o._disableDelayedDrag),oh(a,'touchcancel',o._disableDelayedDrag)),oh(a,'mousemove',o._delayedDragTouchMoveHandler),oh(a,'touchmove',o._delayedDragTouchMoveHandler),r.supportPointer&&oh(a,'pointermove',o._delayedDragTouchMoveHandler),o._dragStartTimer=setTimeout(s,r.delay)}}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){zh&&Nm(zh),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;ih(e,'mouseup',this._disableDelayedDrag),ih(e,'touchend',this._disableDelayedDrag),ih(e,'touchcancel',this._disableDelayedDrag),ih(e,'pointerup',this._disableDelayedDrag),ih(e,'pointercancel',this._disableDelayedDrag),ih(e,'mousemove',this._delayedDragTouchMoveHandler),ih(e,'touchmove',this._delayedDragTouchMoveHandler),ih(e,'pointermove',this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||'touch'==e.pointerType&&e,!this.nativeDraggable||t?this.options.supportPointer?oh(document,'pointermove',this._onTouchMove):oh(document,t?'touchmove':'mousemove',this._onTouchMove):(oh(zh,'dragend',this),oh(Fh,'dragstart',this._onDragStart));try{document.selection?Im(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch(n){}},_dragStarted:function(e,t){if(am=!1,Fh&&zh){Dh('dragStarted',this,{evt:t}),this.nativeDraggable&&oh(document,'dragover',Em);var n=this.options;!e&&dh(zh,n.dragClass,!1),dh(zh,n.ghostClass,!0),Tm.active=this,e&&this._appendGhost(),jh({sortable:this,name:'start',originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(Jh){this._lastX=Jh.clientX,this._lastY=Jh.clientY,km();for(var e=document.elementFromPoint(Jh.clientX,Jh.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(Jh.clientX,Jh.clientY))!==t;)t=e;if(zh.parentNode[Nh]._isOutsideThisEl(e),t)do{if(t[Nh]){if(t[Nh]._onDragOver({clientX:Jh.clientX,clientY:Jh.clientY,target:e,rootEl:t})&&!this.options.dragoverBubble)break}e=t}while(t=ah(t));Sm()}},_onTouchMove:function(e){if(Gh){var t=this.options,n=t.fallbackTolerance,s=t.fallbackOffset,o=e.touches?e.touches[0]:e,i=Mh&&ph(Mh,!0),r=Mh&&i&&i.a,a=Mh&&i&&i.d,l=gm&&rm&&wh(rm),c=(o.clientX-Gh.clientX+s.x)/(r||1)+(l?l[0]-fm[0]:0)/(r||1),u=(o.clientY-Gh.clientY+s.y)/(a||1)+(l?l[1]-fm[1]:0)/(a||1);if(!Tm.active&&!am){if(n&&Math.max(Math.abs(o.clientX-this._lastX),Math.abs(o.clientY-this._lastY))<n)return;this._onDragStart(e,!0)}if(Mh){i?(i.e+=c-(Xh||0),i.f+=u-(Qh||0)):i={a:1,b:0,c:0,d:1,e:c,f:u};var d='matrix('.concat(i.a,',').concat(i.b,',').concat(i.c,',').concat(i.d,',').concat(i.e,',').concat(i.f,')');fh(Mh,'webkitTransform',d),fh(Mh,'mozTransform',d),fh(Mh,'msTransform',d),fh(Mh,'transform',d),Xh=c,Qh=u,Jh=o}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!Mh){var e=this.options.fallbackOnBody?document.body:Fh,t=gh(zh,!0,gm,!0,e),n=this.options;if(gm){for(rm=e;'static'===fh(rm,'position')&&'none'===fh(rm,'transform')&&rm!==document;)rm=rm.parentNode;rm!==document.body&&rm!==document.documentElement?(rm===document&&(rm=mh()),t.top+=rm.scrollTop,t.left+=rm.scrollLeft):rm=mh(),fm=wh(rm)}dh(Mh=zh.cloneNode(!0),n.ghostClass,!1),dh(Mh,n.fallbackClass,!0),dh(Mh,n.dragClass,!0),fh(Mh,'transition',''),fh(Mh,'transform',''),fh(Mh,'box-sizing','border-box'),fh(Mh,'margin',0),fh(Mh,'top',t.top),fh(Mh,'left',t.left),fh(Mh,'width',t.width),fh(Mh,'height',t.height),fh(Mh,'opacity','0.8'),fh(Mh,'position',gm?'absolute':'fixed'),fh(Mh,'zIndex','100000'),fh(Mh,'pointerEvents','none'),Tm.ghost=Mh,e.appendChild(Mh),fh(Mh,'transform-origin',em/parseInt(Mh.style.width)*100+'% '+tm/parseInt(Mh.style.height)*100+'%')}},_onDragStart:function(e,t){var n=this,s=e.dataTransfer,o=n.options;Dh('dragStart',this,{evt:e}),Tm.eventCanceled?this._onDrop():(Dh('setupClone',this),Tm.eventCanceled||((Uh=Th(zh)).removeAttribute('id'),Uh.draggable=!1,Uh.style['will-change']='',this._hideClone(),dh(Uh,this.options.chosenClass,!1),Tm.clone=Uh),n.cloneId=Im(function(){Dh('clone',n),Tm.eventCanceled||(n.options.removeCloneOnHide||Fh.insertBefore(Uh,zh),n._hideClone(),jh({sortable:n,name:'clone'}))}),!t&&dh(zh,o.dragClass,!0),t?(lm=!0,n._loopId=setInterval(n._emulateDragOver,50)):(ih(document,'mouseup',n._onDrop),ih(document,'touchend',n._onDrop),ih(document,'touchcancel',n._onDrop),s&&(s.effectAllowed='move',o.setData&&o.setData.call(n,s,zh)),oh(document,'drop',n),fh(zh,'transform','translateZ(0)')),am=!0,n._dragStartId=Im(n._dragStarted.bind(n,t,e)),oh(document,'selectstart',n),nm=!0,window.getSelection().removeAllRanges(),eh&&fh(document.body,'user-select','none'))},_onDragOver:function(e){var t,n,s,o,i=this.el,r=e.target,a=this.options,l=a.group,c=Tm.active,u=Yh===l,d=a.sort,f=Hh||c,p=this,h=!1;if(!pm){if(void 0!==e.preventDefault&&e.cancelable&&e.preventDefault(),r=lh(r,a.draggable,i,!0),A('dragOver'),Tm.eventCanceled)return h;if(zh.contains(e.target)||r.animated&&r.animatingX&&r.animatingY||p._ignoreWhileAnimating===r)return P(!1);if(lm=!1,c&&!a.disabled&&(u?d||(s=Lh!==Fh):Hh===this||(this.lastPutMode=Yh.checkPull(this,c,zh,e))&&l.checkPut(this,c,zh,e))){if(o='vertical'===this._getDirection(e,r),t=gh(zh),A('dragOverValid'),Tm.eventCanceled)return h;if(s)return Lh=Fh,I(),this._hideClone(),A('revert'),Tm.eventCanceled||(Rh?Fh.insertBefore(zh,Rh):Fh.appendChild(zh)),P(!0);var m=bh(i,a.draggable);if(!m||function(e,t,n){var s=gh(bh(n.el,n.options.draggable)),o=Ch(n.el,n.options,Mh),i=10;return t?e.clientX>o.right+i||e.clientY>s.bottom&&e.clientX>s.left:e.clientY>o.bottom+i||e.clientX>s.right&&e.clientY>s.top}(e,o,this)&&!m.animated){if(m===zh)return P(!1);if(m&&i===e.target&&(r=m),r&&(n=gh(r)),!1!==Cm(Fh,i,zh,t,r,n,e,!!r))return I(),m&&m.nextSibling?i.insertBefore(zh,m.nextSibling):i.appendChild(zh),Lh=i,D(),P(!0)}else if(m&&function(e,t,n){var s=gh(yh(n.el,0,n.options,!0)),o=Ch(n.el,n.options,Mh),i=10;return t?e.clientX<o.left-i||e.clientY<s.top&&e.clientX<s.right:e.clientY<o.top-i||e.clientY<s.bottom&&e.clientX<s.left}(e,o,this)){var g=yh(i,0,a,!0);if(g===zh)return P(!1);if(n=gh(r=g),!1!==Cm(Fh,i,zh,t,r,n,e,!1))return I(),i.insertBefore(zh,g),Lh=i,D(),P(!0)}else if(r.parentNode===i){n=gh(r);var v,y,b,w=zh.parentNode!==i,k=!function(e,t,n){var s=n?e.left:e.top,o=n?e.right:e.bottom,i=n?e.width:e.height,r=n?t.left:t.top,a=n?t.right:t.bottom,l=n?t.width:t.height;return s===r||o===a||s+i/2===r+l/2}(zh.animated&&zh.toRect||t,r.animated&&r.toRect||n,o),S=o?'top':'left',x=vh(r,'top','top')||vh(zh,'top','top'),E=x?x.scrollTop:void 0;if(sm!==r&&(y=n[S],um=!1,dm=!k&&a.invertSwap||w),v=function(e,t,n,s,o,i,r,a){var l=s?e.clientY:e.clientX,c=s?n.height:n.width,u=s?n.top:n.left,d=s?n.bottom:n.right,f=!1;if(!r)if(a&&im<c*o){if(!um&&(1===om?l>u+c*i/2:l<d-c*i/2)&&(um=!0),um)f=!0;else if(1===om?l<u+im:l>d-im)return-om}else if(l>u+c*(1-o)/2&&l<d-c*(1-o)/2)return function(e){return _h(zh)<_h(e)?1:-1}(t);if((f=f||r)&&(l<u+c*i/2||l>d-c*i/2))return l>u+c/2?1:-1;return 0}(e,r,n,o,k?1:a.swapThreshold,null==a.invertedSwapThreshold?a.swapThreshold:a.invertedSwapThreshold,dm,sm===r),0!==v){var T=_h(zh);do{T-=v,b=Lh.children[T]}while(b&&('none'===fh(b,'display')||b===Mh))}if(0===v||b===r)return P(!1);sm=r,om=v;var C=r.nextElementSibling,N=!1,O=Cm(Fh,i,zh,t,r,n,e,N=1===v);if(!1!==O)return 1!==O&&-1!==O||(N=1===O),pm=!0,setTimeout(Om,30),I(),N&&!C?i.appendChild(zh):r.parentNode.insertBefore(zh,N?C:r),x&&Eh(x,0,E-x.scrollTop),Lh=zh.parentNode,void 0===y||dm||(im=Math.abs(y-gh(r)[S])),D(),P(!0)}if(i.contains(zh))return P(!1)}return!1}function A(a,l){Dh(a,p,Zp({evt:e,isOwner:u,axis:o?'vertical':'horizontal',revert:s,dragRect:t,targetRect:n,canSort:d,fromSortable:f,target:r,completed:P,onMove:function(n,s){return Cm(Fh,i,zh,t,n,gh(n),e,s)},changed:D},l))}function I(){A('dragOverAnimationCapture'),p.captureAnimationState(),p!==f&&f.captureAnimationState()}function P(t){return A('dragOverCompleted',{insertion:t}),t&&(u?c._hideClone():c._showClone(p),p!==f&&(dh(zh,Hh?Hh.options.ghostClass:c.options.ghostClass,!1),dh(zh,a.ghostClass,!0)),Hh!==p&&p!==Tm.active?Hh=p:p===Tm.active&&Hh&&(Hh=null),f===p&&(p._ignoreWhileAnimating=r),p.animateAll(function(){A('dragOverAnimationComplete'),p._ignoreWhileAnimating=null}),p!==f&&(f.animateAll(),f._ignoreWhileAnimating=null)),(r===zh&&!zh.animated||r===i&&!r.animated)&&(sm=null),a.dragoverBubble||e.rootEl||r===document||(zh.parentNode[Nh]._isOutsideThisEl(e.target),!t&&xm(e)),!a.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),h=!0}function D(){Zh=_h(zh),Wh=_h(zh,a.draggable),jh({sortable:p,name:'change',toEl:i,newIndex:Zh,newDraggableIndex:Wh,originalEvent:e})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){ih(document,'mousemove',this._onTouchMove),ih(document,'touchmove',this._onTouchMove),ih(document,'pointermove',this._onTouchMove),ih(document,'dragover',xm),ih(document,'mousemove',xm),ih(document,'touchmove',xm)},_offUpEvents:function(){var e=this.el.ownerDocument;ih(e,'mouseup',this._onDrop),ih(e,'touchend',this._onDrop),ih(e,'pointerup',this._onDrop),ih(e,'pointercancel',this._onDrop),ih(e,'touchcancel',this._onDrop),ih(document,'selectstart',this)},_onDrop:function(e){var t=this.el,n=this.options;Zh=_h(zh),Wh=_h(zh,n.draggable),Dh('drop',this,{evt:e}),Lh=zh&&zh.parentNode,Zh=_h(zh),Wh=_h(zh,n.draggable),Tm.eventCanceled||(am=!1,dm=!1,um=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),$m(this.cloneId),$m(this._dragStartId),this.nativeDraggable&&(ih(document,'drop',this),ih(t,'dragstart',this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),eh&&fh(document.body,'user-select',''),fh(zh,'transform',''),e&&(nm&&(e.cancelable&&e.preventDefault(),!n.dropBubble&&e.stopPropagation()),Mh&&Mh.parentNode&&Mh.parentNode.removeChild(Mh),(Fh===Lh||Hh&&'clone'!==Hh.lastPutMode)&&Uh&&Uh.parentNode&&Uh.parentNode.removeChild(Uh),zh&&(this.nativeDraggable&&ih(zh,'dragend',this),Nm(zh),zh.style['will-change']='',nm&&!am&&dh(zh,Hh?Hh.options.ghostClass:this.options.ghostClass,!1),dh(zh,this.options.chosenClass,!1),jh({sortable:this,name:'unchoose',toEl:Lh,newIndex:null,newDraggableIndex:null,originalEvent:e}),Fh!==Lh?(Zh>=0&&(jh({rootEl:Lh,name:'add',toEl:Lh,fromEl:Fh,originalEvent:e}),jh({sortable:this,name:'remove',toEl:Lh,originalEvent:e}),jh({rootEl:Lh,name:'sort',toEl:Lh,fromEl:Fh,originalEvent:e}),jh({sortable:this,name:'sort',toEl:Lh,originalEvent:e})),Hh&&Hh.save()):Zh!==Kh&&Zh>=0&&(jh({sortable:this,name:'update',toEl:Lh,originalEvent:e}),jh({sortable:this,name:'sort',toEl:Lh,originalEvent:e})),Tm.active&&(null!=Zh&&-1!==Zh||(Zh=Kh,Wh=qh),jh({sortable:this,name:'end',toEl:Lh,originalEvent:e}),this.save())))),this._nulling()},_nulling:function(){Dh('nulling',this),Fh=zh=Lh=Mh=Rh=Uh=Bh=Vh=Gh=Jh=nm=Zh=Wh=Kh=qh=sm=om=Hh=Yh=Tm.dragged=Tm.ghost=Tm.clone=Tm.active=null,hm.forEach(function(e){e.checked=!0}),hm.length=Xh=Qh=0},handleEvent:function(e){switch(e.type){case'drop':case'dragend':this._onDrop(e);break;case'dragenter':case'dragover':zh&&(this._onDragOver(e),function(e){e.dataTransfer&&(e.dataTransfer.dropEffect='move');e.cancelable&&e.preventDefault()}(e));break;case'selectstart':e.preventDefault()}},toArray:function(){for(var e,t=[],n=this.el.children,s=0,o=n.length,i=this.options;s<o;s++)lh(e=n[s],i.draggable,this.el,!1)&&t.push(e.getAttribute(i.dataIdAttr)||Am(e));return t},sort:function(e,t){var n={},s=this.el;this.toArray().forEach(function(e,t){var o=s.children[t];lh(o,this.options.draggable,s,!1)&&(n[e]=o)},this),t&&this.captureAnimationState(),e.forEach(function(e){n[e]&&(s.removeChild(n[e]),s.appendChild(n[e]))}),t&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return lh(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var n=this.options;if(void 0===t)return n[e];var s=$h.modifyOption(this,e,t);n[e]=void 0!==s?s:t,'group'===e&&wm(n)},destroy:function(){Dh('destroy',this);var e=this.el;e[Nh]=null,ih(e,'mousedown',this._onTapStart),ih(e,'touchstart',this._onTapStart),ih(e,'pointerdown',this._onTapStart),this.nativeDraggable&&(ih(e,'dragover',this),ih(e,'dragenter',this)),Array.prototype.forEach.call(e.querySelectorAll('[draggable]'),function(e){e.removeAttribute('draggable')}),this._onDrop(),this._disableDelayedDragEvents(),cm.splice(cm.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!Vh){if(Dh('hideClone',this),Tm.eventCanceled)return;fh(Uh,'display','none'),this.options.removeCloneOnHide&&Uh.parentNode&&Uh.parentNode.removeChild(Uh),Vh=!0}},_showClone:function(e){if('clone'===e.lastPutMode){if(Vh){if(Dh('showClone',this),Tm.eventCanceled)return;zh.parentNode!=Fh||this.options.group.revertClone?Rh?Fh.insertBefore(Uh,Rh):Fh.appendChild(Uh):Fh.insertBefore(Uh,zh),this.options.group.revertClone&&this.animate(zh,Uh),fh(Uh,'display',''),Vh=!1}}else this._hideClone()}},mm&&oh(document,'touchmove',function(e){(Tm.active||am)&&e.cancelable&&e.preventDefault()}),Tm.utils={on:oh,off:ih,css:fh,find:hh,is:function(e,t){return!!lh(e,t,e,!1)},extend:function(e,t){if(e&&t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},throttle:xh,closest:lh,toggleClass:dh,clone:Th,index:_h,nextTick:Im,cancelNextTick:$m,detectDirection:_m,getChild:yh,expando:Nh},Tm.get=function(e){return e[Nh]},Tm.mount=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t[0].constructor===Array&&(t=t[0]),t.forEach(function(e){if(!e.prototype||!e.prototype.constructor)throw'Sortable: Mounted plugin must be a constructor function, not '.concat({}.toString.call(e));e.utils&&(Tm.utils=Zp(Zp({},Tm.utils),e.utils)),$h.mount(e)})},Tm.create=function(e,t){return new Tm(e,t)},Tm.version='1.15.6';var Pm,Dm,jm,zm,Lm,Mm,Fm=[],Rm=!1;function Bm(){Fm.forEach(function(e){clearInterval(e.pid)}),Fm=[]}function Um(){clearInterval(Mm)}var Vm=xh(function(e,t,n,s){if(t.scroll){var o,i=(e.touches?e.touches[0]:e).clientX,r=(e.touches?e.touches[0]:e).clientY,a=t.scrollSensitivity,l=t.scrollSpeed,c=mh(),u=!1;Dm!==n&&(Dm=n,Bm(),Pm=t.scroll,o=t.scrollFn,!0===Pm&&(Pm=kh(n,!0)));var d=0,f=Pm;do{var p=f,h=gh(p),m=h.top,g=h.bottom,v=h.left,y=h.right,b=h.width,w=h.height,k=void 0,S=void 0,x=p.scrollWidth,E=p.scrollHeight,T=fh(p),C=p.scrollLeft,N=p.scrollTop;p===c?(k=b<x&&('auto'===T.overflowX||'scroll'===T.overflowX||'visible'===T.overflowX),S=w<E&&('auto'===T.overflowY||'scroll'===T.overflowY||'visible'===T.overflowY)):(k=b<x&&('auto'===T.overflowX||'scroll'===T.overflowX),S=w<E&&('auto'===T.overflowY||'scroll'===T.overflowY));var O=k&&(Math.abs(y-i)<=a&&C+b<x)-(Math.abs(v-i)<=a&&!!C),A=S&&(Math.abs(g-r)<=a&&N+w<E)-(Math.abs(m-r)<=a&&!!N);if(!Fm[d])for(var I=0;I<=d;I++)Fm[I]||(Fm[I]={});Fm[d].vx==O&&Fm[d].vy==A&&Fm[d].el===p||(Fm[d].el=p,Fm[d].vx=O,Fm[d].vy=A,clearInterval(Fm[d].pid),0==O&&0==A||(u=!0,Fm[d].pid=setInterval(function(){s&&0===this.layer&&Tm.active._onTouchMove(Lm);var t=Fm[this.layer].vy?Fm[this.layer].vy*l:0,n=Fm[this.layer].vx?Fm[this.layer].vx*l:0;'function'==typeof o&&'continue'!==o.call(Tm.dragged.parentNode[Nh],n,t,e,Lm,Fm[this.layer].el)||Eh(Fm[this.layer].el,n,t)}.bind({layer:d}),24))),d++}while(t.bubbleScroll&&f!==c&&(f=kh(f,!1)));Rm=u}},30),Km=function(e){var t=e.originalEvent,n=e.putSortable,s=e.dragEl,o=e.activeSortable,i=e.dispatchSortableEvent,r=e.hideGhostForTarget,a=e.unhideGhostForTarget;if(t){var l=n||o;r();var c=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,u=document.elementFromPoint(c.clientX,c.clientY);a(),l&&!l.el.contains(u)&&(i('spill'),this.onSpill({dragEl:s,putSortable:n}))}};function Zm(){}function qm(){}Zm.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,n=e.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var s=yh(this.sortable.el,this.startIndex,this.options);s?this.sortable.el.insertBefore(t,s):this.sortable.el.appendChild(t),this.sortable.animateAll(),n&&n.animateAll()},drop:Km},Yp(Zm,{pluginName:'revertOnSpill'}),qm.prototype={onSpill:function(e){var t=e.dragEl,n=e.putSortable||this.sortable;n.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),n.animateAll()},drop:Km},Yp(qm,{pluginName:'removeOnSpill'}),Tm.mount(new function(){function e(){for(var e in this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)'_'===e.charAt(0)&&'function'==typeof this[e]&&(this[e]=this[e].bind(this))}return e.prototype={dragStarted:function(e){var t=e.originalEvent;this.sortable.nativeDraggable?oh(document,'dragover',this._handleAutoScroll):this.options.supportPointer?oh(document,'pointermove',this._handleFallbackAutoScroll):t.touches?oh(document,'touchmove',this._handleFallbackAutoScroll):oh(document,'mousemove',this._handleFallbackAutoScroll)},dragOverCompleted:function(e){var t=e.originalEvent;this.options.dragOverBubble||t.rootEl||this._handleAutoScroll(t)},drop:function(){this.sortable.nativeDraggable?ih(document,'dragover',this._handleAutoScroll):(ih(document,'pointermove',this._handleFallbackAutoScroll),ih(document,'touchmove',this._handleFallbackAutoScroll),ih(document,'mousemove',this._handleFallbackAutoScroll)),Um(),Bm(),clearTimeout(ch),ch=void 0},nulling:function(){Lm=Dm=Pm=Rm=Mm=jm=zm=null,Fm.length=0},_handleFallbackAutoScroll:function(e){this._handleAutoScroll(e,!0)},_handleAutoScroll:function(e,t){var n=this,s=(e.touches?e.touches[0]:e).clientX,o=(e.touches?e.touches[0]:e).clientY,i=document.elementFromPoint(s,o);if(Lm=e,t||this.options.forceAutoScrollFallback||Xp||Jp||eh){Vm(e,this.options,i,t);var r=kh(i,!0);!Rm||Mm&&s===jm&&o===zm||(Mm&&Um(),Mm=setInterval(function(){var i=kh(document.elementFromPoint(s,o),!0);i!==r&&(r=i,Bm()),Vm(e,n.options,i,t)},10),jm=s,zm=o)}else{if(!this.options.bubbleScroll||kh(i,!0)===mh())return void Bm();Vm(e,this.options,kh(i,!1),!1)}}},Yp(e,{pluginName:'scroll',initializeByDefault:!0})}),Tm.mount(qm,Zm);const Wm={class:'field-item'},Ym=['checked'],Hm=['value','placeholder'],Gm=['value','placeholder'],Jm=['checked'],Xm=['checked'],Qm=ga({__name:'FieldItem',props:{field:{}},emits:['update:enabled','update:name','update:description','update:type','delete'],setup(e){const{t:t}=Ap();return(n,s)=>(vl(),wl('div',Wm,[s[7]||(s[7]=Cl('div',{class:'drag-handle'},[Cl('i',{class:'fa-solid fa-grip-vertical'})],-1)),Cl('input',{type:'checkbox',checked:e.field.enabled,onChange:s[0]||(s[0]=e=>n.$emit('update:enabled',e.target.checked))},null,40,Ym),Cl('input',{type:'text',class:'text_pole field_key',value:e.field.name,placeholder:$r(t)``,onInput:s[1]||(s[1]=e=>n.$emit('update:name',e.target.value))},null,40,Hm),Cl('input',{type:'text',class:'text_pole field_value',value:e.field.description,placeholder:$r(t)`AI`,onInput:s[2]||(s[2]=e=>n.$emit('update:description',e.target.value))},null,40,Gm),Cl('label',null,[Cl('input',{type:'radio',checked:'number'===e.field.type,onChange:s[3]||(s[3]=e=>n.$emit('update:type','number'))},null,40,Jm),Al(' '+si($r(t)``),1)]),Cl('label',null,[Cl('input',{type:'radio',checked:'text'===e.field.type,onChange:s[4]||(s[4]=e=>n.$emit('update:type','text'))},null,40,Xm),Al(' '+si($r(t)``),1)]),Cl('div',{class:'menu_button',onClick:s[5]||(s[5]=e=>n.$emit('delete'))},[...s[6]||(s[6]=[Cl('i',{class:'fa-solid fa-trash'},null,-1)])])]))}}),eg={class:'fixed-fields-settings-container'},tg={class:'field-list'},ng={class:'field-row'},sg={class:'field-left'},og={for:'fixed-field-time',class:'field-name'},ig=['placeholder','disabled'],rg={class:'field-row'},ag={class:'field-left'},lg={for:'fixed-field-place',class:'field-name'},cg=['placeholder','disabled'],ug={class:'field-row'},dg={class:'field-left'},fg={for:'fixed-field-weather',class:'field-name'},pg=['placeholder','disabled'],hg={class:'news-header'},mg={for:'fixed-field-news',class:'field-name'},gg={class:'news-child-row'},vg={class:'field-left news-child-label'},yg={class:'field-name'},bg=['placeholder','disabled'],_g={class:'news-child-row'},wg={class:'field-left news-child-label'},kg={class:'field-name'},Sg=['placeholder','disabled'],xg={class:'news-child-row'},Eg={class:'field-left news-child-label'},Tg={class:'field-name'},Cg=['placeholder','disabled'],Ng={class:'field-row'},Og={class:'field-left'},Ag={for:'fixed-field-notes',class:'field-name'},Ig=['placeholder','disabled'],$g={class:'prompt-actions'},Pg=ga({__name:'FixedFieldsSettings',props:{initialSettings:{}},setup(e,{expose:t}){const n=e,{t:s}=Ap(),o=Ar({time:n.initialSettings.fixed_fields_enabled.time,place:n.initialSettings.fixed_fields_enabled.place,weather:n.initialSettings.fixed_fields_enabled.weather,news:n.initialSettings.fixed_fields_enabled.news,notes:n.initialSettings.fixed_fields_enabled.notes}),i=Jl(()=>'en'===n.initialSettings.language?Xs:Gs),r=Ar({time:'',place:'',weather:'',newsType:'',newsTitle:'',newsContent:'',notes:''});async function a(){const e=new c(' Prompt ',u.CONFIRM);if(await e.show()!==d.AFFIRMATIVE)return;const t='en'===n.initialSettings.language?Xs:Gs;r.value={time:t.time,place:t.place,weather:t.weather,newsType:t.newsType,newsTitle:t.newsTitle,newsContent:t.newsContent,notes:t.notes}}return ja([()=>n.initialSettings.custom_prompt,()=>n.initialSettings.language],([e,t])=>{const n='en'===t?Xs:Gs;r.value={time:e?.time||n.time,place:e?.place||n.place,weather:e?.weather||n.weather,newsType:e?.newsType||n.newsType,newsTitle:e?.newsTitle||n.newsTitle,newsContent:e?.newsContent||n.newsContent,notes:e?.notes||n.notes}},{immediate:!0}),ja(()=>n.initialSettings.fixed_fields_enabled,e=>{o.value=du(e)},{immediate:!0,deep:!0}),t({getData:function(){const e='en'===n.initialSettings.language?Xs:Gs,t={};return r.value.time?.trim()&&r.value.time!==e.time&&(t.time=r.value.time.trim()),r.value.place?.trim()&&r.value.place!==e.place&&(t.place=r.value.place.trim()),r.value.weather?.trim()&&r.value.weather!==e.weather&&(t.weather=r.value.weather.trim()),r.value.newsType?.trim()&&r.value.newsType!==e.newsType&&(t.newsType=r.value.newsType.trim()),r.value.newsTitle?.trim()&&r.value.newsTitle!==e.newsTitle&&(t.newsTitle=r.value.newsTitle.trim()),r.value.newsContent?.trim()&&r.value.newsContent!==e.newsContent&&(t.newsContent=r.value.newsContent.trim()),r.value.notes?.trim()&&r.value.notes!==e.notes&&(t.notes=r.value.notes.trim()),{fixed_fields_enabled:du(o.value),custom_prompt:Object.keys(t).length>0?t:void 0}}}),(e,t)=>(vl(),wl('div',eg,[Cl('div',tg,[Cl('div',{class:Jo(['fixed-field-item',{disabled:!$r(o).time}])},[Cl('div',ng,[Cl('div',sg,[da(Cl('input',{id:'fixed-field-time','onUpdate:modelValue':t[0]||(t[0]=e=>$r(o).time=e),type:'checkbox',class:'field-checkbox'},null,512),[[Dc,$r(o).time]]),Cl('label',og,si($r(s)``),1)]),da(Cl('textarea',{'onUpdate:modelValue':t[1]||(t[1]=e=>$r(r).time=e),class:'text_pole field-textarea',placeholder:$r(i).time,disabled:!$r(o).time},null,8,ig),[[Pc,$r(r).time]])])],2),Cl('div',{class:Jo(['fixed-field-item',{disabled:!$r(o).place}])},[Cl('div',rg,[Cl('div',ag,[da(Cl('input',{id:'fixed-field-place','onUpdate:modelValue':t[2]||(t[2]=e=>$r(o).place=e),type:'checkbox',class:'field-checkbox'},null,512),[[Dc,$r(o).place]]),Cl('label',lg,si($r(s)``),1)]),da(Cl('textarea',{'onUpdate:modelValue':t[3]||(t[3]=e=>$r(r).place=e),class:'text_pole field-textarea',placeholder:$r(i).place,disabled:!$r(o).place},null,8,cg),[[Pc,$r(r).place]])])],2),Cl('div',{class:Jo(['fixed-field-item',{disabled:!$r(o).weather}])},[Cl('div',ug,[Cl('div',dg,[da(Cl('input',{id:'fixed-field-weather','onUpdate:modelValue':t[4]||(t[4]=e=>$r(o).weather=e),type:'checkbox',class:'field-checkbox'},null,512),[[Dc,$r(o).weather]]),Cl('label',fg,si($r(s)``),1)]),da(Cl('textarea',{'onUpdate:modelValue':t[5]||(t[5]=e=>$r(r).weather=e),class:'text_pole field-textarea',placeholder:$r(i).weather,disabled:!$r(o).weather},null,8,pg),[[Pc,$r(r).weather]])])],2),Cl('div',{class:Jo(['fixed-field-item',{disabled:!$r(o).news}])},[Cl('div',hg,[da(Cl('input',{id:'fixed-field-news','onUpdate:modelValue':t[6]||(t[6]=e=>$r(o).news=e),type:'checkbox',class:'field-checkbox'},null,512),[[Dc,$r(o).news]]),Cl('label',mg,si($r(s)``),1)]),Cl('div',gg,[Cl('div',vg,[Cl('label',yg,si($r(s)``),1)]),da(Cl('textarea',{'onUpdate:modelValue':t[7]||(t[7]=e=>$r(r).newsType=e),class:'text_pole field-textarea',placeholder:$r(i).newsType,disabled:!$r(o).news},null,8,bg),[[Pc,$r(r).newsType]])]),Cl('div',_g,[Cl('div',wg,[Cl('label',kg,si($r(s)``),1)]),da(Cl('textarea',{'onUpdate:modelValue':t[8]||(t[8]=e=>$r(r).newsTitle=e),class:'text_pole field-textarea',placeholder:$r(i).newsTitle,disabled:!$r(o).news},null,8,Sg),[[Pc,$r(r).newsTitle]])]),Cl('div',xg,[Cl('div',Eg,[Cl('label',Tg,si($r(s)``),1)]),da(Cl('textarea',{'onUpdate:modelValue':t[9]||(t[9]=e=>$r(r).newsContent=e),class:'text_pole field-textarea',placeholder:$r(i).newsContent,disabled:!$r(o).news},null,8,Cg),[[Pc,$r(r).newsContent]])])],2)]),Cl('div',{class:Jo(['fixed-field-item',{disabled:!$r(o).notes}])},[Cl('div',Ng,[Cl('div',Og,[da(Cl('input',{id:'fixed-field-notes','onUpdate:modelValue':t[10]||(t[10]=e=>$r(o).notes=e),type:'checkbox',class:'field-checkbox'},null,512),[[Dc,$r(o).notes]]),Cl('label',Ag,si($r(s)``),1)]),da(Cl('textarea',{'onUpdate:modelValue':t[11]||(t[11]=e=>$r(r).notes=e),class:'text_pole field-textarea',placeholder:$r(i).notes,disabled:!$r(o).notes},null,8,Ig),[[Pc,$r(r).notes]])])],2),Cl('div',$g,[Cl('div',{class:'menu_button',onClick:a},[t[12]||(t[12]=Cl('i',{class:'fa-solid fa-rotate-left'},null,-1)),Al(' '+si($r(s)``),1)])])]))}}),Dg={class:'field-list-wrapper'},jg={class:'tabs-container'},zg={class:'tab-content'},Lg={class:'field-list-container'},Mg={class:'field-actions'},Fg={class:'tab-content'},Rg=ga({__name:'FieldList',props:{initialSettings:{},initialFields:{}},setup(e,{expose:t}){const{t:n}=Ap(),s=e,o=Ar(),i=Ar(),r=Ar('custom'),a=Ar([]);wa(()=>{a.value=du(s.initialFields),o.value&&Tm.create(o.value,{animation:150,handle:'.drag-handle',onEnd:e=>{const t=e.oldIndex,n=e.newIndex,s=a.value.splice(t,1)[0];a.value.splice(n,0,s),a.value.forEach((e,t)=>e.order=t)}})});const l=Jl(()=>[...a.value].sort((e,t)=>e.order-t.order));function p(){const e={id:f(),enabled:!0,name:'',description:'',order:a.value.length,type:'number'};a.value.push(e)}function h(e,t,n){const s=a.value.find(t=>t.id===e);s&&(s[t]=n)}async function m(){const e=new c('',u.CONFIRM);await e.show()===d.AFFIRMATIVE&&(a.value=[{id:f(),enabled:!0,name:'',description:'<char><user>, 0-100%, 0.5',order:0,type:'number'},{id:f(),enabled:!0,name:'',description:'<char>\'\', 100',order:1,type:'text'}])}return t({getData:function(){const e=i.value?.getData();return{fields:du(a.value),fixed_fields_enabled:e?.fixed_fields_enabled,custom_prompt:e?.custom_prompt}}}),(e,t)=>(vl(),wl('div',Dg,[Cl('div',jg,[Cl('div',{class:Jo(['tab-button',{active:'custom'===$r(r)}]),onClick:t[0]||(t[0]=e=>r.value='custom')},si($r(n)``),3),Cl('div',{class:Jo(['tab-button',{active:'fixed'===$r(r)}]),onClick:t[1]||(t[1]=e=>r.value='fixed')},si($r(n)``),3)]),da(Cl('div',zg,[Cl('div',Lg,[Cl('div',{ref_key:'listRef',ref:o,class:'field-list'},[(vl(!0),wl(dl,null,xa($r(l),e=>(vl(),kl(Qm,{key:e.id,field:e,'data-id':e.id,'onUpdate:enabled':t=>h(e.id,'enabled',t),'onUpdate:name':t=>h(e.id,'name',t),'onUpdate:description':t=>h(e.id,'description',t),'onUpdate:type':t=>h(e.id,'type',t),onDelete:t=>function(e){const t=a.value.findIndex(t=>t.id===e);-1!==t&&(a.value.splice(t,1),a.value.forEach((e,t)=>e.order=t))}(e.id)},null,8,['field','data-id','onUpdate:enabled','onUpdate:name','onUpdate:description','onUpdate:type','onDelete']))),128))],512),Cl('div',Mg,[Cl('div',{class:'menu_button',onClick:p},[t[2]||(t[2]=Cl('i',{class:'fa-solid fa-plus'},null,-1)),Al(' '+si($r(n)``),1)]),Cl('div',{class:'menu_button',onClick:m},[t[3]||(t[3]=Cl('i',{class:'fa-solid fa-rotate-left'},null,-1)),Al(' '+si($r(n)``),1)])])])],512),[[cc,'custom'===$r(r)]]),da(Cl('div',Fg,[Nl(Pg,{ref_key:'fixedFieldsRef',ref:i,'initial-settings':s.initialSettings},null,8,['initial-settings'])],512),[[cc,'fixed'===$r(r)]])]))}});function Bg(e='.json'){return new Promise(t=>{const n=document.createElement('input');n.type='file',n.accept=e,n.onchange=e=>{const n=e.target.files?.[0];t(n||null)},n.oncancel=()=>{t(null)},n.click()})}const Ug={class:'panel-settings-container'},Vg={class:'settings-title'},Kg={class:'setting-item gal-settings'},Zg={class:'setting-label',for:'position-select'},qg={value:'left'},Wg={value:'right'},Yg={class:'setting-item gal-settings'},Hg={class:'setting-label',for:'language-select'},Gg={value:'zh-TW'},Jg={value:'zh-CN'},Xg={value:'en'},Qg={class:'setting-item bar-settings'},ev={class:'setting-label'},tv={class:'progress-color-content'},nv={class:'color-picker-group'},sv={class:'color-picker-item'},ov={class:'color-value'},iv={class:'color-picker-item'},rv={class:'color-value'},av={class:'progress-preview'},lv={class:'preview-label'},cv={class:'setting-item css-editor-settings'},uv={class:'setting-label'},dv={class:'css-editor-content'},fv={class:'css-editor-actions'},pv=['title'],hv=['title'],mv=['title'],gv=['placeholder'],vv={class:'css-editor-tips'},yv={class:'setting-item backup-settings'},bv={class:'backup-header'},_v={class:'setting-label'},wv={class:'backup-actions'},kv={class:'backup-description'},Sv=ga({__name:'PanelSettings',props:{initialSettings:{}},emits:['settingsImported'],setup(e,{expose:t,emit:n}){const s=e,{t:o}=Ap(),i=fu(),r=Ar({panel_position:s.initialSettings.panel_position,language:s.initialSettings.language,progress_color_low:s.initialSettings.progress_color_low,progress_color_high:s.initialSettings.progress_color_high,custom_css:s.initialSettings.custom_css}),a=Ar(!1);function l(){a.value=!a.value}const c=Ar(!1);function u(){c.value=!c.value}async function d(){try{hu.log('[PanelSettings] ');const e='0.3.2',t=function(e,t){hu.log('[importExport] ');const n={version:t,timestamp:Date.now(),fields:e.fields,customPrompt:e.custom_prompt,fixedFieldsEnabled:e.fixed_fields_enabled,customCSS:e.custom_css,progressColorLow:e.progress_color_low,progressColorHigh:e.progress_color_high,language:e.language};return hu.log('[importExport] :',n),n}(i.settings,e);!function(e,t){const n=JSON.stringify(e,null,2),s=new Blob([n],{type:'application/json'}),o=URL.createObjectURL(s),i=document.createElement('a');i.href=o,i.download=t||`status-tracking-backup-${Date.now()}.json`,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(o),hu.log('[importExport] JSON :',i.download)}(t,`status-tracking-backup-${(new Date).toISOString().slice(0,10)}.json`),toastr.success(o``,o``)}catch(e){hu.error('[PanelSettings] :',e),toastr.error(o``,o``)}}async function f(){try{hu.log('[PanelSettings] ');const e=await Bg('.json');if(!e)return void hu.log('[PanelSettings] ');const t=await async function(e){return new Promise((t,n)=>{const s=new FileReader;s.onload=e=>{try{const n=e.target?.result,s=JSON.parse(n);hu.log('[importExport] JSON :',s),t(s)}catch(s){hu.error('[importExport] JSON :',s),n(new Error('JSON '))}},s.onerror=()=>{hu.error('[importExport] '),n(new Error(''))},s.readAsText(e)})}(e),n=function(e){if(hu.log('[importExport] '),!e||'object'!=typeof e)return{valid:!1,error:''};e.version&&'string'==typeof e.version&&hu.log('[importExport] :',e.version);try{const t={};return void 0!==e.fields&&(t.fields=e.fields),void 0!==e.customPrompt&&(t.custom_prompt=e.customPrompt),void 0!==e.fixedFieldsEnabled&&(t.fixed_fields_enabled=e.fixedFieldsEnabled),void 0!==e.customCSS&&(t.custom_css=e.customCSS),void 0!==e.progressColorLow&&(t.progress_color_low=e.progressColorLow),void 0!==e.progressColorHigh&&(t.progress_color_high=e.progressColorHigh),void 0!==e.language&&(t.language=e.language),hu.log('[importExport] :',t),{valid:!0,data:t}}catch(t){return hu.error('[importExport] :',t),{valid:!1,error:t instanceof Error?t.message:''}}}(t);if(!n.valid)return void toastr.error(n.error||o``,o``);if(!confirm(o`\nPrompt`))return void hu.log('[PanelSettings] ');if(n.data){Object.assign(i.settings,n.data),n.data.panel_position&&(r.value.panel_position=n.data.panel_position),n.data.language&&(r.value.language=n.data.language),n.data.progress_color_low&&(r.value.progress_color_low=n.data.progress_color_low),n.data.progress_color_high&&(r.value.progress_color_high=n.data.progress_color_high),hu.log('[PanelSettings] '),toastr.success(o``,o``);const e=document.querySelector('.popup-button-cancel');e&&e.click()}}catch(e){hu.error('[PanelSettings] :',e),toastr.error(e instanceof Error?e.message:o``,o``)}}function p(){confirm(o` CSS `)&&(r.value.custom_css='/* ========================================\n   Status Tracking \n   ======================================== */\n\n/* -------------------- 1.  -------------------- */\n/*  */\n.status-panel {\n  /*  */\n}\n\n/*  */\n.status-panel.left {\n\n}\n\n/*  */\n.status-panel.right {\n\n}\n\n/*  */\n.status-panel.collapsed {\n\n}\n\n\n/* -------------------- 2.  -------------------- */\n/* / */\n.collapse-toggle {\n\n}\n\n/*  */\n.collapse-toggle i {\n\n}\n\n\n/* -------------------- 3.  -------------------- */\n/*  */\n.panel-content {\n\n}\n\n\n/* -------------------- 4.  -------------------- */\n/*  */\n.panel-header {\n\n}\n\n/*  */\n.panel-header h3 {\n\n}\n\n\n/* -------------------- 5.  -------------------- */\n/*  */\n.fixed-info-section {\n\n}\n\n/* // */\n.info-item {\n\n}\n\n/*  div */\n.info-item > div {\n\n}\n\n/*  */\n.info-icon {\n\n}\n\n/*  */\n.info-text {\n\n}\n\n\n/* -------------------- 6.  -------------------- */\n/*  */\n.news-section {\n\n}\n\n/*  */\n.news-section2 {\n\n}\n\n/*  */\n.news-header {\n\n}\n\n/*  */\n.news-no-header {\n\n}\n\n/*  */\n.news-divider {\n\n}\n\n/*  */\n.news-title {\n\n}\n\n/*  */\n.news-content {\n\n}\n\n\n/* -------------------- 7.  -------------------- */\n/*  */\n.custom-fields-section {\n\n}\n\n/*  */\n.status-list {\n\n}\n\n/*  */\n.status-item {\n\n}\n\n/*  */\n.status-name {\n\n}\n\n/*  */\n.status-value {\n\n}\n\n/*  */\n.value-text {\n\n}\n\n\n/* -------------------- 8.  -------------------- */\n/*  */\n.progress-bar-container {\n  /*  CSS \n     --progress-low-color: \n     --progress-high-color:  */\n}\n\n/*  */\n.progress-bar-fill {\n\n}\n\n/*  */\n.progress-text {\n\n}\n\n\n/* -------------------- 9.  -------------------- */\n/*  */\n.empty-hint {\n\n}\n\n\n/* -------------------- 10.  -------------------- */\n/*  */\n.panel-actions {\n\n}\n\n/*  ST  .menu_button */\n.panel-actions .menu_button {\n\n}\n\n/*  */\n.panel-actions .menu_button i {\n\n}\n\n\n/* ========================================\n   \n   ======================================== */\n/*\n1. \n2.  {}  CSS \n3.  !important \n4. \n\n\n.status-panel {\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important;\n  border-radius: 16px !important;\n}\n\n.status-name {\n  color: #ffd700 !important;\n  font-weight: bold !important;\n}\n*/\n',toastr.success(o``,o``))}async function h(){try{hu.log('[PanelSettings]  CSS');const e=r.value.custom_css||'',t=`/* Status Tracking  */\n/* : ${(new Date).toLocaleString()} */\n\n`,n=new Blob([t+e],{type:'text/css'}),s=URL.createObjectURL(n),i=document.createElement('a');i.href=s,i.download=`status-tracking-theme-${(new Date).toISOString().slice(0,10)}.css`,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(s),toastr.success(o`CSS `,o``)}catch(e){hu.error('[PanelSettings]  CSS :',e),toastr.error(o``,o``)}}async function m(){try{hu.log('[PanelSettings]  CSS');const e=await Bg('.css,text/css');if(!e)return void hu.log('[PanelSettings] ');const t=await e.text();r.value.custom_css=t,hu.log('[PanelSettings] CSS '),toastr.success(o`CSS `,o``)}catch(e){hu.error('[PanelSettings]  CSS :',e),toastr.error(e instanceof Error?e.message:o``,o``)}}return t({getData:function(){return du(r.value)}}),(e,t)=>(vl(),wl('div',Ug,[Cl('h3',Vg,si($r(o)``),1),Cl('div',Kg,[Cl('label',Zg,si($r(o)``),1),da(Cl('select',{id:'position-select','onUpdate:modelValue':t[0]||(t[0]=e=>$r(r).panel_position=e),class:'setting-select'},[Cl('option',qg,si($r(o)``),1),Cl('option',Wg,si($r(o)``),1)],512),[[zc,$r(r).panel_position]])]),Cl('div',Yg,[Cl('label',Hg,si($r(o)``),1),da(Cl('select',{id:'language-select','onUpdate:modelValue':t[1]||(t[1]=e=>$r(r).language=e),class:'setting-select'},[Cl('option',Gg,si($r(o)``),1),Cl('option',Jg,si($r(o)``),1),Cl('option',Xg,si($r(o)`English`),1)],512),[[zc,$r(r).language]])]),Cl('div',Qg,[Cl('div',{class:'progress-color-header',onClick:l},[Cl('label',ev,si($r(o)``),1),Cl('i',{class:Jo(['fa-solid fa-chevron-down progress-color-toggle-icon',{collapsed:!$r(a)}])},null,2)]),da(Cl('div',tv,[Cl('div',nv,[Cl('div',sv,[Cl('label',null,si($r(o)``),1),da(Cl('input',{type:'color','onUpdate:modelValue':t[2]||(t[2]=e=>$r(r).progress_color_low=e),class:'color-input'},null,512),[[Pc,$r(r).progress_color_low]]),Cl('span',ov,si($r(r).progress_color_low),1)]),Cl('div',iv,[Cl('label',null,si($r(o)``),1),da(Cl('input',{type:'color','onUpdate:modelValue':t[3]||(t[3]=e=>$r(r).progress_color_high=e),class:'color-input'},null,512),[[Pc,$r(r).progress_color_high]]),Cl('span',rv,si($r(r).progress_color_high),1)])]),Cl('div',av,[Cl('div',lv,si($r(o)``),1),Cl('div',{class:'preview-bar-container',style:qo({'--progress-low-color':$r(r).progress_color_low,'--progress-high-color':$r(r).progress_color_high})},[...t[5]||(t[5]=[Cl('div',{class:'preview-bar-fill',style:{width:'75%'}},null,-1),Cl('span',{class:'preview-bar-text'},'75',-1)])],4)])],512),[[cc,$r(a)]])]),Cl('div',cv,[Cl('div',{class:'css-editor-header',onClick:u},[Cl('label',uv,si($r(o)` CSS`),1),Cl('i',{class:Jo(['fa-solid fa-chevron-down css-toggle-icon',{collapsed:!$r(c)}])},null,2)]),da(Cl('div',dv,[Cl('div',fv,[Cl('div',{class:'menu_button menu_button_icon',onClick:p,title:$r(o)``},[...t[6]||(t[6]=[Cl('i',{class:'fa-solid fa-lightbulb'},null,-1)])],8,pv),Cl('div',{class:'menu_button menu_button_icon',onClick:m,title:$r(o)` CSS`},[...t[7]||(t[7]=[Cl('i',{class:'fa-solid fa-file-import'},null,-1)])],8,hv),Cl('div',{class:'menu_button menu_button_icon',onClick:h,title:$r(o)` CSS`},[...t[8]||(t[8]=[Cl('i',{class:'fa-solid fa-file-export'},null,-1)])],8,mv)]),da(Cl('textarea',{'onUpdate:modelValue':t[4]||(t[4]=e=>$r(r).custom_css=e),class:'css-textarea',placeholder:$r(o)` CSS...`,spellcheck:'false'},null,8,gv),[[Pc,$r(r).custom_css]]),Cl('div',vv,si($r(o)``),1)],512),[[cc,$r(c)]])]),Cl('div',yv,[Cl('div',bv,[Cl('label',_v,si($r(o)``),1),Cl('div',wv,[Cl('div',{class:'menu_button',onClick:f},[t[9]||(t[9]=Cl('i',{class:'fa-solid fa-file-import'},null,-1)),Al(' '+si($r(o)``),1)]),Cl('div',{class:'menu_button',onClick:d},[t[10]||(t[10]=Cl('i',{class:'fa-solid fa-file-export'},null,-1)),Al(' '+si($r(o)``),1)])])]),Cl('div',kv,si($r(o)`Prompt`),1)])]))}}),xv=cu('statusData',()=>{const e=Ar({date:'',location:'',weather:'',news:{type:'',title:'',content:''},notes:'',customFields:{}});return{data:e,clearData:function(){e.value={date:'',location:'',weather:'',news:{type:'',title:'',content:''},notes:'',customFields:{}}}}}),Ev={class:'panel-content'},Tv={class:'panel-header'},Cv={key:0,class:'no-status-hint'},Nv={key:0,class:'fixed-info-section'},Ov={class:'info-item'},Av={key:0},Iv={class:'info-text'},$v={key:1},Pv={class:'info-text'},Dv={key:2},jv={class:'info-text'},zv={key:0,class:'news-section'},Lv={class:'news-section2'},Mv={class:'news-header'},Fv={class:'news-no-header'},Rv={class:'news-title'},Bv={class:'news-content'},Uv={key:1,class:'custom-fields-section'},Vv={class:'status-list'},Kv={class:'status-name'},Zv={key:0,class:'status-value'},qv={class:'progress-text'},Wv={key:1,class:'status-value'},Yv={class:'value-text'},Hv={key:2,class:'notes-section'},Gv={class:'notes-content'},Jv={class:'notes-header'},Xv={class:'notes-text'},Qv={class:'panel-actions'},ey=ga({__name:'StatusDisplay',setup(e){const{settings:t}=uu(fu()),n=xv(),{t:s}=Ap(),o=Jl(()=>{const e='right'===t.value.panel_position,n=t.value.panel_collapsed;return e?n?'fa-chevron-left':'fa-chevron-right':n?'fa-chevron-right':'fa-chevron-left'}),i=Jl(()=>t.value.fields.filter(e=>e.enabled).sort((e,t)=>e.order-t.order)),r=Jl(()=>i.value.filter(e=>{const t=n.data.customFields[e.id];return null!=t&&''!==t&&('object'!=typeof t||!('value'in t)||void 0!==t.value&&null!==t.value)})),a=Jl(()=>!!(n.data.news.type||n.data.news.title||n.data.news.content)),l=Jl(()=>{const e=t.value.fixed_fields_enabled.time&&n.data.date,s=t.value.fixed_fields_enabled.place&&n.data.location,o=t.value.fixed_fields_enabled.weather&&n.data.weather,i=t.value.fixed_fields_enabled.news&&a.value;return!!(e||s||o||i)}),f=Jl(()=>r.value.length>0),p=Jl(()=>{const e=t.value.fixed_fields_enabled.notes&&n.data.notes;return l.value||f.value||e});function h(e){const t=n.data.customFields[e];if(null==t)return 0;let s;return s='object'==typeof t&&'value'in t?t.value:'number'==typeof t?t:Number(t),isNaN(s)?0:Math.max(0,Math.min(100,s))}function m(e){const t=n.data.customFields[e];return null==t?'':'object'==typeof t&&'display'in t?t.display:String(t)}function g(){hu.log('[StatusDisplay] '),t.value.panel_collapsed=!t.value.panel_collapsed}async function v(){hu.log('[StatusDisplay] ');const e=document.createElement('h3');e.textContent=s``,e.style.marginBottom='15px';const n=document.createElement('div');n.appendChild(e);const o=document.createElement('div');n.appendChild(o);const i=Uc(Rg,{initialSettings:t.value,initialFields:t.value.fields}),r=Hc();i.use(r);const a={install:e=>{e.config.globalProperties.t=s}};i.use(a);const l=i.mount(o),f=new c(n,u.TEXT,'',{wide:!0,okButton:!0,cancelButton:!0});if(await f.show()===d.AFFIRMATIVE){hu.log('[StatusDisplay] ');const e=l.getData();t.value.fields=e.fields,t.value.fixed_fields_enabled=e.fixed_fields_enabled,t.value.custom_prompt=e.custom_prompt}else hu.log('[StatusDisplay] ');i.unmount()}async function y(){hu.log('[StatusDisplay] ');const e=document.createElement('div'),n=Uc(Sv,{initialSettings:t.value}),o=Hc();n.use(o);const i={install:e=>{e.config.globalProperties.t=s}};n.use(i);const r=n.mount(e),a=new c(e,u.TEXT,'',{wide:!0,okButton:!0,cancelButton:!0});if(await a.show()===d.AFFIRMATIVE){hu.log('[StatusDisplay] ');const e=r.getData();t.value.panel_position=e.panel_position,t.value.language=e.language,t.value.progress_color_low=e.progress_color_low,t.value.progress_color_high=e.progress_color_high,t.value.custom_prompt=e.custom_prompt,t.value.custom_css=e.custom_css}else hu.log('[StatusDisplay] ');n.unmount()}return(e,i)=>$r(t).panel_enabled?(vl(),wl('div',{key:0,class:Jo(['status-panel drawer-content',[$r(t).panel_position,{collapsed:$r(t).panel_collapsed,fillLeft:'left'===$r(t).panel_position,fillRight:'right'===$r(t).panel_position}]])},[Cl('div',{class:Jo(['collapse-toggle',[$r(t).panel_position,{collapsed:$r(t).panel_collapsed}]]),onClick:g},[Cl('i',{class:Jo(['fa-solid',$r(o)])},null,2)],2),da(Cl('div',Ev,[Cl('div',Tv,[Cl('h3',null,si($r(s)``),1)]),$r(p)?(vl(),wl(dl,{key:1},[$r(l)?(vl(),wl('div',Nv,[Cl('div',Ov,[$r(t).fixed_fields_enabled.time&&$r(n).data.date?(vl(),wl('div',Av,[i[1]||(i[1]=Cl('span',{class:'info-icon'},'',-1)),Cl('span',Iv,si($r(n).data.date),1)])):$l('',!0),$r(t).fixed_fields_enabled.place&&$r(n).data.location?(vl(),wl('div',$v,[i[2]||(i[2]=Cl('span',{class:'info-icon'},'',-1)),Cl('span',Pv,si($r(n).data.location),1)])):$l('',!0),$r(t).fixed_fields_enabled.weather&&$r(n).data.weather?(vl(),wl('div',Dv,[i[3]||(i[3]=Cl('span',{class:'info-icon'},'',-1)),Cl('span',jv,si($r(n).data.weather),1)])):$l('',!0)]),$r(t).fixed_fields_enabled.news&&$r(a)?(vl(),wl('div',zv,[Cl('div',Lv,[Cl('div',Mv,si($r(n).data.news.type),1),Cl('div',Fv,[i[4]||(i[4]=Cl('div',{class:'news-divider'},null,-1)),Cl('div',Rv,si($r(n).data.news.title),1),Cl('div',Bv,si($r(n).data.news.content),1)])])])):$l('',!0)])):$l('',!0),$r(f)?(vl(),wl('div',Uv,[Cl('div',Vv,[(vl(!0),wl(dl,null,xa($r(r),e=>(vl(),wl('div',{key:e.id,class:'status-item'},[Cl('span',Kv,si(e.name),1),'number'===e.type?(vl(),wl('div',Zv,[Cl('div',{class:'progress-bar-container',style:qo({'--progress-low-color':$r(t).progress_color_low,'--progress-high-color':$r(t).progress_color_high})},[Cl('div',{class:'progress-bar-fill',style:qo({width:h(e.id)+'%'})},null,4),Cl('span',qv,si(m(e.id)),1)],4)])):(vl(),wl('div',Wv,[Cl('span',Yv,si($r(n).data.customFields[e.id]),1)]))]))),128))])])):$l('',!0),$r(t).fixed_fields_enabled?.notes&&$r(n).data.notes?(vl(),wl('div',Hv,[Cl('div',Gv,[Cl('div',Jv,si($r(s)``),1),i[5]||(i[5]=Cl('div',{class:'news-divider'},null,-1)),Cl('div',Xv,si($r(n).data.notes),1)])])):$l('',!0)],64)):(vl(),wl('div',Cv,[Al(si($r(s)`(ov)`),1),i[0]||(i[0]=Cl('br',null,null,-1)),Al(si($r(s)`AI`),1)])),Cl('div',Qv,[Cl('button',{class:'menu_button',onClick:v},[i[6]||(i[6]=Cl('i',{class:'fa-solid fa-list'},null,-1)),Al(' '+si($r(s)``),1)]),Cl('button',{class:'menu_button',onClick:y},[i[7]||(i[7]=Cl('i',{class:'fa-solid fa-cog'},null,-1)),Al(' '+si($r(s)``),1)])])],512),[[cc,!$r(t).panel_collapsed]])],2)):$l('',!0)}});let ty=null;const ny={install:e=>{e.config.globalProperties.t=l}};const sy='status-tracking-custom-css';function oy(e){try{hu.log('[cssInjector]  CSS');const t=document.getElementById(sy);if(t&&(t.remove(),hu.log('[cssInjector] ')),!e||!e.trim())return void hu.log('[cssInjector] CSS ');const n=document.createElement('style');n.id=sy,n.textContent=e,document.head.appendChild(n),hu.log('[cssInjector]  CSS ')}catch(t){hu.error('[cssInjector]  CSS :',t)}}$(()=>{hu.log('[index] '),function(){const e=$('<div id="status_tracking">').appendTo('#extensions_settings2');Bp.mount(e[0])}(),function(){if(ty)return;const e={setup:()=>()=>Xl('div',[Xl(ey)])},t=$('<div id="status-tracking-panel">').appendTo('body');ty=Uc(e);const n=Hc();ty.use(n),ty.use(ny),ty.mount(t[0])}(),hu.log('[messageRenderer] '),e.on(t.CHARACTER_MESSAGE_RENDERED,e=>{hu.log('[messageRenderer] AI '),Cp(e)}),e.on(t.MESSAGE_SWIPED,e=>{hu.log('[messageRenderer]  swipe'),setTimeout(()=>Cp(e),100)}),e.on(t.MESSAGE_EDITED,e=>{hu.log('[messageRenderer] '),setTimeout(()=>Cp(e),100)}),e.on(t.CHAT_CHANGED,()=>{hu.log('[messageRenderer]  myst '),setTimeout(()=>Np(),100)}),setTimeout(()=>Np(),500);const o=fu(),i=xv();hu.log('[promptGenerator]  Prompt '),e.on(t.GENERATION_STARTED,ro),oy(o.settings.custom_css),hu.log('[index] '),Ep(e=>{hu.log('[index] '),i.data.date=e.date,i.data.location=e.location,i.data.weather=e.weather,i.data.news=e.news,i.data.notes=e.notes,i.data.customFields=e.customFields},()=>{hu.log('[index] '),i.clearData()},()=>o.settings.fields),ja(()=>o.settings.panel_enabled,e=>{e?io(o.settings.fields,o.settings.language,o.settings.fixed_fields_enabled,o.settings.custom_prompt):(oo=!1,hu.log('[promptGenerator]  Prompt '),n('status-tracking-prompt','',s.IN_CHAT,0,!1))},{immediate:!0}),ja(()=>[o.settings.fields,o.settings.language,o.settings.fixed_fields_enabled,o.settings.custom_prompt],([e,t,n,s])=>{o.settings.panel_enabled&&io(e,t,n,s)},{deep:!0}),ja(()=>o.settings.custom_css,e=>{oy(e),hu.log('[index]  CSS ')})});
//# sourceMappingURL=index.js.map
